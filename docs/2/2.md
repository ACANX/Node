## SpringBoot启动流程分析

制作启动盘的方式有很多，国光我不再赘述，个人比较喜欢 [balenaEthcher](https://www.balena.io/etcher/) 这个工具，界面简单直观：

![](https://image.3001.net/images/20221127/16695458215295.png)   

## 安装流程

整个 PVE 安装过程很简单，所以下面只放关键的截图。首先选择一个你准备好安装 PVE 的整个磁盘，我选择的是 250GB 的 WD SN550：

![](https://image.3001.net/images/20221127/16695515841155.png)   

选择这么小容量的硬盘，是因为 PVE 会自动把选择的硬盘划分为虚拟机存放和模板文件的两个区，感觉不是很合理。所以国光我干脆直接用个小容量硬盘单独来安装虚拟机，这样哪怕是不合理的分区也不可惜了。

选择好自己的网卡，然后配置 1 个静态 IP，根据自己的实际情况配置网关、DNS 等：

![](https://image.3001.net/images/20221127/1669551699506.png)  

最后没问题的话，点击「Install」安装完成自动重启就安装完毕了。

## 网络修复

这个一个流传已久的 PVE BUG，即当我们的 PCIe 的硬件发生变动的时候，我们的 PVE 网络会出现故障，虽然可以正常开机，但是并没有真正获取到 IP 地址，导致 PVE 服务器 ping 不通，PVE 的  Web UI 控制台没法访问，就像下面一样：

![](https://image.3001.net/images/20221127/16695524425909.png) 

??? Warning "如果因为修改了直通显卡，无法进这个交互 shell 界面的话......  点击展开解决办法 👉"

    可以在开机选择系统的时候选择「高级选项」：
    ![](https://image.3001.net/images/20221127/16695526791906.png)
    然后选择「recovery mode 恢复模式」即可：
    ![](https://image.3001.net/images/20221127/16695527088192.png)

细心的小伙伴发现，我们 PVE 安装的时候，网卡的型号是 **enp5s0**，但实际上现在网卡变成了 **enp8s0**，只需要编辑网卡配置文件，改回 **enp8s0** 就可以了（下面命令是：编辑网卡配置文件 将 enp5s0 替换成 enp8s0）：

```bash
sed -i 's/enp5s0/enp8s0/g'  /etc/network/interfaces
```

编辑完重启即可解决问题。

