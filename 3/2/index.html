
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Node">
      
      
        <meta name="author" content="ACANX">
      
      
        <link rel="canonical" href="https://acanx.github.io/Node/3/2/">
      
      <link rel="icon" href="https://image.3001.net/images/20200922/16007336487809.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.1">
    
    
      
        <title>Kubernetes集群部署实战 - Node</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2e8b5541.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Node" class="md-header__button md-logo" aria-label="Node" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7m-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4M420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7M223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8M183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1m-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3q-2.1-7.35 4.2-12.3m3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9m-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2m257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6M173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Node
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubernetes集群部署实战
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换深色模式"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="切换深色模式" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="切换浅色模式"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="切换浅色模式" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/ACANX/Node" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ACANX/Node
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      主页
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../1/1/" class="md-tabs__link">
        节点
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../2/1/" class="md-tabs__link">
        Spring
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../1/" class="md-tabs__link md-tabs__link--active">
        K8S
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../4/1/" class="md-tabs__link">
        进阶
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../5/1/" class="md-tabs__link">
        路由
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../6/1/" class="md-tabs__link">
        群晖
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../7/1/" class="md-tabs__link">
        苹果
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../8/1/" class="md-tabs__link">
        穿透
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv6
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv7
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv8
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv9
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../11/1/" class="md-tabs__link">
        IPv10
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../12/1/" class="md-tabs__link">
        IPv11
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../8/1/" class="md-tabs__link">
        穿透
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv16
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv17
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv18
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv19
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../11/1/" class="md-tabs__link">
        IPv20
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../12/1/" class="md-tabs__link">
        IPv21
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv27
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv28
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../9/1/" class="md-tabs__link">
        IPv29
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../11/1/" class="md-tabs__link">
        IPv30
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../12/1/" class="md-tabs__link">
        IPv31
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Node" class="md-nav__button md-logo" aria-label="Node" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7m-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4M420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7M223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8M183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1m-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3q-2.1-7.35 4.2-12.3m3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9m-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2m257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6M173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5"/></svg>

    </a>
    Node
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ACANX/Node" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    ACANX/Node
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        主页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          节点
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="节点" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          节点
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1/1/" class="md-nav__link">
        硬件配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1/2/" class="md-nav__link">
        系统选择
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1/3/" class="md-nav__link">
        磁盘划分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1/4/" class="md-nav__link">
        架构规划
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Spring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Spring" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Spring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/1/" class="md-nav__link">
        SpringBoot命令启动
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/2/" class="md-nav__link">
        SpringBoot启动流程分析
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/3/" class="md-nav__link">
        Springboot启动流程源码解析（带流程图）
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/4/" class="md-nav__link">
        常用命令
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/5/" class="md-nav__link">
        来宾代理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../2/6/" class="md-nav__link">
        参考链接
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          K8S
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="K8S" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          K8S
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1/" class="md-nav__link">
        Kubernetes容器编排系统概念模型
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Kubernetes集群部署实战
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Kubernetes集群部署实战
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1 前置准备
  </a>
  
    <nav class="md-nav" aria-label="1.1 前置准备">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    1.1.1 前置依赖软件及物料准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-k8sip" class="md-nav__link">
    1.1.2 K8S集群网络IP规划
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113" class="md-nav__link">
    1.1.3 主机硬件配置说明
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2 主机系统基础环境准备
  </a>
  
    <nav class="md-nav" aria-label="1.2 主机系统基础环境准备">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    1.2.1 正式安装前，系统需要检查及准备以下操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-ssh" class="md-nav__link">
    1.2.2 开启SSH远程登录服务
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3 集群主机配置
  </a>
  
    <nav class="md-nav" aria-label="1.3 集群主机配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1 主机名配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-ip" class="md-nav__link">
    1.3.2 主机IP地址配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#133-ip" class="md-nav__link">
    1.3.3 主机名与IP地址解析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#134" class="md-nav__link">
    1.3.4 时间同步配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    1.3.5 配置内核转发及网桥过滤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#136-ipsetipvsadm" class="md-nav__link">
    1.3.6 安装ipset及ipvsadm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#137-swap" class="md-nav__link">
    1.3.7 关闭SWAP分区
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          进阶
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="进阶" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          进阶
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/1/" class="md-nav__link">
        添加硬盘
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/2/" class="md-nav__link">
        硬件直通
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/3/" class="md-nav__link">
        配置证书
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/4/" class="md-nav__link">
        硬盘迁移
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/5/" class="md-nav__link">
        vGPU教程
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4/6/" class="md-nav__link">
        功耗节能
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          路由
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="路由" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          路由
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5/1/" class="md-nav__link">
        基本操作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5/2/" class="md-nav__link">
        硬盘扩容
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5/3/" class="md-nav__link">
        OpenClash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../5/4.md" class="md-nav__link">
        IPv6 配置
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          群晖
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="群晖" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          群晖
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/1/" class="md-nav__link">
        基本安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/2/" class="md-nav__link">
        存储划分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/3/" class="md-nav__link">
        SSD缓存
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/4/" class="md-nav__link">
        CPU修正
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/5/" class="md-nav__link">
        直通独显
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/6/" class="md-nav__link">
        远程访问
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/7/" class="md-nav__link">
        添加证书
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/8/" class="md-nav__link">
        WebDAV
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/9/" class="md-nav__link">
        安装 alist
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/10/" class="md-nav__link">
        终端美化
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../6/11/" class="md-nav__link">
        Docker与IPv6
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          苹果
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="苹果" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          苹果
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../7/1/" class="md-nav__link">
        准备工作
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../7/2/" class="md-nav__link">
        修正配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../7/3/" class="md-nav__link">
        系统安装
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../7/4/" class="md-nav__link">
        系统优化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          穿透
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="穿透" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          穿透
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/1/" class="md-nav__link">
        NAT类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/2/" class="md-nav__link">
        ZeroTier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/3/" class="md-nav__link">
        IPv6 DDNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/4/" class="md-nav__link">
        远程桌面
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          IPv6
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv6" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          IPv6
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          IPv7
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv7" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          IPv7
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          IPv8
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv8" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          IPv8
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          IPv9
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv9" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          IPv9
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          IPv10
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv10" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          IPv10
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          IPv11
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv11" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          IPv11
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          穿透
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="穿透" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          穿透
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/1/" class="md-nav__link">
        NAT类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/2/" class="md-nav__link">
        ZeroTier
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/3/" class="md-nav__link">
        IPv6 DDNS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../8/4/" class="md-nav__link">
        远程桌面
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          IPv16
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv16" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          IPv16
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          IPv17
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv17" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          IPv17
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_19" type="checkbox" id="__nav_19" >
      
      
      
      
        <label class="md-nav__link" for="__nav_19">
          IPv18
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv18" data-md-level="1">
        <label class="md-nav__title" for="__nav_19">
          <span class="md-nav__icon md-icon"></span>
          IPv18
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_20" type="checkbox" id="__nav_20" >
      
      
      
      
        <label class="md-nav__link" for="__nav_20">
          IPv19
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv19" data-md-level="1">
        <label class="md-nav__title" for="__nav_20">
          <span class="md-nav__icon md-icon"></span>
          IPv19
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_21" type="checkbox" id="__nav_21" >
      
      
      
      
        <label class="md-nav__link" for="__nav_21">
          IPv20
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv20" data-md-level="1">
        <label class="md-nav__title" for="__nav_21">
          <span class="md-nav__icon md-icon"></span>
          IPv20
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_22" type="checkbox" id="__nav_22" >
      
      
      
      
        <label class="md-nav__link" for="__nav_22">
          IPv21
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv21" data-md-level="1">
        <label class="md-nav__title" for="__nav_22">
          <span class="md-nav__icon md-icon"></span>
          IPv21
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_23" type="checkbox" id="__nav_23" >
      
      
      
      
        <label class="md-nav__link" for="__nav_23">
          IPv27
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv27" data-md-level="1">
        <label class="md-nav__title" for="__nav_23">
          <span class="md-nav__icon md-icon"></span>
          IPv27
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_24" type="checkbox" id="__nav_24" >
      
      
      
      
        <label class="md-nav__link" for="__nav_24">
          IPv28
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv28" data-md-level="1">
        <label class="md-nav__title" for="__nav_24">
          <span class="md-nav__icon md-icon"></span>
          IPv28
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_25" type="checkbox" id="__nav_25" >
      
      
      
      
        <label class="md-nav__link" for="__nav_25">
          IPv29
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv29" data-md-level="1">
        <label class="md-nav__title" for="__nav_25">
          <span class="md-nav__icon md-icon"></span>
          IPv29
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../9/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_26" type="checkbox" id="__nav_26" >
      
      
      
      
        <label class="md-nav__link" for="__nav_26">
          IPv30
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv30" data-md-level="1">
        <label class="md-nav__title" for="__nav_26">
          <span class="md-nav__icon md-icon"></span>
          IPv30
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../11/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_27" type="checkbox" id="__nav_27" >
      
      
      
      
        <label class="md-nav__link" for="__nav_27">
          IPv31
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IPv31" data-md-level="1">
        <label class="md-nav__title" for="__nav_27">
          <span class="md-nav__icon md-icon"></span>
          IPv31
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/1/" class="md-nav__link">
        IPv6 基础
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/2/" class="md-nav__link">
        IPv6 场景
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/3/" class="md-nav__link">
        IPv6 使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/4/" class="md-nav__link">
        IPv6 普及
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../12/5/" class="md-nav__link">
        IPv6与光猫
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    1.1 前置准备
  </a>
  
    <nav class="md-nav" aria-label="1.1 前置准备">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111" class="md-nav__link">
    1.1.1 前置依赖软件及物料准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-k8sip" class="md-nav__link">
    1.1.2 K8S集群网络IP规划
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113" class="md-nav__link">
    1.1.3 主机硬件配置说明
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    1.2 主机系统基础环境准备
  </a>
  
    <nav class="md-nav" aria-label="1.2 主机系统基础环境准备">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121" class="md-nav__link">
    1.2.1 正式安装前，系统需要检查及准备以下操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-ssh" class="md-nav__link">
    1.2.2 开启SSH远程登录服务
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    1.3 集群主机配置
  </a>
  
    <nav class="md-nav" aria-label="1.3 集群主机配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#131" class="md-nav__link">
    1.3.1 主机名配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#132-ip" class="md-nav__link">
    1.3.2 主机IP地址配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#133-ip" class="md-nav__link">
    1.3.3 主机名与IP地址解析
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#134" class="md-nav__link">
    1.3.4 时间同步配置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#135" class="md-nav__link">
    1.3.5 配置内核转发及网桥过滤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#136-ipsetipvsadm" class="md-nav__link">
    1.3.6 安装ipset及ipvsadm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#137-swap" class="md-nav__link">
    1.3.7 关闭SWAP分区
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/ACANX/Node/edit/main/docs/3/2.md" title="编辑此页" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
  </a>


<h1 id="_1">前言<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p><a class="glightbox" href="https://kubernetes.io/images/docs/components-of-kubernetes.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="components-of-kubernetes" src="https://kubernetes.io/images/docs/components-of-kubernetes.svg" /></a></p>
<p><a href="https://kubernetes.io/zh-cn/docs/concepts/overview/components/">Kubernetes集群</a>部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.29版本搭建。</p>
<h2 id="11">1.1 前置准备<a class="headerlink" href="#11" title="Permanent link">&para;</a></h2>
<h3 id="111">1.1.1 前置依赖软件及物料准备<a class="headerlink" href="#111" title="Permanent link">&para;</a></h3>
<ul>
<li>服务器系统：PVE 8.1 </li>
<li>虚拟机操作系统 Ubuntu 24.04.2 LTS ISO</li>
<li>Kubernetes v1.32.3 （kubeadm、kubelet、kubectl、kube-apiserver、kube-controller-manager、kube-scheduler、kube-proxy）</li>
<li>Cri-Containerd v1.7.29    <a href="https://github.com/containerd/containerd/releases">releases</a>       crictl</li>
<li>CoreDNS v1.11.3</li>
<li>Pause v3.10</li>
<li>Etcd v3.5.16-0</li>
<li>Calico v3.29.2</li>
<li>Nginx镜像</li>
<li>Helm v3.17.2</li>
<li>Kubernetes Dashboard v7.11.1</li>
</ul>
<h3 id="112-k8sip">1.1.2 K8S集群网络IP规划<a class="headerlink" href="#112-k8sip" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: center;">节点名称</th>
<th style="text-align: center;">规划IP</th>
<th style="text-align: center;">当前验证实际使用IP</th>
<th style="text-align: center;">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">K8S-Master01</td>
<td style="text-align: center;">10.200.10.11</td>
<td style="text-align: center;">192.168.11.161</td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Master02</td>
<td style="text-align: center;">10.200.10.12</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Master03</td>
<td style="text-align: center;">10.200.10.13</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">k8S-Worker01</td>
<td style="text-align: center;">10.200.10.21</td>
<td style="text-align: center;">192.168.11.165</td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Worker02</td>
<td style="text-align: center;">10.200.10.22</td>
<td style="text-align: center;">192.168.11.166</td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Worker03</td>
<td style="text-align: center;">10.200.10.23</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Worker04</td>
<td style="text-align: center;">10.200.10.24</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">...</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Worker05</td>
<td style="text-align: center;">10.200.10.25</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">...</td>
</tr>
</tbody>
</table>
<h3 id="113">1.1.3 主机硬件配置说明<a class="headerlink" href="#113" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: center;">节点名称</th>
<th style="text-align: center;">角色</th>
<th style="text-align: center;">CPU</th>
<th style="text-align: center;">内存</th>
<th style="text-align: center;">硬盘</th>
<th style="text-align: center;">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">K8S-Master01</td>
<td style="text-align: center;">master</td>
<td style="text-align: center;">4C</td>
<td style="text-align: center;">8G</td>
<td style="text-align: center;">200GB</td>
<td style="text-align: center;">最低4C8G</td>
</tr>
<tr>
<td style="text-align: center;">k8S-Worker01</td>
<td style="text-align: center;">worker</td>
<td style="text-align: center;">8C</td>
<td style="text-align: center;">16G</td>
<td style="text-align: center;">200GB</td>
<td style="text-align: center;">最低8C16G</td>
</tr>
<tr>
<td style="text-align: center;">K8S-Worker02</td>
<td style="text-align: center;">worker</td>
<td style="text-align: center;">8C</td>
<td style="text-align: center;">16G</td>
<td style="text-align: center;">200GB</td>
<td style="text-align: center;">最低8C16G</td>
</tr>
</tbody>
</table>
<h2 id="12">1.2 主机系统基础环境准备<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<h3 id="121">1.2.1 正式安装前，系统需要检查及准备以下操作<a class="headerlink" href="#121" title="Permanent link">&para;</a></h3>
<ul>
<li>更新基础软件版本  </li>
<li>安装 net-tools、iputils-ping 工具，查看IP配置、网络状况</li>
<li>安装必要的编辑器</li>
<li>启用SSH连接 OpenSSH  开启SSH服务</li>
<li>支持cron定时任务</li>
<li>远程时间同步服务支持 </li>
<li>初始化系统 systemd 支持程序开机自启动</li>
<li>网络下载工具：wget、curl</li>
<li>签名校验工具gpg</li>
</ul>
<p>安装必要的软件及工具</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>net-tools<span class="w"> </span>iputils-ping<span class="w"> </span>systemd<span class="w"> </span>nano<span class="w"> </span>openssh-server<span class="w"> </span>cron<span class="w"> </span>ntpdate<span class="w"> </span>ipset<span class="w"> </span>ipvsadm<span class="w"> </span>debianutils<span class="w"> </span>tar<span class="w"> </span>which<span class="w"> </span>apt-transport-https<span class="w"> </span>ca-certificates<span class="w"> </span>curl<span class="w"> </span>wget<span class="w"> </span>gpg<span class="w"> </span>-y
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>upgrade<span class="w"> </span>-y
</span></code></pre></div>
<h3 id="122-ssh">1.2.2 开启SSH远程登录服务<a class="headerlink" href="#122-ssh" title="Permanent link">&para;</a></h3>
<p>确认你的系统使用的是哪种初始化系统：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>~#<span class="w"> </span>ps<span class="w"> </span>-p<span class="w"> </span><span class="m">1</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">comm</span><span class="o">=</span>
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>~$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>ssh
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>~$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>ssh
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>~$<span class="w"> </span>sudo<span class="w"> </span>system<span class="w"> </span>status<span class="w"> </span>ssh<span class="w">      </span><span class="c1"># 查看ssh状态 </span>
</span></code></pre></div>
<h2 id="13">1.3 集群主机配置<a class="headerlink" href="#13" title="Permanent link">&para;</a></h2>
<h3 id="131">1.3.1 主机名配置<a class="headerlink" href="#131" title="Permanent link">&para;</a></h3>
<p>由于本次使用3台主机完成kubernetes集群部署，其中1台为master节点,名称为k8s-master01;其中2台为worker节点，名称分别为：k8s-worker01及k8s-worker02</p>
<p>master01节点</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>~#<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>k8s-master01
</span></code></pre></div>
<p>worker01节点</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>~#<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>k8s-worker01
</span></code></pre></div>
<p>worker02节点</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>~#<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>k8s-worker02
</span></code></pre></div>
<h3 id="132-ip">1.3.2 主机IP地址配置<a class="headerlink" href="#132-ip" title="Permanent link">&para;</a></h3>
<p>k8s-master01节点IP地址为：192.168.11.161/24</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w"> </span>root@k8s-master01:~#<span class="w"> </span>nano<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w"> </span>root@k8s-master01:~#<span class="w"> </span>cat<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span></code></pre></div>
<p>50-cloud-init.yaml文件中添加或修改IP地址（注意网卡名称需要与系统中的以太网卡一致）</p>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">network</span><span class="p">:</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">renderer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networkd</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nt">ethernets</span><span class="p">:</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nt">ens18</span><span class="p">:</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">      </span><span class="nt">addresses</span><span class="p">:</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.161/24</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">      </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">          </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.1</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">      </span><span class="nt">nameservers</span><span class="p">:</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">        </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">119.29.29.29</span><span class="p p-Indicator">,</span><span class="nv">114.114.114.114</span><span class="p p-Indicator">,</span><span class="nv">8.8.8.8</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p>保存k8s-master01的网卡配置</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>root@k8s-master01:~#<span class="w"> </span>sudo<span class="w"> </span>netplan<span class="w"> </span>apply
</span></code></pre></div>
<p>重新按新ip连接主机，然后使用以下命名查看ip地址信息</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ip<span class="w"> </span>a<span class="w"> </span>s
</span></code></pre></div>
<p>k8s-worker01节点IP地址为：192.168.11.165/24</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>root@k8s-worker01:~#<span class="w"> </span>nano<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>root@k8s-worker01:~#<span class="w"> </span>cat<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span></code></pre></div>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">network</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">renderer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networkd</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">ethernets</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="nt">enp6s18</span><span class="p">:</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">      </span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">      </span><span class="nt">addresses</span><span class="p">:</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.165/24</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">      </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">          </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.1</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">      </span><span class="nt">nameservers</span><span class="p">:</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">        </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">119.29.29.29</span><span class="p p-Indicator">,</span><span class="nv">114.114.114.114</span><span class="p p-Indicator">,</span><span class="nv">8.8.8.8</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p>保存k8s-worker01的网卡配置</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>root@k8s-worker01:~#<span class="w"> </span>sudo<span class="w"> </span>netplan<span class="w"> </span>apply
</span></code></pre></div>
<p>k8s-worker02节点IP地址为：192.168.11.166/24</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>root@k8s-worker02:~#<span class="w"> </span>nano<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>root@k8s-worker02:~#<span class="w"> </span>cat<span class="w"> </span>/etc/netplan/50-cloud-init.yaml
</span></code></pre></div>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">network</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="nt">renderer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networkd</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="nt">ethernets</span><span class="p">:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="nt">enp6s18</span><span class="p">:</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">      </span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">      </span><span class="nt">addresses</span><span class="p">:</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.166/24</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">      </span><span class="nt">routes</span><span class="p">:</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">          </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.1</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">      </span><span class="nt">nameservers</span><span class="p">:</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">        </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">119.29.29.29</span><span class="p p-Indicator">,</span><span class="nv">114.114.114.114</span><span class="p p-Indicator">,</span><span class="nv">8.8.8.8</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p>保存k8s-worker02的网卡配置</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>root@k8s-worker02:~#<span class="w"> </span>sudo<span class="w"> </span>netplan<span class="w"> </span>apply
</span></code></pre></div>
<h3 id="133-ip">1.3.3 主机名与IP地址解析<a class="headerlink" href="#133-ip" title="Permanent link">&para;</a></h3>
<p>所有集群主机均需要进行配置。</p>
<p>在没有DNS服务器的环境中需要先能解析到各个节点的IP地址</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/hosts
</span></code></pre></div>
<ul>
<li>在文件后面追加以下内容</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="m">192</span>.168.11.161<span class="w"> </span>k8s-master01
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="m">192</span>.168.11.165<span class="w"> </span>k8s-worker01
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="m">192</span>.168.11.166<span class="w"> </span>k8s-worker02
</span></code></pre></div>
<p>修改后Ctrl+O,然后Enter键，再Ctrl+X保存文件修改并退出</p>
<p>查看IP解析配置是否生效命令</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>~$<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span>k8s-master01
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>~$<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span>k8s-worker01
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>~$<span class="w"> </span>ping<span class="w"> </span>-c<span class="w"> </span><span class="m">4</span><span class="w"> </span>k8s-worker02
</span></code></pre></div>
<h3 id="134">1.3.4 时间同步配置<a class="headerlink" href="#134" title="Permanent link">&para;</a></h3>
<p>查看时间</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>~#<span class="w"> </span>date
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w"> </span>Thu<span class="w"> </span>Sep<span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">05</span>:39:21<span class="w"> </span>AM<span class="w"> </span>UTC<span class="w"> </span><span class="m">2024</span>
</span></code></pre></div>
<p>更换时区</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>~#<span class="w"> </span>timedatectl<span class="w"> </span>set-timezone<span class="w"> </span>Asia/Shanghai
</span></code></pre></div>
<p>再次查看时间
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>~#<span class="w"> </span>date
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w"> </span>Thu<span class="w"> </span>Sep<span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">01</span>:39:51<span class="w"> </span>PM<span class="w"> </span>CST<span class="w"> </span><span class="m">2024</span>
</span></code></pre></div></p>
<p>安装ntpdate命令</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>~#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ntpdate<span class="w"> </span>-y
</span></code></pre></div>
<p>使用ntpdate命令同步时间</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>~#<span class="w"> </span>ntpdate<span class="w"> </span>time1.aliyun.com
</span></code></pre></div>
<p>通过计划任务实现时间同步</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>~#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>cron<span class="w"> </span>-y
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>~#<span class="w"> </span>crontab<span class="w"> </span>-e
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w"> </span>no<span class="w"> </span>crontab<span class="w"> </span><span class="k">for</span><span class="w"> </span>root<span class="w"> </span>-<span class="w"> </span>using<span class="w"> </span>an<span class="w"> </span>empty<span class="w"> </span>one
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w"> </span>Select<span class="w"> </span>an<span class="w"> </span>editor.<span class="w">  </span>To<span class="w"> </span>change<span class="w"> </span>later,<span class="w"> </span>run<span class="w"> </span><span class="s1">&#39;select-editor&#39;</span>.
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="m">1</span>.<span class="w"> </span>/bin/nano<span class="w">        </span>&lt;----<span class="w"> </span>easiest
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">  </span><span class="m">2</span>.<span class="w"> </span>/usr/bin/vim.basic
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">  </span><span class="m">3</span>.<span class="w"> </span>/usr/bin/vim.tiny
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">  </span><span class="m">4</span>.<span class="w"> </span>/bin/ed
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w"> </span>Choose<span class="w"> </span><span class="m">1</span>-4<span class="w"> </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span><span class="m">2</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w"> </span>......
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="m">0</span><span class="w"> </span>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>ntpdate<span class="w"> </span>time1.aliyun.com<span class="w">           </span>//<span class="w"> </span>写入配置文件
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>~#<span class="w"> </span>crontab<span class="w"> </span>-l<span class="w">   </span>//<span class="w"> </span>查看crontab配置
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w"> </span>......
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="m">0</span><span class="w"> </span>*/1<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>ntpdate<span class="w"> </span>time1.aliyun.com<span class="w">        </span>
</span></code></pre></div>
<h3 id="135">1.3.5 配置内核转发及网桥过滤<a class="headerlink" href="#135" title="Permanent link">&para;</a></h3>
<p>所有主机均需要操作。</p>
<p>Way1：手动执行，手动加载内核转发及网桥过滤模块</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>~#<span class="w"> </span>modprobe<span class="w"> </span>overlay
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>~#<span class="w"> </span>modprobe<span class="w"> </span>br_netfilter
</span></code></pre></div>
<p>Way2：创建加载内核模块文件</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF | tee /etc/modules-load.d/k8s.conf</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="s">overlay</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="s">br_netfilter</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="s">EOF</span>
</span></code></pre></div>
<ul>
<li>查看已加载的模块</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>~#<span class="w"> </span>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span><span class="s2">&quot;overlay&quot;</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>overlay<span class="w">               </span><span class="m">151552</span><span class="w">  </span><span class="m">0</span>
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>~#<span class="w"> </span>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span><span class="s2">&quot;br_netfilter&quot;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>br_netfilter<span class="w">    </span><span class="m">32768</span><span class="w">   </span><span class="m">0</span><span class="w">       </span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>bridge<span class="w">           </span><span class="m">307200</span><span class="w">  </span><span class="m">1</span><span class="w"> </span>br_netfilter
</span></code></pre></div>
<ul>
<li>添加网桥过滤及内核转发配置文件</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>~#<span class="w"> </span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF| tee /etc/sysctl.d/k8s.conf</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="s">net.bridge.bridge-nf-call-ip6tables = 1</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="s">net.bridge.bridge-nf-call-iptables = 1</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="s">net.ipv4.ip_forward = 1</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="s">EOF</span>
</span></code></pre></div>
<p>查看配置文件</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>~#<span class="w"> </span>nano<span class="w"> </span>/etc/modules-load.d/k8s.conf
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>~#<span class="w"> </span>cat<span class="w"> </span>/etc/modules-load.d/k8s.conf
</span></code></pre></div>
<p>加载内核参数,使之生效</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>~#<span class="w"> </span>sysctl<span class="w"> </span>--system
</span></code></pre></div>
<p>检查输出的结果中是否包含以下三项：</p>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>net.bridge.bridge-nf-call-ip6tables = 1
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>net.bridge.bridge-nf-call-iptables = 1
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>net.ipv4.ip_forward = 1
</span></code></pre></div>
<h3 id="136-ipsetipvsadm">1.3.6 安装ipset及ipvsadm<a class="headerlink" href="#136-ipsetipvsadm" title="Permanent link">&para;</a></h3>
<p>所有主机均需要操作。</p>
<p>安装ipset及ipvsadm命令</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="w"> </span>~#<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ipset<span class="w"> </span>ipvsadm<span class="w"> </span>-y
</span></code></pre></div>
<p>配置ipvsadm模块加载</p>
<p>添加系统启动需要加载的模块文件</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>~#<span class="w"> </span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF | tee /etc/modules-load.d/ipvs.conf</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="s">ip_vs</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="s">ip_vs_rr</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="s">ip_vs_wrr</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="s">ip_vs_sh</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="s">nf_conntrack</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="s">EOF</span>
</span></code></pre></div>
<p>创建加载模块脚本文件</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>~#<span class="w"> </span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF | tee ipvs.sh</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="s">#!/bin/sh</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="s">modprobe -- ip_vs</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="s">modprobe -- ip_vs_rr</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="s">modprobe -- ip_vs_wrr</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="s">modprobe -- ip_vs_sh</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="s">modprobe -- nf_conntrack</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="s">EOF</span>
</span></code></pre></div>
<p>上述命令执行完成后，当前目录下会生成一个ipvs.sh脚本文件，接下来使用bash命令执行它</p>
<p>执行ipvs.sh脚本文件，以加载模块</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>~#<span class="w"> </span>sh<span class="w"> </span>ipvs.sh
</span></code></pre></div>
<p>查看ipvs配置是否已生效</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>root@k8s-master01:~#<span class="w"> </span>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>ip_vs
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>ip_vs_sh<span class="w">               </span><span class="m">12288</span><span class="w">  </span><span class="m">0</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>ip_vs_wrr<span class="w">              </span><span class="m">12288</span><span class="w">  </span><span class="m">0</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>ip_vs_rr<span class="w">               </span><span class="m">12288</span><span class="w">  </span><span class="m">0</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>ip_vs<span class="w">                 </span><span class="m">221184</span><span class="w">  </span><span class="m">6</span><span class="w"> </span>ip_vs_rr,ip_vs_sh,ip_vs_wrr
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>nf_conntrack<span class="w">          </span><span class="m">196608</span><span class="w">  </span><span class="m">1</span><span class="w"> </span>ip_vs
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>nf_defrag_ipv6<span class="w">         </span><span class="m">24576</span><span class="w">  </span><span class="m">2</span><span class="w"> </span>nf_conntrack,ip_vs
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>libcrc32c<span class="w">              </span><span class="m">12288</span><span class="w">  </span><span class="m">4</span><span class="w"> </span>nf_conntrack,btrfs,raid456,ip_vs
</span></code></pre></div>
<h3 id="137-swap">1.3.7 关闭SWAP分区<a class="headerlink" href="#137-swap" title="Permanent link">&para;</a></h3>
<p>修改完成后需要重启操作系统，</p>
<p>Way1：临时关闭（不推荐），若不重启，命令为</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>~#<span class="w"> </span>swapoff<span class="w"> </span>-a
</span></code></pre></div>
<p>Way2：永久关闭swap分区（推荐，操作需要重启操作系统）</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>~#<span class="w"> </span>nano<span class="w"> </span>/etc/fstab<span class="w">    </span>//<span class="w"> </span>进入分区配置文件
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w"> </span>......
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w"> </span><span class="c1">#/swap.img   none    swap   sw      0       0    // 在此行首添加“#”以注释swap分区的配置</span>
</span></code></pre></div>
<p>修改完成后保存文件并退出</p>
<h1 id="k8s-containerd">二、K8S集群容器运行时 Containerd 准备<a class="headerlink" href="#k8s-containerd" title="Permanent link">&para;</a></h1>
<ul>
<li>
<p>安装docker-ce方法：<a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
</li>
<li>
<p>本文实际采用containerd作为集群容器镜像的运行平台</p>
</li>
</ul>
<h2 id="21-containerd">2.1 Containerd部署文件获取<a class="headerlink" href="#21-containerd" title="Permanent link">&para;</a></h2>
<p>wget下载1.7.27版本containerd</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>~#<span class="w"> </span>wget<span class="w"> </span>https://github.com/containerd/containerd/releases/download/v1.7.27/cri-containerd-1.7.27-linux-amd64.tar.gz
</span></code></pre></div>
<p>解压安装</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>debianutils
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>--reinstall<span class="w"> </span>libc6
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>--reinstall<span class="w"> </span>which
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>~#<span class="w"> </span>sudo<span class="w"> </span>tar<span class="w"> </span>xf<span class="w"> </span>/home/acanx/cri-containerd-1.7.27-linux-amd64.tar.gz<span class="w">  </span>-C<span class="w"> </span>/
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>~#<span class="w"> </span>which<span class="w"> </span>containerd
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>/usr/local/bin/containerd
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>~#<span class="w"> </span>which<span class="w"> </span>runc
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>/usr/local/sbin/runc
</span></code></pre></div>
<p>验证containerd、runc是否安装成功</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>~#<span class="w"> </span>which<span class="w"> </span>containerd
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>~#<span class="w"> </span>which<span class="w"> </span>runc
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>~#<span class="w"> </span>whereis<span class="w"> </span>containerd
</span></code></pre></div>
<h2 id="22-containerd">2.2 Containerd配置文件生成并修改<a class="headerlink" href="#22-containerd" title="Permanent link">&para;</a></h2>
<p>创建containerd配置文件目录/etc/containerd</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>~#<span class="w"> </span>mkdir<span class="w"> </span>/etc/containerd
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>~#<span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">777</span><span class="w"> </span>/etc/containerd/<span class="w">       </span>//<span class="w"> </span>然后可以上传配置文件
</span></code></pre></div>
<p>生成配置文件config.toml及默认配置</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>~#<span class="w"> </span>containerd<span class="w"> </span>config<span class="w"> </span>default<span class="w"> </span>&gt;<span class="w"> </span>/etc/containerd/config.toml
</span></code></pre></div>
<p>修改配置文件的第67行</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>~#<span class="w"> </span>nano<span class="w"> </span>/etc/containerd/config.toml
</span></code></pre></div>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a> sandbox_image = &quot;registry.k8s.io/pause:3.10&quot;  // 由3.9修改为3.10
</span></code></pre></div>
<ul>
<li>如果使用阿里云容器镜像仓库，也可以修改为：</li>
</ul>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sandbox_image = &quot;registry.aliyuncs.com/google_containers/pause:3.9&quot;  // 由3.9修改为3.10
</span></code></pre></div>
<p>修改配置文件的第139行</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>~#<span class="w"> </span>vim<span class="w"> </span>/etc/containerd/config.toml
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w"> </span><span class="nv">SystemdCgroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span>由false修改为true
</span></code></pre></div>
<h2 id="23-containerd">2.3 Containerd启动及开机自启动<a class="headerlink" href="#23-containerd" title="Permanent link">&para;</a></h2>
<p>设置containerd开机自启并立即启动</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/systemd/system/containerd.service<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="s">[Unit]</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="s">Description=containerd container runtime</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="s">Documentation=https://containerd.io</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="s">After=network.target local-fs.target</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="s">[Service]</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="s">ExecStartPre=-/sbin/modprobe overlay</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a><span class="s">ExecStart=/usr/local/bin/containerd</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a><span class="s">Type=notify</span>
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="s">Delegate=yes</span>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a><span class="s">KillMode=process</span>
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a><span class="s">Restart=always</span>
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a><span class="s">RestartSec=5</span>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>
</span><span id="__span-49-17"><a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a><span class="s"># 限制日志大小</span>
</span><span id="__span-49-18"><a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a><span class="s">LimitNOFILE=infinity</span>
</span><span id="__span-49-19"><a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>
</span><span id="__span-49-20"><a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a><span class="s">[Install]</span>
</span><span id="__span-49-21"><a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a><span class="s">WantedBy=multi-user.target</span>
</span><span id="__span-49-22"><a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a><span class="s">EOF</span>
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>~#<span class="w"> </span>ls<span class="w"> </span>/etc/systemd/system/containerd.service
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>~#<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>containerd
</span></code></pre></div>
<p>验证containerd版本</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>~#<span class="w"> </span>containerd<span class="w"> </span>--version
</span></code></pre></div>
<h1 id="k8s">三、K8S集群部署<a class="headerlink" href="#k8s" title="Permanent link">&para;</a></h1>
<h2 id="31-k8sapt">3.1 K8S集群软件apt源准备<a class="headerlink" href="#31-k8sapt" title="Permanent link">&para;</a></h2>
<p>本次使用kubernetes社区软件源仓库或阿里云软件源仓库，建议网络不畅通的选择阿里云软件源仓库</p>
<p>下载用于 Kubernetes 软件包仓库的公共签名密钥,所有仓库都使用相同的签名密钥，因此你可以忽略URL中的版本：</p>
<ul>
<li>K8S社区软件源仓库签名文件下载</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>~#<span class="w"> </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://pkgs.k8s.io/core:/stable:/v1.32/deb/Release.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/kubernetes-apt-keyring.gpg
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>~#<span class="w"> </span>ls<span class="w"> </span>/etc/apt/keyrings/kubernetes-apt-keyring.gpg
</span></code></pre></div>
<ul>
<li>阿里云软件源仓库签名文件下载</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>~#<span class="w"> </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/Release.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/kubernetes-apt-keyring.gpg
</span></code></pre></div>
<h3 id="kubernetes-apt">添加 Kubernetes apt 仓库<a class="headerlink" href="#kubernetes-apt" title="Permanent link">&para;</a></h3>
<p>请注意，此仓库仅包含适用于 Kubernetes 1.32.3 的软件包； 对于其他 Kubernetes 次要版本，则需要更改 URL 中的 Kubernetes 次要版本以匹配你所需的次要版本 。</p>
<p>此操作会覆盖 /etc/apt/sources.list.d/kubernetes.list 中现存的所有配置，如果有的情况下。</p>
<h4 id="k8s_1">K8S社区<a class="headerlink" href="#k8s_1" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.32/deb/ /&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/kubernetes.list
</span></code></pre></div>
<h4 id="_2">阿里云<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>~#<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/ /&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/kubernetes.list
</span></code></pre></div>
<p>更新 apt 包索引</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span></code></pre></div>
<h2 id="32-k8skubelet">3.2 K8S集群软件安装及kubelet配置<a class="headerlink" href="#32-k8skubelet" title="Permanent link">&para;</a></h2>
<p>所有节点均可安装</p>
<h3 id="321-k8s">3.2.1 k8s集群软件安装<a class="headerlink" href="#321-k8s" title="Permanent link">&para;</a></h3>
<p>查看软件列表</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>root@k8s-master01:~#<span class="w"> </span>apt-cache<span class="w"> </span>policy<span class="w"> </span>kubeadm
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>kubeadm:
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">  </span>Installed:<span class="w"> </span><span class="o">(</span>none<span class="o">)</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">  </span>Candidate:<span class="w"> </span><span class="m">1</span>.32.3-1.1
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">  </span>Version<span class="w"> </span>table:
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">     </span><span class="m">1</span>.32.3-1.1<span class="w"> </span><span class="m">500</span>
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">        </span><span class="m">500</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">     </span><span class="m">1</span>.32.2-1.1<span class="w"> </span><span class="m">500</span>
</span><span id="__span-57-10"><a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">        </span><span class="m">500</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-57-11"><a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="w">     </span><span class="m">1</span>.32.1-1.1<span class="w"> </span><span class="m">500</span>
</span><span id="__span-57-12"><a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="w">        </span><span class="m">500</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-57-13"><a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">     </span><span class="m">1</span>.32.0-1.1<span class="w"> </span><span class="m">500</span>
</span><span id="__span-57-14"><a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="w">        </span><span class="m">500</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span></code></pre></div>
<p>查看软件列表及其依赖关系</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>root@k8s-master01:~#<span class="w"> </span>apt-cache<span class="w"> </span>showpkg<span class="w"> </span>kubeadm
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>Package:<span class="w"> </span>kubeadm
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>Versions:<span class="w"> </span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="m">1</span>.32.3-1.1<span class="w"> </span><span class="o">(</span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<span class="o">)</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-43"><a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-44"><a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-45"><a id="__codelineno-58-45" name="__codelineno-58-45" href="#__codelineno-58-45"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-46"><a id="__codelineno-58-46" name="__codelineno-58-46" href="#__codelineno-58-46"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-47"><a id="__codelineno-58-47" name="__codelineno-58-47" href="#__codelineno-58-47"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-48"><a id="__codelineno-58-48" name="__codelineno-58-48" href="#__codelineno-58-48"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-49"><a id="__codelineno-58-49" name="__codelineno-58-49" href="#__codelineno-58-49"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-50"><a id="__codelineno-58-50" name="__codelineno-58-50" href="#__codelineno-58-50"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-51"><a id="__codelineno-58-51" name="__codelineno-58-51" href="#__codelineno-58-51"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-52"><a id="__codelineno-58-52" name="__codelineno-58-52" href="#__codelineno-58-52"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-53"><a id="__codelineno-58-53" name="__codelineno-58-53" href="#__codelineno-58-53"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-54"><a id="__codelineno-58-54" name="__codelineno-58-54" href="#__codelineno-58-54"></a>
</span><span id="__span-58-55"><a id="__codelineno-58-55" name="__codelineno-58-55" href="#__codelineno-58-55"></a><span class="m">1</span>.32.2-1.1<span class="w"> </span><span class="o">(</span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<span class="o">)</span>
</span><span id="__span-58-56"><a id="__codelineno-58-56" name="__codelineno-58-56" href="#__codelineno-58-56"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-57"><a id="__codelineno-58-57" name="__codelineno-58-57" href="#__codelineno-58-57"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-58"><a id="__codelineno-58-58" name="__codelineno-58-58" href="#__codelineno-58-58"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-59"><a id="__codelineno-58-59" name="__codelineno-58-59" href="#__codelineno-58-59"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-60"><a id="__codelineno-58-60" name="__codelineno-58-60" href="#__codelineno-58-60"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-61"><a id="__codelineno-58-61" name="__codelineno-58-61" href="#__codelineno-58-61"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-62"><a id="__codelineno-58-62" name="__codelineno-58-62" href="#__codelineno-58-62"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-63"><a id="__codelineno-58-63" name="__codelineno-58-63" href="#__codelineno-58-63"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-64"><a id="__codelineno-58-64" name="__codelineno-58-64" href="#__codelineno-58-64"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-65"><a id="__codelineno-58-65" name="__codelineno-58-65" href="#__codelineno-58-65"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-66"><a id="__codelineno-58-66" name="__codelineno-58-66" href="#__codelineno-58-66"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-67"><a id="__codelineno-58-67" name="__codelineno-58-67" href="#__codelineno-58-67"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-68"><a id="__codelineno-58-68" name="__codelineno-58-68" href="#__codelineno-58-68"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-69"><a id="__codelineno-58-69" name="__codelineno-58-69" href="#__codelineno-58-69"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-70"><a id="__codelineno-58-70" name="__codelineno-58-70" href="#__codelineno-58-70"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-71"><a id="__codelineno-58-71" name="__codelineno-58-71" href="#__codelineno-58-71"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-72"><a id="__codelineno-58-72" name="__codelineno-58-72" href="#__codelineno-58-72"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-73"><a id="__codelineno-58-73" name="__codelineno-58-73" href="#__codelineno-58-73"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-74"><a id="__codelineno-58-74" name="__codelineno-58-74" href="#__codelineno-58-74"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-75"><a id="__codelineno-58-75" name="__codelineno-58-75" href="#__codelineno-58-75"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-76"><a id="__codelineno-58-76" name="__codelineno-58-76" href="#__codelineno-58-76"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-77"><a id="__codelineno-58-77" name="__codelineno-58-77" href="#__codelineno-58-77"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-78"><a id="__codelineno-58-78" name="__codelineno-58-78" href="#__codelineno-58-78"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-79"><a id="__codelineno-58-79" name="__codelineno-58-79" href="#__codelineno-58-79"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-80"><a id="__codelineno-58-80" name="__codelineno-58-80" href="#__codelineno-58-80"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-81"><a id="__codelineno-58-81" name="__codelineno-58-81" href="#__codelineno-58-81"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-82"><a id="__codelineno-58-82" name="__codelineno-58-82" href="#__codelineno-58-82"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-83"><a id="__codelineno-58-83" name="__codelineno-58-83" href="#__codelineno-58-83"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-84"><a id="__codelineno-58-84" name="__codelineno-58-84" href="#__codelineno-58-84"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-85"><a id="__codelineno-58-85" name="__codelineno-58-85" href="#__codelineno-58-85"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-86"><a id="__codelineno-58-86" name="__codelineno-58-86" href="#__codelineno-58-86"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-87"><a id="__codelineno-58-87" name="__codelineno-58-87" href="#__codelineno-58-87"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-88"><a id="__codelineno-58-88" name="__codelineno-58-88" href="#__codelineno-58-88"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-89"><a id="__codelineno-58-89" name="__codelineno-58-89" href="#__codelineno-58-89"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-90"><a id="__codelineno-58-90" name="__codelineno-58-90" href="#__codelineno-58-90"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-91"><a id="__codelineno-58-91" name="__codelineno-58-91" href="#__codelineno-58-91"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-92"><a id="__codelineno-58-92" name="__codelineno-58-92" href="#__codelineno-58-92"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-93"><a id="__codelineno-58-93" name="__codelineno-58-93" href="#__codelineno-58-93"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-94"><a id="__codelineno-58-94" name="__codelineno-58-94" href="#__codelineno-58-94"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-95"><a id="__codelineno-58-95" name="__codelineno-58-95" href="#__codelineno-58-95"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-96"><a id="__codelineno-58-96" name="__codelineno-58-96" href="#__codelineno-58-96"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-97"><a id="__codelineno-58-97" name="__codelineno-58-97" href="#__codelineno-58-97"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-98"><a id="__codelineno-58-98" name="__codelineno-58-98" href="#__codelineno-58-98"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-99"><a id="__codelineno-58-99" name="__codelineno-58-99" href="#__codelineno-58-99"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-100"><a id="__codelineno-58-100" name="__codelineno-58-100" href="#__codelineno-58-100"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-101"><a id="__codelineno-58-101" name="__codelineno-58-101" href="#__codelineno-58-101"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-102"><a id="__codelineno-58-102" name="__codelineno-58-102" href="#__codelineno-58-102"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-103"><a id="__codelineno-58-103" name="__codelineno-58-103" href="#__codelineno-58-103"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-104"><a id="__codelineno-58-104" name="__codelineno-58-104" href="#__codelineno-58-104"></a>
</span><span id="__span-58-105"><a id="__codelineno-58-105" name="__codelineno-58-105" href="#__codelineno-58-105"></a><span class="m">1</span>.32.1-1.1<span class="w"> </span><span class="o">(</span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<span class="o">)</span>
</span><span id="__span-58-106"><a id="__codelineno-58-106" name="__codelineno-58-106" href="#__codelineno-58-106"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-107"><a id="__codelineno-58-107" name="__codelineno-58-107" href="#__codelineno-58-107"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-108"><a id="__codelineno-58-108" name="__codelineno-58-108" href="#__codelineno-58-108"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-109"><a id="__codelineno-58-109" name="__codelineno-58-109" href="#__codelineno-58-109"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-110"><a id="__codelineno-58-110" name="__codelineno-58-110" href="#__codelineno-58-110"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-111"><a id="__codelineno-58-111" name="__codelineno-58-111" href="#__codelineno-58-111"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-112"><a id="__codelineno-58-112" name="__codelineno-58-112" href="#__codelineno-58-112"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-113"><a id="__codelineno-58-113" name="__codelineno-58-113" href="#__codelineno-58-113"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-114"><a id="__codelineno-58-114" name="__codelineno-58-114" href="#__codelineno-58-114"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-115"><a id="__codelineno-58-115" name="__codelineno-58-115" href="#__codelineno-58-115"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-116"><a id="__codelineno-58-116" name="__codelineno-58-116" href="#__codelineno-58-116"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-117"><a id="__codelineno-58-117" name="__codelineno-58-117" href="#__codelineno-58-117"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-118"><a id="__codelineno-58-118" name="__codelineno-58-118" href="#__codelineno-58-118"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-119"><a id="__codelineno-58-119" name="__codelineno-58-119" href="#__codelineno-58-119"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-120"><a id="__codelineno-58-120" name="__codelineno-58-120" href="#__codelineno-58-120"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-121"><a id="__codelineno-58-121" name="__codelineno-58-121" href="#__codelineno-58-121"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-122"><a id="__codelineno-58-122" name="__codelineno-58-122" href="#__codelineno-58-122"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-123"><a id="__codelineno-58-123" name="__codelineno-58-123" href="#__codelineno-58-123"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-124"><a id="__codelineno-58-124" name="__codelineno-58-124" href="#__codelineno-58-124"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-125"><a id="__codelineno-58-125" name="__codelineno-58-125" href="#__codelineno-58-125"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-126"><a id="__codelineno-58-126" name="__codelineno-58-126" href="#__codelineno-58-126"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-127"><a id="__codelineno-58-127" name="__codelineno-58-127" href="#__codelineno-58-127"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-128"><a id="__codelineno-58-128" name="__codelineno-58-128" href="#__codelineno-58-128"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-129"><a id="__codelineno-58-129" name="__codelineno-58-129" href="#__codelineno-58-129"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-130"><a id="__codelineno-58-130" name="__codelineno-58-130" href="#__codelineno-58-130"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-131"><a id="__codelineno-58-131" name="__codelineno-58-131" href="#__codelineno-58-131"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-132"><a id="__codelineno-58-132" name="__codelineno-58-132" href="#__codelineno-58-132"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-133"><a id="__codelineno-58-133" name="__codelineno-58-133" href="#__codelineno-58-133"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-134"><a id="__codelineno-58-134" name="__codelineno-58-134" href="#__codelineno-58-134"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-135"><a id="__codelineno-58-135" name="__codelineno-58-135" href="#__codelineno-58-135"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-136"><a id="__codelineno-58-136" name="__codelineno-58-136" href="#__codelineno-58-136"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-137"><a id="__codelineno-58-137" name="__codelineno-58-137" href="#__codelineno-58-137"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-138"><a id="__codelineno-58-138" name="__codelineno-58-138" href="#__codelineno-58-138"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-139"><a id="__codelineno-58-139" name="__codelineno-58-139" href="#__codelineno-58-139"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-140"><a id="__codelineno-58-140" name="__codelineno-58-140" href="#__codelineno-58-140"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-141"><a id="__codelineno-58-141" name="__codelineno-58-141" href="#__codelineno-58-141"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-142"><a id="__codelineno-58-142" name="__codelineno-58-142" href="#__codelineno-58-142"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-143"><a id="__codelineno-58-143" name="__codelineno-58-143" href="#__codelineno-58-143"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-144"><a id="__codelineno-58-144" name="__codelineno-58-144" href="#__codelineno-58-144"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-145"><a id="__codelineno-58-145" name="__codelineno-58-145" href="#__codelineno-58-145"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-146"><a id="__codelineno-58-146" name="__codelineno-58-146" href="#__codelineno-58-146"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-147"><a id="__codelineno-58-147" name="__codelineno-58-147" href="#__codelineno-58-147"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-148"><a id="__codelineno-58-148" name="__codelineno-58-148" href="#__codelineno-58-148"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-149"><a id="__codelineno-58-149" name="__codelineno-58-149" href="#__codelineno-58-149"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-150"><a id="__codelineno-58-150" name="__codelineno-58-150" href="#__codelineno-58-150"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-151"><a id="__codelineno-58-151" name="__codelineno-58-151" href="#__codelineno-58-151"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-152"><a id="__codelineno-58-152" name="__codelineno-58-152" href="#__codelineno-58-152"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-153"><a id="__codelineno-58-153" name="__codelineno-58-153" href="#__codelineno-58-153"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-154"><a id="__codelineno-58-154" name="__codelineno-58-154" href="#__codelineno-58-154"></a>
</span><span id="__span-58-155"><a id="__codelineno-58-155" name="__codelineno-58-155" href="#__codelineno-58-155"></a><span class="m">1</span>.32.0-1.1<span class="w"> </span><span class="o">(</span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<span class="o">)</span>
</span><span id="__span-58-156"><a id="__codelineno-58-156" name="__codelineno-58-156" href="#__codelineno-58-156"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-157"><a id="__codelineno-58-157" name="__codelineno-58-157" href="#__codelineno-58-157"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-158"><a id="__codelineno-58-158" name="__codelineno-58-158" href="#__codelineno-58-158"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-159"><a id="__codelineno-58-159" name="__codelineno-58-159" href="#__codelineno-58-159"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-160"><a id="__codelineno-58-160" name="__codelineno-58-160" href="#__codelineno-58-160"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-161"><a id="__codelineno-58-161" name="__codelineno-58-161" href="#__codelineno-58-161"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-162"><a id="__codelineno-58-162" name="__codelineno-58-162" href="#__codelineno-58-162"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-163"><a id="__codelineno-58-163" name="__codelineno-58-163" href="#__codelineno-58-163"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-164"><a id="__codelineno-58-164" name="__codelineno-58-164" href="#__codelineno-58-164"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-165"><a id="__codelineno-58-165" name="__codelineno-58-165" href="#__codelineno-58-165"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-166"><a id="__codelineno-58-166" name="__codelineno-58-166" href="#__codelineno-58-166"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-167"><a id="__codelineno-58-167" name="__codelineno-58-167" href="#__codelineno-58-167"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-168"><a id="__codelineno-58-168" name="__codelineno-58-168" href="#__codelineno-58-168"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-169"><a id="__codelineno-58-169" name="__codelineno-58-169" href="#__codelineno-58-169"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-170"><a id="__codelineno-58-170" name="__codelineno-58-170" href="#__codelineno-58-170"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-171"><a id="__codelineno-58-171" name="__codelineno-58-171" href="#__codelineno-58-171"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-172"><a id="__codelineno-58-172" name="__codelineno-58-172" href="#__codelineno-58-172"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-173"><a id="__codelineno-58-173" name="__codelineno-58-173" href="#__codelineno-58-173"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-174"><a id="__codelineno-58-174" name="__codelineno-58-174" href="#__codelineno-58-174"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-175"><a id="__codelineno-58-175" name="__codelineno-58-175" href="#__codelineno-58-175"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-176"><a id="__codelineno-58-176" name="__codelineno-58-176" href="#__codelineno-58-176"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-177"><a id="__codelineno-58-177" name="__codelineno-58-177" href="#__codelineno-58-177"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-178"><a id="__codelineno-58-178" name="__codelineno-58-178" href="#__codelineno-58-178"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-179"><a id="__codelineno-58-179" name="__codelineno-58-179" href="#__codelineno-58-179"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-180"><a id="__codelineno-58-180" name="__codelineno-58-180" href="#__codelineno-58-180"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-181"><a id="__codelineno-58-181" name="__codelineno-58-181" href="#__codelineno-58-181"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-182"><a id="__codelineno-58-182" name="__codelineno-58-182" href="#__codelineno-58-182"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-183"><a id="__codelineno-58-183" name="__codelineno-58-183" href="#__codelineno-58-183"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-184"><a id="__codelineno-58-184" name="__codelineno-58-184" href="#__codelineno-58-184"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-185"><a id="__codelineno-58-185" name="__codelineno-58-185" href="#__codelineno-58-185"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-186"><a id="__codelineno-58-186" name="__codelineno-58-186" href="#__codelineno-58-186"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-187"><a id="__codelineno-58-187" name="__codelineno-58-187" href="#__codelineno-58-187"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-188"><a id="__codelineno-58-188" name="__codelineno-58-188" href="#__codelineno-58-188"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-189"><a id="__codelineno-58-189" name="__codelineno-58-189" href="#__codelineno-58-189"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-190"><a id="__codelineno-58-190" name="__codelineno-58-190" href="#__codelineno-58-190"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-191"><a id="__codelineno-58-191" name="__codelineno-58-191" href="#__codelineno-58-191"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-192"><a id="__codelineno-58-192" name="__codelineno-58-192" href="#__codelineno-58-192"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-193"><a id="__codelineno-58-193" name="__codelineno-58-193" href="#__codelineno-58-193"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-194"><a id="__codelineno-58-194" name="__codelineno-58-194" href="#__codelineno-58-194"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-195"><a id="__codelineno-58-195" name="__codelineno-58-195" href="#__codelineno-58-195"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-196"><a id="__codelineno-58-196" name="__codelineno-58-196" href="#__codelineno-58-196"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-197"><a id="__codelineno-58-197" name="__codelineno-58-197" href="#__codelineno-58-197"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-198"><a id="__codelineno-58-198" name="__codelineno-58-198" href="#__codelineno-58-198"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-199"><a id="__codelineno-58-199" name="__codelineno-58-199" href="#__codelineno-58-199"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-200"><a id="__codelineno-58-200" name="__codelineno-58-200" href="#__codelineno-58-200"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-201"><a id="__codelineno-58-201" name="__codelineno-58-201" href="#__codelineno-58-201"></a><span class="w"> </span>Description<span class="w"> </span>Language:<span class="w"> </span>
</span><span id="__span-58-202"><a id="__codelineno-58-202" name="__codelineno-58-202" href="#__codelineno-58-202"></a><span class="w">                 </span>File:<span class="w"> </span>/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages
</span><span id="__span-58-203"><a id="__codelineno-58-203" name="__codelineno-58-203" href="#__codelineno-58-203"></a><span class="w">                  </span>MD5:<span class="w"> </span>
</span><span id="__span-58-204"><a id="__codelineno-58-204" name="__codelineno-58-204" href="#__codelineno-58-204"></a>
</span><span id="__span-58-205"><a id="__codelineno-58-205" name="__codelineno-58-205" href="#__codelineno-58-205"></a>
</span><span id="__span-58-206"><a id="__codelineno-58-206" name="__codelineno-58-206" href="#__codelineno-58-206"></a>Reverse<span class="w"> </span>Depends:<span class="w"> </span>
</span><span id="__span-58-207"><a id="__codelineno-58-207" name="__codelineno-58-207" href="#__codelineno-58-207"></a><span class="w">  </span>kubeadm:ppc64el,kubeadm
</span><span id="__span-58-208"><a id="__codelineno-58-208" name="__codelineno-58-208" href="#__codelineno-58-208"></a><span class="w">  </span>kubeadm:s390x,kubeadm
</span><span id="__span-58-209"><a id="__codelineno-58-209" name="__codelineno-58-209" href="#__codelineno-58-209"></a><span class="w">  </span>kubeadm:arm64,kubeadm
</span><span id="__span-58-210"><a id="__codelineno-58-210" name="__codelineno-58-210" href="#__codelineno-58-210"></a><span class="w">  </span>kubeadm:ppc64el,kubeadm
</span><span id="__span-58-211"><a id="__codelineno-58-211" name="__codelineno-58-211" href="#__codelineno-58-211"></a><span class="w">  </span>kubeadm:s390x,kubeadm
</span><span id="__span-58-212"><a id="__codelineno-58-212" name="__codelineno-58-212" href="#__codelineno-58-212"></a><span class="w">  </span>kubeadm:arm64,kubeadm
</span><span id="__span-58-213"><a id="__codelineno-58-213" name="__codelineno-58-213" href="#__codelineno-58-213"></a><span class="w">  </span>kubeadm:ppc64el,kubeadm
</span><span id="__span-58-214"><a id="__codelineno-58-214" name="__codelineno-58-214" href="#__codelineno-58-214"></a><span class="w">  </span>kubeadm:s390x,kubeadm
</span><span id="__span-58-215"><a id="__codelineno-58-215" name="__codelineno-58-215" href="#__codelineno-58-215"></a><span class="w">  </span>kubeadm:arm64,kubeadm
</span><span id="__span-58-216"><a id="__codelineno-58-216" name="__codelineno-58-216" href="#__codelineno-58-216"></a><span class="w">  </span>kubeadm:ppc64el,kubeadm
</span><span id="__span-58-217"><a id="__codelineno-58-217" name="__codelineno-58-217" href="#__codelineno-58-217"></a><span class="w">  </span>kubeadm:s390x,kubeadm
</span><span id="__span-58-218"><a id="__codelineno-58-218" name="__codelineno-58-218" href="#__codelineno-58-218"></a><span class="w">  </span>kubeadm:arm64,kubeadm
</span><span id="__span-58-219"><a id="__codelineno-58-219" name="__codelineno-58-219" href="#__codelineno-58-219"></a>Dependencies:<span class="w"> </span>
</span><span id="__span-58-220"><a id="__codelineno-58-220" name="__codelineno-58-220" href="#__codelineno-58-220"></a><span class="m">1</span>.32.3-1.1<span class="w"> </span>-<span class="w"> </span>cri-tools<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span>.30.0<span class="o">)</span><span class="w"> </span>kubeadm:ppc64el<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:arm64<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:s390x<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>
</span><span id="__span-58-221"><a id="__codelineno-58-221" name="__codelineno-58-221" href="#__codelineno-58-221"></a><span class="m">1</span>.32.2-1.1<span class="w"> </span>-<span class="w"> </span>cri-tools<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span>.30.0<span class="o">)</span><span class="w"> </span>kubeadm:ppc64el<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:arm64<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:s390x<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>
</span><span id="__span-58-222"><a id="__codelineno-58-222" name="__codelineno-58-222" href="#__codelineno-58-222"></a><span class="m">1</span>.32.1-1.1<span class="w"> </span>-<span class="w"> </span>cri-tools<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span>.30.0<span class="o">)</span><span class="w"> </span>kubeadm:ppc64el<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:arm64<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:s390x<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>
</span><span id="__span-58-223"><a id="__codelineno-58-223" name="__codelineno-58-223" href="#__codelineno-58-223"></a><span class="m">1</span>.32.0-1.1<span class="w"> </span>-<span class="w"> </span>cri-tools<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span>.30.0<span class="o">)</span><span class="w"> </span>kubeadm:ppc64el<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:arm64<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>kubeadm:s390x<span class="w"> </span><span class="o">(</span><span class="m">32</span><span class="w"> </span><span class="o">(</span>null<span class="o">))</span><span class="w"> </span>
</span><span id="__span-58-224"><a id="__codelineno-58-224" name="__codelineno-58-224" href="#__codelineno-58-224"></a>Provides:<span class="w"> </span>
</span><span id="__span-58-225"><a id="__codelineno-58-225" name="__codelineno-58-225" href="#__codelineno-58-225"></a><span class="m">1</span>.32.3-1.1<span class="w"> </span>-<span class="w"> </span>
</span><span id="__span-58-226"><a id="__codelineno-58-226" name="__codelineno-58-226" href="#__codelineno-58-226"></a><span class="m">1</span>.32.2-1.1<span class="w"> </span>-<span class="w"> </span>
</span><span id="__span-58-227"><a id="__codelineno-58-227" name="__codelineno-58-227" href="#__codelineno-58-227"></a><span class="m">1</span>.32.1-1.1<span class="w"> </span>-<span class="w"> </span>
</span><span id="__span-58-228"><a id="__codelineno-58-228" name="__codelineno-58-228" href="#__codelineno-58-228"></a><span class="m">1</span>.32.0-1.1<span class="w"> </span>-<span class="w"> </span>
</span><span id="__span-58-229"><a id="__codelineno-58-229" name="__codelineno-58-229" href="#__codelineno-58-229"></a>Reverse<span class="w"> </span>Provides:<span class="w"> </span>
</span></code></pre></div>
<p>查看可用软件列表</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>root@k8s-master01:~#<span class="w"> </span>apt-cache<span class="w"> </span>madison<span class="w"> </span>kubeadm
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">   </span>kubeadm<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span>.32.3-1.1<span class="w"> </span><span class="p">|</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">   </span>kubeadm<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span>.32.2-1.1<span class="w"> </span><span class="p">|</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">   </span>kubeadm<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span>.32.1-1.1<span class="w"> </span><span class="p">|</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">   </span>kubeadm<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span>.32.0-1.1<span class="w"> </span><span class="p">|</span><span class="w"> </span>https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb<span class="w">  </span>Packages
</span></code></pre></div>
<p>Way1：采用默认安装</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>kubelet<span class="w"> </span>kubeadm<span class="w"> </span>kubectl<span class="w"> </span>-y
</span></code></pre></div>
<p>Way2：安装指定版本(v1.32.3-1.1)</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="nv">kubelet</span><span class="o">=</span><span class="m">1</span>.32.3-1.1<span class="w"> </span><span class="nv">kubeadm</span><span class="o">=</span><span class="m">1</span>.32.3-1.1<span class="w"> </span><span class="nv">kubectl</span><span class="o">=</span><span class="m">1</span>.32.3-1.1
</span></code></pre></div>
<ul>
<li>如有报错：</li>
</ul>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>E:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>get<span class="w"> </span>lock<span class="w"> </span>/var/lib/dpkg/lock-frontend.<span class="w"> </span>It<span class="w"> </span>is<span class="w"> </span>held<span class="w"> </span>by<span class="w"> </span>process<span class="w"> </span><span class="m">5005</span><span class="w"> </span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="o">(</span>unattended-upgr<span class="o">)</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w"> </span>N:<span class="w"> </span>Be<span class="w"> </span>aware<span class="w"> </span>that<span class="w"> </span>removing<span class="w"> </span>the<span class="w"> </span>lock<span class="w"> </span>file<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>solution<span class="w"> </span>and<span class="w"> </span>may<span class="w"> </span><span class="k">break</span><span class="w"> </span>your<span class="w"> </span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>system.
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w"> </span>E:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>acquire<span class="w"> </span>the<span class="w"> </span>dpkg<span class="w"> </span>frontend<span class="w"> </span>lock<span class="w"> </span><span class="o">(</span>/var/lib/dpkg/lock-frontend<span class="o">)</span>,<span class="w"> </span>is<span class="w"> </span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>another<span class="w"> </span>process<span class="w"> </span>using<span class="w"> </span>it?
</span></code></pre></div>
可稍等等</p>
<p>锁定版本，防止后期自动更新</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-mark<span class="w"> </span>hold<span class="w"> </span>kubelet<span class="w"> </span>kubeadm<span class="w"> </span>kubectl
</span></code></pre></div>
<p>解锁版本，则可以执行更新</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>apt-mark<span class="w"> </span>unhold<span class="w"> </span>kubelet<span class="w"> </span>kubeadm<span class="w"> </span>kubectl
</span></code></pre></div>
<h3 id="322-kubelet">3.2.2 配置kubelet<a class="headerlink" href="#322-kubelet" title="Permanent link">&para;</a></h3>
<p>为了实现容器运行时使用的cgroupdriver与kubelet使用的cgroup的一致性，建议修改如下文件内容。</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>~#<span class="w"> </span>nano<span class="w"> </span>/etc/default/kubelet
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w"> </span><span class="nv">KUBELET_EXTRA_ARGS</span><span class="o">=</span><span class="s2">&quot;--cgroup-driver=systemd&quot;</span>
</span></code></pre></div>
<ul>
<li>设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>~#<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>kubelet
</span></code></pre></div>
<h2 id="33-k8s">3.3 K8S集群初始化<a class="headerlink" href="#33-k8s" title="Permanent link">&para;</a></h2>
<h3 id="331">3.3.1 查看版本<a class="headerlink" href="#331" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>version
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>kubeadm<span class="w"> </span>version:<span class="w"> </span><span class="p">&amp;</span>version.Info<span class="o">{</span>Major:<span class="s2">&quot;1&quot;</span>,<span class="w"> </span>Minor:<span class="s2">&quot;32&quot;</span>,<span class="w"> </span>GitVersion:<span class="s2">&quot;v1.32.3&quot;</span>,<span class="w"> </span>GitCommit:<span class="s2">&quot;32cc146f75aad04beaaa245a7157eb35063a9f99&quot;</span>,<span class="w"> </span>GitTreeState:<span class="s2">&quot;clean&quot;</span>,<span class="w"> </span>BuildDate:<span class="s2">&quot;2025-03-11T19:57:38Z&quot;</span>,<span class="w"> </span>GoVersion:<span class="s2">&quot;go1.23.6&quot;</span>,<span class="w"> </span>Compiler:<span class="s2">&quot;gc&quot;</span>,<span class="w"> </span>Platform:<span class="s2">&quot;linux/amd64&quot;</span><span class="o">}</span>
</span></code></pre></div>
<h3 id="332">3.3.2 生成部署配置文件<a class="headerlink" href="#332" title="Permanent link">&para;</a></h3>
<p>生成kubeadm部署默认配置文件</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>print<span class="w"> </span>init-defaults<span class="w"> </span>&gt;<span class="w"> </span>/home/acanx/kubeadm-config.yaml
</span></code></pre></div>
<h4 id="kubernetes">使用kubernetes社区版容器镜像仓库<a class="headerlink" href="#kubernetes" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>root@k8s-master01:~#<span class="w"> </span>nano<span class="w"> </span>/home/acanx/kubeadm-config.yaml
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>root@k8s-master01:~#<span class="w"> </span>cat<span class="w"> </span>kubeadm-config.yaml
</span></code></pre></div>
<p>kubeadm-config.yaml文件中 的配置</p>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeadm.k8s.io/v1beta3</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bootstrapTokens:- groups:- system:bootstrappers:kubeadm:default-node-token</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="w"> </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abcdef.0123456789abcdef</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="w"> </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24h0m0s</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">usages:- signing- authentication</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InitConfiguration</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="w"> </span><span class="nt">localAPIEndpoint</span><span class="p">:</span>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="w"> </span><span class="nt">advertiseAddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.10.140</span>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="w"> </span><span class="nt">bindPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6443</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a><span class="w"> </span><span class="nt">nodeRegistration</span><span class="p">:</span>
</span><span id="__span-70-11"><a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a><span class="w"> </span><span class="nt">criSocket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unix:///var/run/containerd/containerd.sock</span>
</span><span id="__span-70-12"><a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a><span class="w"> </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
</span><span id="__span-70-13"><a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8s-master01</span>
</span><span id="__span-70-14"><a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a><span class="w"> </span><span class="nt">taints</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null--</span>
</span><span id="__span-70-15"><a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a><span class="nt">apiServer</span><span class="p">:</span>
</span><span id="__span-70-16"><a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a><span class="w"> </span><span class="nt">timeoutForControlPlane</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4m0s</span>
</span><span id="__span-70-17"><a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeadm.k8s.io/v1beta3</span>
</span><span id="__span-70-18"><a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a><span class="w"> </span><span class="nt">certificatesDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki</span>
</span><span id="__span-70-19"><a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a><span class="w"> </span><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes</span>
</span><span id="__span-70-20"><a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a><span class="w"> </span><span class="nt">controllerManager</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-70-21"><a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a><span class="w"> </span><span class="nt">dns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-70-22"><a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a><span class="w"> </span><span class="nt">etcd</span><span class="p">:</span>
</span><span id="__span-70-23"><a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a><span class="w"> </span><span class="nt">local</span><span class="p">:</span>
</span><span id="__span-70-24"><a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a><span class="w"> </span><span class="nt">dataDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/etcd</span>
</span><span id="__span-70-25"><a id="__codelineno-70-25" name="__codelineno-70-25" href="#__codelineno-70-25"></a><span class="w"> </span><span class="nt">imageRepository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">registry.k8s.io</span>
</span><span id="__span-70-26"><a id="__codelineno-70-26" name="__codelineno-70-26" href="#__codelineno-70-26"></a><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterConfiguration</span>
</span><span id="__span-70-27"><a id="__codelineno-70-27" name="__codelineno-70-27" href="#__codelineno-70-27"></a><span class="w"> </span><span class="nt">kubernetesVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.30.0</span>
</span><span id="__span-70-28"><a id="__codelineno-70-28" name="__codelineno-70-28" href="#__codelineno-70-28"></a><span class="w"> </span><span class="nt">networking</span><span class="p">:</span>
</span><span id="__span-70-29"><a id="__codelineno-70-29" name="__codelineno-70-29" href="#__codelineno-70-29"></a><span class="w"> </span><span class="nt">dnsDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.local</span>
</span><span id="__span-70-30"><a id="__codelineno-70-30" name="__codelineno-70-30" href="#__codelineno-70-30"></a><span class="w"> </span><span class="nt">serviceSubnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.96.0.0/12</span>
</span><span id="__span-70-31"><a id="__codelineno-70-31" name="__codelineno-70-31" href="#__codelineno-70-31"></a><span class="w"> </span><span class="nt">podSubnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.244.0.0/16</span>
</span><span id="__span-70-32"><a id="__codelineno-70-32" name="__codelineno-70-32" href="#__codelineno-70-32"></a><span class="nt">scheduler</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-70-33"><a id="__codelineno-70-33" name="__codelineno-70-33" href="#__codelineno-70-33"></a><span class="l l-Scalar l-Scalar-Plain">--</span>
</span><span id="__span-70-34"><a id="__codelineno-70-34" name="__codelineno-70-34" href="#__codelineno-70-34"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KubeletConfiguration</span>
</span><span id="__span-70-35"><a id="__codelineno-70-35" name="__codelineno-70-35" href="#__codelineno-70-35"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubelet.config.k8s.io/v1beta1</span>
</span><span id="__span-70-36"><a id="__codelineno-70-36" name="__codelineno-70-36" href="#__codelineno-70-36"></a><span class="nt">cgroupDriver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemd</span>
</span></code></pre></div>
<h4 id="_3">使用阿里云容器镜像仓库<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>编辑kubeadm配置文件（使用阿里云容器镜像仓库）</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>root@k8s-master01:~#<span class="w"> </span>nano<span class="w"> </span>kubeadm-config.yaml
</span></code></pre></div>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeadm.k8s.io/v1beta4</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="nt">bootstrapTokens</span><span class="p">:</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">groups</span><span class="p">:</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">system:bootstrappers:kubeadm:default-node-token</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abcdef.0123456789abcdef</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="w">  </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24h0m0s</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="w">  </span><span class="nt">usages</span><span class="p">:</span>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">signing</span>
</span><span id="__span-72-9"><a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentication</span>
</span><span id="__span-72-10"><a id="__codelineno-72-10" name="__codelineno-72-10" href="#__codelineno-72-10"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InitConfiguration</span>
</span><span id="__span-72-11"><a id="__codelineno-72-11" name="__codelineno-72-11" href="#__codelineno-72-11"></a><span class="nt">localAPIEndpoint</span><span class="p">:</span>
</span><span id="__span-72-12"><a id="__codelineno-72-12" name="__codelineno-72-12" href="#__codelineno-72-12"></a><span class="w">  </span><span class="nt">advertiseAddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.11.161</span><span class="w">   </span><span class="c1"># 设置节点IP地址</span>
</span><span id="__span-72-13"><a id="__codelineno-72-13" name="__codelineno-72-13" href="#__codelineno-72-13"></a><span class="w">  </span><span class="nt">bindPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6443</span>
</span><span id="__span-72-14"><a id="__codelineno-72-14" name="__codelineno-72-14" href="#__codelineno-72-14"></a><span class="nt">nodeRegistration</span><span class="p">:</span>
</span><span id="__span-72-15"><a id="__codelineno-72-15" name="__codelineno-72-15" href="#__codelineno-72-15"></a><span class="w">  </span><span class="nt">criSocket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unix:///var/run/containerd/containerd.sock</span>
</span><span id="__span-72-16"><a id="__codelineno-72-16" name="__codelineno-72-16" href="#__codelineno-72-16"></a><span class="w">  </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
</span><span id="__span-72-17"><a id="__codelineno-72-17" name="__codelineno-72-17" href="#__codelineno-72-17"></a><span class="w">  </span><span class="nt">imagePullSerial</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-72-18"><a id="__codelineno-72-18" name="__codelineno-72-18" href="#__codelineno-72-18"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8s-master01</span><span class="w">      </span><span class="c1"># 修改节点名称</span>
</span><span id="__span-72-19"><a id="__codelineno-72-19" name="__codelineno-72-19" href="#__codelineno-72-19"></a><span class="w">  </span><span class="nt">taints</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
</span><span id="__span-72-20"><a id="__codelineno-72-20" name="__codelineno-72-20" href="#__codelineno-72-20"></a><span class="nt">timeouts</span><span class="p">:</span>
</span><span id="__span-72-21"><a id="__codelineno-72-21" name="__codelineno-72-21" href="#__codelineno-72-21"></a><span class="w">  </span><span class="nt">controlPlaneComponentHealthCheck</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4m0s</span>
</span><span id="__span-72-22"><a id="__codelineno-72-22" name="__codelineno-72-22" href="#__codelineno-72-22"></a><span class="w">  </span><span class="nt">discovery</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m0s</span>
</span><span id="__span-72-23"><a id="__codelineno-72-23" name="__codelineno-72-23" href="#__codelineno-72-23"></a><span class="w">  </span><span class="nt">etcdAPICall</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2m0s</span>
</span><span id="__span-72-24"><a id="__codelineno-72-24" name="__codelineno-72-24" href="#__codelineno-72-24"></a><span class="w">  </span><span class="nt">kubeletHealthCheck</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4m0s</span>
</span><span id="__span-72-25"><a id="__codelineno-72-25" name="__codelineno-72-25" href="#__codelineno-72-25"></a><span class="w">  </span><span class="nt">kubernetesAPICall</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1m0s</span>
</span><span id="__span-72-26"><a id="__codelineno-72-26" name="__codelineno-72-26" href="#__codelineno-72-26"></a><span class="w">  </span><span class="nt">tlsBootstrap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m0s</span>
</span><span id="__span-72-27"><a id="__codelineno-72-27" name="__codelineno-72-27" href="#__codelineno-72-27"></a><span class="w">  </span><span class="nt">upgradeManifests</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5m0s</span>
</span><span id="__span-72-28"><a id="__codelineno-72-28" name="__codelineno-72-28" href="#__codelineno-72-28"></a><span class="nn">---</span>
</span><span id="__span-72-29"><a id="__codelineno-72-29" name="__codelineno-72-29" href="#__codelineno-72-29"></a><span class="nt">apiServer</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-72-30"><a id="__codelineno-72-30" name="__codelineno-72-30" href="#__codelineno-72-30"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubeadm.k8s.io/v1beta4</span>
</span><span id="__span-72-31"><a id="__codelineno-72-31" name="__codelineno-72-31" href="#__codelineno-72-31"></a><span class="nt">caCertificateValidityPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">87600h0m0s</span>
</span><span id="__span-72-32"><a id="__codelineno-72-32" name="__codelineno-72-32" href="#__codelineno-72-32"></a><span class="nt">certificateValidityPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8760h0m0s</span>
</span><span id="__span-72-33"><a id="__codelineno-72-33" name="__codelineno-72-33" href="#__codelineno-72-33"></a><span class="nt">certificatesDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/kubernetes/pki</span>
</span><span id="__span-72-34"><a id="__codelineno-72-34" name="__codelineno-72-34" href="#__codelineno-72-34"></a><span class="nt">clusterName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes</span>
</span><span id="__span-72-35"><a id="__codelineno-72-35" name="__codelineno-72-35" href="#__codelineno-72-35"></a><span class="nt">controllerManager</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-72-36"><a id="__codelineno-72-36" name="__codelineno-72-36" href="#__codelineno-72-36"></a><span class="nt">dns</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-72-37"><a id="__codelineno-72-37" name="__codelineno-72-37" href="#__codelineno-72-37"></a><span class="nt">encryptionAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSA-2048</span>
</span><span id="__span-72-38"><a id="__codelineno-72-38" name="__codelineno-72-38" href="#__codelineno-72-38"></a><span class="nt">etcd</span><span class="p">:</span>
</span><span id="__span-72-39"><a id="__codelineno-72-39" name="__codelineno-72-39" href="#__codelineno-72-39"></a><span class="w">  </span><span class="nt">local</span><span class="p">:</span>
</span><span id="__span-72-40"><a id="__codelineno-72-40" name="__codelineno-72-40" href="#__codelineno-72-40"></a><span class="w">    </span><span class="nt">dataDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/etcd</span>
</span><span id="__span-72-41"><a id="__codelineno-72-41" name="__codelineno-72-41" href="#__codelineno-72-41"></a><span class="nt">imageRepository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">registry.aliyuncs.com/google_containers</span><span class="w">   </span><span class="c1"># 修改镜像地址</span>
</span><span id="__span-72-42"><a id="__codelineno-72-42" name="__codelineno-72-42" href="#__codelineno-72-42"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterConfiguration</span>
</span><span id="__span-72-43"><a id="__codelineno-72-43" name="__codelineno-72-43" href="#__codelineno-72-43"></a><span class="nt">kubernetesVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.32.0</span>
</span><span id="__span-72-44"><a id="__codelineno-72-44" name="__codelineno-72-44" href="#__codelineno-72-44"></a><span class="nt">networking</span><span class="p">:</span>
</span><span id="__span-72-45"><a id="__codelineno-72-45" name="__codelineno-72-45" href="#__codelineno-72-45"></a><span class="w">  </span><span class="nt">dnsDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.local</span>
</span><span id="__span-72-46"><a id="__codelineno-72-46" name="__codelineno-72-46" href="#__codelineno-72-46"></a><span class="w">  </span><span class="nt">serviceSubnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.96.0.0/12</span>
</span><span id="__span-72-47"><a id="__codelineno-72-47" name="__codelineno-72-47" href="#__codelineno-72-47"></a><span class="w">  </span><span class="nt">podSubnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.244.0.0/16</span><span class="w">    </span><span class="c1"># 可按需修改，原则：不与已有的节点网段重合</span>
</span><span id="__span-72-48"><a id="__codelineno-72-48" name="__codelineno-72-48" href="#__codelineno-72-48"></a><span class="nt">proxy</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-72-49"><a id="__codelineno-72-49" name="__codelineno-72-49" href="#__codelineno-72-49"></a><span class="nt">scheduler</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span><span id="__span-72-50"><a id="__codelineno-72-50" name="__codelineno-72-50" href="#__codelineno-72-50"></a><span class="nn">---</span>
</span><span id="__span-72-51"><a id="__codelineno-72-51" name="__codelineno-72-51" href="#__codelineno-72-51"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KubeletConfiguration</span><span class="w">                   </span><span class="c1"># 最后四行是补加的</span>
</span><span id="__span-72-52"><a id="__codelineno-72-52" name="__codelineno-72-52" href="#__codelineno-72-52"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubelet.config.k8s.io/v1beta1</span>
</span><span id="__span-72-53"><a id="__codelineno-72-53" name="__codelineno-72-53" href="#__codelineno-72-53"></a><span class="nt">cgroupDriver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemd</span>
</span></code></pre></div>
<h3 id="333">3.3.3 查看并下载镜像<a class="headerlink" href="#333" title="Permanent link">&para;</a></h3>
<h4 id="kubernetes_1">查看及使用Kubernetes社区镜像仓库下载镜像<a class="headerlink" href="#kubernetes_1" title="Permanent link">&para;</a></h4>
<p>查看镜像列表（K8S社区镜像仓库）</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>list<span class="w">   </span><span class="c1"># 查看kubernetes镜像默认版本</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>list<span class="w"> </span>--kubernetes-version<span class="o">=</span>v1.32.3<span class="w">    </span><span class="c1"># 指定kubernetes镜像版本</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>registry.k8s.io/kube-apiserver:v1.32.3
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a>registry.k8s.io/kube-controller-manager:v1.32.3
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7" href="#__codelineno-73-7"></a>registry.k8s.io/kube-scheduler:v1.32.3
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8" href="#__codelineno-73-8"></a>registry.k8s.io/kube-proxy:v1.32.3
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9" href="#__codelineno-73-9"></a>registry.k8s.io/coredns/coredns:v1.11.3
</span><span id="__span-73-10"><a id="__codelineno-73-10" name="__codelineno-73-10" href="#__codelineno-73-10"></a>registry.k8s.io/pause:3.10
</span><span id="__span-73-11"><a id="__codelineno-73-11" name="__codelineno-73-11" href="#__codelineno-73-11"></a>registry.k8s.io/etcd:3.5.16-0
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="w"> </span>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>pull<span class="w">           </span><span class="c1"># 默认从K8S社区镜像仓库下载镜像</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/kube-apiserver:v1.32.3
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/kube-controller-manager:v1.32.3
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/kube-scheduler:v1.32.3
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/kube-proxy:v1.32.3
</span><span id="__span-74-7"><a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/coredns/coredns:v1.11.3
</span><span id="__span-74-8"><a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/pause:3.10
</span><span id="__span-74-9"><a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a><span class="w"> </span><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.k8s.io/etcd:3.5.16-0
</span></code></pre></div>
<h4 id="_4">查看及使用阿里云容器镜像仓库下载镜像<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>查看镜像列表（阿里云容器镜像仓库）</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>list<span class="w"> </span>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a>registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a>registry.aliyuncs.com/google_containers/coredns:v1.11.3
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>registry.aliyuncs.com/google_containers/pause:3.10
</span><span id="__span-75-9"><a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a>registry.aliyuncs.com/google_containers/etcd:3.5.16-0
</span></code></pre></div>
<p>使用阿里云容器镜像仓库下载</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>config<span class="w"> </span>images<span class="w"> </span>pull<span class="w"> </span>--image-repository<span class="w"> </span>registry.aliyuncs.com/google_containers<span class="w"> </span>--cri-socket<span class="o">=</span>unix:///run/containerd/containerd.sock
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3
</span><span id="__span-76-6"><a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3
</span><span id="__span-76-7"><a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/coredns:v1.11.3
</span><span id="__span-76-8"><a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/pause:3.10
</span><span id="__span-76-9"><a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="o">[</span>config/images<span class="o">]</span><span class="w"> </span>Pulled<span class="w"> </span>registry.aliyuncs.com/google_containers/etcd:3.5.16-0
</span></code></pre></div>
<h4 id="_5">查看下载的镜像<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<p>查看本地下载的containerd镜像</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>root@k8s-master01:~#<span class="w"> </span>crictl<span class="w"> </span>images
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>WARN<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Config<span class="w"> </span><span class="s2">&quot;/etc/crictl.yaml&quot;</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist,<span class="w"> </span>trying<span class="w"> </span>next:<span class="w"> </span><span class="s2">&quot;/usr/bin/crictl.yaml&quot;</span><span class="w"> </span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>WARN<span class="o">[</span><span class="m">0000</span><span class="o">]</span><span class="w"> </span>Image<span class="w"> </span>connect<span class="w"> </span>using<span class="w"> </span>default<span class="w"> </span>endpoints:<span class="w"> </span><span class="o">[</span>unix:///run/containerd/containerd.sock<span class="w"> </span>unix:///run/crio/crio.sock<span class="w"> </span>unix:///var/run/cri-dockerd.sock<span class="o">]</span>.<span class="w"> </span>As<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span>settings<span class="w"> </span>are<span class="w"> </span>now<span class="w"> </span>deprecated,<span class="w"> </span>you<span class="w"> </span>should<span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>endpoint<span class="w"> </span>instead.<span class="w"> </span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a>IMAGE<span class="w">                                                             </span>TAG<span class="w">                 </span>IMAGE<span class="w"> </span>ID<span class="w">            </span>SIZE
</span><span id="__span-77-6"><a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a>registry.aliyuncs.com/google_containers/coredns<span class="w">                   </span>v1.11.3<span class="w">             </span>c69fa2e9cbf5f<span class="w">       </span><span class="m">18</span>.6MB
</span><span id="__span-77-7"><a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>registry.aliyuncs.com/google_containers/etcd<span class="w">                      </span><span class="m">3</span>.5.16-0<span class="w">            </span>a9e7e6b294baf<span class="w">       </span><span class="m">57</span>.7MB
</span><span id="__span-77-8"><a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>registry.aliyuncs.com/google_containers/kube-apiserver<span class="w">            </span>v1.32.0<span class="w">             </span>c2e17b8d0f4a3<span class="w">       </span><span class="m">28</span>.7MB
</span><span id="__span-77-9"><a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a>registry.aliyuncs.com/google_containers/kube-apiserver<span class="w">            </span>v1.32.3<span class="w">             </span>f8bdc4cfa0651<span class="w">       </span><span class="m">28</span>.7MB
</span><span id="__span-77-10"><a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a>registry.aliyuncs.com/google_containers/kube-controller-manager<span class="w">   </span>v1.32.0<span class="w">             </span>8cab3d2a8bd0f<span class="w">       </span><span class="m">26</span>.3MB
</span><span id="__span-77-11"><a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a>registry.aliyuncs.com/google_containers/kube-controller-manager<span class="w">   </span>v1.32.3<span class="w">             </span>085818208a521<span class="w">       </span><span class="m">26</span>.3MB
</span><span id="__span-77-12"><a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>registry.aliyuncs.com/google_containers/kube-proxy<span class="w">                </span>v1.32.0<span class="w">             </span>040f9f8aac8cd<span class="w">       </span><span class="m">30</span>.9MB
</span><span id="__span-77-13"><a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a>registry.aliyuncs.com/google_containers/kube-proxy<span class="w">                </span>v1.32.3<span class="w">             </span>a1ae78fd2f9d8<span class="w">       </span><span class="m">30</span>.9MB
</span><span id="__span-77-14"><a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a>registry.aliyuncs.com/google_containers/kube-scheduler<span class="w">            </span>v1.32.0<span class="w">             </span>a389e107f4ff1<span class="w">       </span><span class="m">20</span>.7MB
</span><span id="__span-77-15"><a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a>registry.aliyuncs.com/google_containers/kube-scheduler<span class="w">            </span>v1.32.3<span class="w">             </span>b4260bf5078ab<span class="w">       </span><span class="m">20</span>.7MB
</span><span id="__span-77-16"><a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a>registry.aliyuncs.com/google_containers/pause<span class="w">                     </span><span class="m">3</span>.10<span class="w">                </span>873ed75102791<span class="w">       </span>320kB
</span></code></pre></div>
<h3 id="334-k8s">3.3.4 使用部署配置文件初始化K8S集群<a class="headerlink" href="#334-k8s" title="Permanent link">&para;</a></h3>
<p>使用命令初始化Kubeadm（只在Master节点操作）</p>
<p><div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>root@k8s-master01:~#<span class="w"> </span>kubeadm<span class="w"> </span>init<span class="w"> </span>--config<span class="w"> </span>/home/acanx/kubeadm-config.yaml<span class="w">  </span>--upload-certs<span class="w"> </span>--v<span class="o">=</span><span class="m">9</span><span class="w">  </span>--cri-socket<span class="o">=</span>unix:///run/containerd/containerd.sock
</span></code></pre></div>
输出内容如下：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.623621<span class="w">    </span><span class="m">4886</span><span class="w"> </span>initconfiguration.go:261<span class="o">]</span><span class="w"> </span>loading<span class="w"> </span>configuration<span class="w"> </span>from<span class="w"> </span><span class="s2">&quot;/home/acanx/kubeadm-config.yaml&quot;</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="o">[</span>init<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>Kubernetes<span class="w"> </span>version:<span class="w"> </span>v1.32.0
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>Running<span class="w"> </span>pre-flight<span class="w"> </span>checks
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.633576<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:561<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>Kubernetes<span class="w"> </span>and<span class="w"> </span>kubeadm<span class="w"> </span>version
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.633610<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:166<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>firewall<span class="w"> </span>is<span class="w"> </span>enabled<span class="w"> </span>and<span class="w"> </span>active
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.651826<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">6443</span>
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652309<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">10259</span>
</span><span id="__span-79-8"><a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652373<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">10257</span>
</span><span id="__span-79-9"><a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652434<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:278<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span>/etc/kubernetes/manifests/kube-apiserver.yaml
</span><span id="__span-79-10"><a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652491<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:278<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span>/etc/kubernetes/manifests/kube-controller-manager.yaml
</span><span id="__span-79-11"><a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652520<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:278<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span>/etc/kubernetes/manifests/kube-scheduler.yaml
</span><span id="__span-79-12"><a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652560<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:278<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span>/etc/kubernetes/manifests/etcd.yaml
</span><span id="__span-79-13"><a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652582<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:428<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>connectivity<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>via<span class="w"> </span>proxy<span class="w"> </span>or<span class="w"> </span>direct
</span><span id="__span-79-14"><a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652631<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:467<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>http<span class="w"> </span>connectivity<span class="w"> </span>to<span class="w"> </span>first<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>CIDR
</span><span id="__span-79-15"><a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652672<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:467<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>http<span class="w"> </span>connectivity<span class="w"> </span>to<span class="w"> </span>first<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>CIDR
</span><span id="__span-79-16"><a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.652699<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:102<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>container<span class="w"> </span>runtime
</span><span id="__span-79-17"><a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.653795<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:637<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>whether<span class="w"> </span>swap<span class="w"> </span>is<span class="w"> </span>enabled<span class="w"> </span>or<span class="w"> </span>not
</span><span id="__span-79-18"><a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.653855<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>ip
</span><span id="__span-79-19"><a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.653947<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>iptables
</span><span id="__span-79-20"><a id="__codelineno-79-20" name="__codelineno-79-20" href="#__codelineno-79-20"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654055<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>mount
</span><span id="__span-79-21"><a id="__codelineno-79-21" name="__codelineno-79-21" href="#__codelineno-79-21"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654080<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>nsenter
</span><span id="__span-79-22"><a id="__codelineno-79-22" name="__codelineno-79-22" href="#__codelineno-79-22"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654117<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>ethtool
</span><span id="__span-79-23"><a id="__codelineno-79-23" name="__codelineno-79-23" href="#__codelineno-79-23"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654145<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>tc
</span><span id="__span-79-24"><a id="__codelineno-79-24" name="__codelineno-79-24" href="#__codelineno-79-24"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654182<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:368<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>presence<span class="w"> </span>of<span class="w"> </span>executable<span class="w"> </span>touch
</span><span id="__span-79-25"><a id="__codelineno-79-25" name="__codelineno-79-25" href="#__codelineno-79-25"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.654210<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:514<span class="o">]</span><span class="w"> </span>running<span class="w"> </span>all<span class="w"> </span>checks
</span><span id="__span-79-26"><a id="__codelineno-79-26" name="__codelineno-79-26" href="#__codelineno-79-26"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.680418<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:399<span class="o">]</span><span class="w"> </span>checking<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>given<span class="w"> </span>node<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span>valid<span class="w"> </span>and<span class="w"> </span>reachable<span class="w"> </span>using<span class="w"> </span>net.LookupHost
</span><span id="__span-79-27"><a id="__codelineno-79-27" name="__codelineno-79-27" href="#__codelineno-79-27"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.680635<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:603<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>kubelet<span class="w"> </span>version
</span><span id="__span-79-28"><a id="__codelineno-79-28" name="__codelineno-79-28" href="#__codelineno-79-28"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.753081<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:128<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;kubelet&quot;</span><span class="w"> </span>service<span class="w"> </span>is<span class="w"> </span>enabled<span class="w"> </span>and<span class="w"> </span>active
</span><span id="__span-79-29"><a id="__codelineno-79-29" name="__codelineno-79-29" href="#__codelineno-79-29"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.774195<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">10250</span>
</span><span id="__span-79-30"><a id="__codelineno-79-30" name="__codelineno-79-30" href="#__codelineno-79-30"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.774355<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:327<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>contents<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span>/proc/sys/net/ipv4/ip_forward
</span><span id="__span-79-31"><a id="__codelineno-79-31" name="__codelineno-79-31" href="#__codelineno-79-31"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.774477<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">2379</span>
</span><span id="__span-79-32"><a id="__codelineno-79-32" name="__codelineno-79-32" href="#__codelineno-79-32"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.774568<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:201<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>availability<span class="w"> </span>of<span class="w"> </span>port<span class="w"> </span><span class="m">2380</span>
</span><span id="__span-79-33"><a id="__codelineno-79-33" name="__codelineno-79-33" href="#__codelineno-79-33"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.774631<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:241<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>and<span class="w"> </span>emptiness<span class="w"> </span>of<span class="w"> </span>directory<span class="w"> </span>/var/lib/etcd
</span><span id="__span-79-34"><a id="__codelineno-79-34" name="__codelineno-79-34" href="#__codelineno-79-34"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>Pulling<span class="w"> </span>images<span class="w"> </span>required<span class="w"> </span><span class="k">for</span><span class="w"> </span>setting<span class="w"> </span>up<span class="w"> </span>a<span class="w"> </span>Kubernetes<span class="w"> </span>cluster
</span><span id="__span-79-35"><a id="__codelineno-79-35" name="__codelineno-79-35" href="#__codelineno-79-35"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>This<span class="w"> </span>might<span class="w"> </span>take<span class="w"> </span>a<span class="w"> </span>minute<span class="w"> </span>or<span class="w"> </span>two,<span class="w"> </span>depending<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>speed<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>internet<span class="w"> </span>connection
</span><span id="__span-79-36"><a id="__codelineno-79-36" name="__codelineno-79-36" href="#__codelineno-79-36"></a><span class="o">[</span>preflight<span class="o">]</span><span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span>also<span class="w"> </span>perform<span class="w"> </span>this<span class="w"> </span>action<span class="w"> </span>beforehand<span class="w"> </span>using<span class="w"> </span><span class="s1">&#39;kubeadm config images pull&#39;</span>
</span><span id="__span-79-37"><a id="__codelineno-79-37" name="__codelineno-79-37" href="#__codelineno-79-37"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.777659<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:832<span class="o">]</span><span class="w"> </span>using<span class="w"> </span>image<span class="w"> </span>pull<span class="w"> </span>policy:<span class="w"> </span>IfNotPresent
</span><span id="__span-79-38"><a id="__codelineno-79-38" name="__codelineno-79-38" href="#__codelineno-79-38"></a>I0322<span class="w"> </span><span class="m">20</span>:07:35.779807<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:868<span class="o">]</span><span class="w"> </span>pulling:<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.0
</span><span id="__span-79-39"><a id="__codelineno-79-39" name="__codelineno-79-39" href="#__codelineno-79-39"></a>I0322<span class="w"> </span><span class="m">20</span>:08:11.358938<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:868<span class="o">]</span><span class="w"> </span>pulling:<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.0
</span><span id="__span-79-40"><a id="__codelineno-79-40" name="__codelineno-79-40" href="#__codelineno-79-40"></a>I0322<span class="w"> </span><span class="m">20</span>:08:38.140994<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:868<span class="o">]</span><span class="w"> </span>pulling:<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.0
</span><span id="__span-79-41"><a id="__codelineno-79-41" name="__codelineno-79-41" href="#__codelineno-79-41"></a>I0322<span class="w"> </span><span class="m">20</span>:09:00.270475<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:868<span class="o">]</span><span class="w"> </span>pulling:<span class="w"> </span>registry.aliyuncs.com/google_containers/kube-proxy:v1.32.0
</span><span id="__span-79-42"><a id="__codelineno-79-42" name="__codelineno-79-42" href="#__codelineno-79-42"></a>I0322<span class="w"> </span><span class="m">20</span>:09:26.947685<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:863<span class="o">]</span><span class="w"> </span>image<span class="w"> </span>exists:<span class="w"> </span>registry.aliyuncs.com/google_containers/coredns:v1.11.3
</span><span id="__span-79-43"><a id="__codelineno-79-43" name="__codelineno-79-43" href="#__codelineno-79-43"></a>I0322<span class="w"> </span><span class="m">20</span>:09:26.948207<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:863<span class="o">]</span><span class="w"> </span>image<span class="w"> </span>exists:<span class="w"> </span>registry.aliyuncs.com/google_containers/pause:3.10
</span><span id="__span-79-44"><a id="__codelineno-79-44" name="__codelineno-79-44" href="#__codelineno-79-44"></a>I0322<span class="w"> </span><span class="m">20</span>:09:26.948594<span class="w">    </span><span class="m">4886</span><span class="w"> </span>checks.go:863<span class="o">]</span><span class="w"> </span>image<span class="w"> </span>exists:<span class="w"> </span>registry.aliyuncs.com/google_containers/etcd:3.5.16-0
</span><span id="__span-79-45"><a id="__codelineno-79-45" name="__codelineno-79-45" href="#__codelineno-79-45"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>certificateDir<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/pki&quot;</span>
</span><span id="__span-79-46"><a id="__codelineno-79-46" name="__codelineno-79-46" href="#__codelineno-79-46"></a>I0322<span class="w"> </span><span class="m">20</span>:09:26.948692<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:112<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>certificate<span class="w"> </span>authority<span class="w"> </span><span class="k">for</span><span class="w"> </span>ca
</span><span id="__span-79-47"><a id="__codelineno-79-47" name="__codelineno-79-47" href="#__codelineno-79-47"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-48"><a id="__codelineno-79-48" name="__codelineno-79-48" href="#__codelineno-79-48"></a>I0322<span class="w"> </span><span class="m">20</span>:09:27.066597<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:473<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>certificate<span class="w"> </span>period<span class="w"> </span><span class="k">for</span><span class="w"> </span>ca<span class="w"> </span>certificate
</span><span id="__span-79-49"><a id="__codelineno-79-49" name="__codelineno-79-49" href="#__codelineno-79-49"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-50"><a id="__codelineno-79-50" name="__codelineno-79-50" href="#__codelineno-79-50"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>apiserver<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>k8s-master01<span class="w"> </span>kubernetes<span class="w"> </span>kubernetes.default<span class="w"> </span>kubernetes.default.svc<span class="w"> </span>kubernetes.default.svc.cluster.local<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">10</span>.96.0.1<span class="w"> </span><span class="m">192</span>.168.11.161<span class="o">]</span>
</span><span id="__span-79-51"><a id="__codelineno-79-51" name="__codelineno-79-51" href="#__codelineno-79-51"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver-kubelet-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-52"><a id="__codelineno-79-52" name="__codelineno-79-52" href="#__codelineno-79-52"></a>I0322<span class="w"> </span><span class="m">20</span>:09:27.313725<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:112<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>certificate<span class="w"> </span>authority<span class="w"> </span><span class="k">for</span><span class="w"> </span>front-proxy-ca
</span><span id="__span-79-53"><a id="__codelineno-79-53" name="__codelineno-79-53" href="#__codelineno-79-53"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;front-proxy-ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-54"><a id="__codelineno-79-54" name="__codelineno-79-54" href="#__codelineno-79-54"></a>I0322<span class="w"> </span><span class="m">20</span>:09:27.439421<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:473<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>certificate<span class="w"> </span>period<span class="w"> </span><span class="k">for</span><span class="w"> </span>front-proxy-ca<span class="w"> </span>certificate
</span><span id="__span-79-55"><a id="__codelineno-79-55" name="__codelineno-79-55" href="#__codelineno-79-55"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;front-proxy-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-56"><a id="__codelineno-79-56" name="__codelineno-79-56" href="#__codelineno-79-56"></a>I0322<span class="w"> </span><span class="m">20</span>:09:27.532545<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:112<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>certificate<span class="w"> </span>authority<span class="w"> </span><span class="k">for</span><span class="w"> </span>etcd-ca
</span><span id="__span-79-57"><a id="__codelineno-79-57" name="__codelineno-79-57" href="#__codelineno-79-57"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/ca&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-58"><a id="__codelineno-79-58" name="__codelineno-79-58" href="#__codelineno-79-58"></a>I0322<span class="w"> </span><span class="m">20</span>:09:27.631261<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:473<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>certificate<span class="w"> </span>period<span class="w"> </span><span class="k">for</span><span class="w"> </span>etcd/ca<span class="w"> </span>certificate
</span><span id="__span-79-59"><a id="__codelineno-79-59" name="__codelineno-79-59" href="#__codelineno-79-59"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/server&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-60"><a id="__codelineno-79-60" name="__codelineno-79-60" href="#__codelineno-79-60"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>etcd/server<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>k8s-master01<span class="w"> </span>localhost<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">192</span>.168.11.161<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>::1<span class="o">]</span>
</span><span id="__span-79-61"><a id="__codelineno-79-61" name="__codelineno-79-61" href="#__codelineno-79-61"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/peer&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-62"><a id="__codelineno-79-62" name="__codelineno-79-62" href="#__codelineno-79-62"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>etcd/peer<span class="w"> </span>serving<span class="w"> </span>cert<span class="w"> </span>is<span class="w"> </span>signed<span class="w"> </span><span class="k">for</span><span class="w"> </span>DNS<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>k8s-master01<span class="w"> </span>localhost<span class="o">]</span><span class="w"> </span>and<span class="w"> </span>IPs<span class="w"> </span><span class="o">[</span><span class="m">192</span>.168.11.161<span class="w"> </span><span class="m">127</span>.0.0.1<span class="w"> </span>::1<span class="o">]</span>
</span><span id="__span-79-63"><a id="__codelineno-79-63" name="__codelineno-79-63" href="#__codelineno-79-63"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;etcd/healthcheck-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-64"><a id="__codelineno-79-64" name="__codelineno-79-64" href="#__codelineno-79-64"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;apiserver-etcd-client&quot;</span><span class="w"> </span>certificate<span class="w"> </span>and<span class="w"> </span>key
</span><span id="__span-79-65"><a id="__codelineno-79-65" name="__codelineno-79-65" href="#__codelineno-79-65"></a>I0322<span class="w"> </span><span class="m">20</span>:09:28.312889<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:78<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>new<span class="w"> </span>public/private<span class="w"> </span>key<span class="w"> </span>files<span class="w"> </span><span class="k">for</span><span class="w"> </span>signing<span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span>users
</span><span id="__span-79-66"><a id="__codelineno-79-66" name="__codelineno-79-66" href="#__codelineno-79-66"></a><span class="o">[</span>certs<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span><span class="s2">&quot;sa&quot;</span><span class="w"> </span>key<span class="w"> </span>and<span class="w"> </span>public<span class="w"> </span>key
</span><span id="__span-79-67"><a id="__codelineno-79-67" name="__codelineno-79-67" href="#__codelineno-79-67"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>kubeconfig<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes&quot;</span>
</span><span id="__span-79-68"><a id="__codelineno-79-68" name="__codelineno-79-68" href="#__codelineno-79-68"></a>I0322<span class="w"> </span><span class="m">20</span>:09:28.495281<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubeconfig.go:111<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>kubeconfig<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>admin.conf
</span><span id="__span-79-69"><a id="__codelineno-79-69" name="__codelineno-79-69" href="#__codelineno-79-69"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;admin.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-79-70"><a id="__codelineno-79-70" name="__codelineno-79-70" href="#__codelineno-79-70"></a>I0322<span class="w"> </span><span class="m">20</span>:09:28.848054<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubeconfig.go:111<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>kubeconfig<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>super-admin.conf
</span><span id="__span-79-71"><a id="__codelineno-79-71" name="__codelineno-79-71" href="#__codelineno-79-71"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;super-admin.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-79-72"><a id="__codelineno-79-72" name="__codelineno-79-72" href="#__codelineno-79-72"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.129094<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubeconfig.go:111<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>kubeconfig<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>kubelet.conf
</span><span id="__span-79-73"><a id="__codelineno-79-73" name="__codelineno-79-73" href="#__codelineno-79-73"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;kubelet.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-79-74"><a id="__codelineno-79-74" name="__codelineno-79-74" href="#__codelineno-79-74"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.386206<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubeconfig.go:111<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>kubeconfig<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>controller-manager.conf
</span><span id="__span-79-75"><a id="__codelineno-79-75" name="__codelineno-79-75" href="#__codelineno-79-75"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;controller-manager.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-79-76"><a id="__codelineno-79-76" name="__codelineno-79-76" href="#__codelineno-79-76"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.483874<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubeconfig.go:111<span class="o">]</span><span class="w"> </span>creating<span class="w"> </span>kubeconfig<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>scheduler.conf
</span><span id="__span-79-77"><a id="__codelineno-79-77" name="__codelineno-79-77" href="#__codelineno-79-77"></a><span class="o">[</span>kubeconfig<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span><span class="s2">&quot;scheduler.conf&quot;</span><span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-79-78"><a id="__codelineno-79-78" name="__codelineno-79-78" href="#__codelineno-79-78"></a><span class="o">[</span>etcd<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>etcd<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
</span><span id="__span-79-79"><a id="__codelineno-79-79" name="__codelineno-79-79" href="#__codelineno-79-79"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.607843<span class="w">    </span><span class="m">4886</span><span class="w"> </span>local.go:66<span class="o">]</span><span class="w"> </span><span class="o">[</span>etcd<span class="o">]</span><span class="w"> </span>wrote<span class="w"> </span>Static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="nb">local</span><span class="w"> </span>etcd<span class="w"> </span>member<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests/etcd.yaml&quot;</span>
</span><span id="__span-79-80"><a id="__codelineno-79-80" name="__codelineno-79-80" href="#__codelineno-79-80"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Using<span class="w"> </span>manifest<span class="w"> </span>folder<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
</span><span id="__span-79-81"><a id="__codelineno-79-81" name="__codelineno-79-81" href="#__codelineno-79-81"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-82"><a id="__codelineno-79-82" name="__codelineno-79-82" href="#__codelineno-79-82"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.607888<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:104<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>getting<span class="w"> </span>StaticPodSpecs
</span><span id="__span-79-83"><a id="__codelineno-79-83" name="__codelineno-79-83" href="#__codelineno-79-83"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608085<span class="w">    </span><span class="m">4886</span><span class="w"> </span>certs.go:473<span class="o">]</span><span class="w"> </span>validating<span class="w"> </span>certificate<span class="w"> </span>period<span class="w"> </span><span class="k">for</span><span class="w"> </span>CA<span class="w"> </span>certificate
</span><span id="__span-79-84"><a id="__codelineno-79-84" name="__codelineno-79-84" href="#__codelineno-79-84"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608178<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;ca-certs&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-85"><a id="__codelineno-79-85" name="__codelineno-79-85" href="#__codelineno-79-85"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608192<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;etc-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-86"><a id="__codelineno-79-86" name="__codelineno-79-86" href="#__codelineno-79-86"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608198<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;k8s-certs&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-87"><a id="__codelineno-79-87" name="__codelineno-79-87" href="#__codelineno-79-87"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608206<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;usr-local-share-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-88"><a id="__codelineno-79-88" name="__codelineno-79-88" href="#__codelineno-79-88"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.608214<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;usr-share-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span>
</span><span id="__span-79-89"><a id="__codelineno-79-89" name="__codelineno-79-89" href="#__codelineno-79-89"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609567<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:159<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>wrote<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-apiserver&quot;</span><span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests/kube-apiserver.yaml&quot;</span>
</span><span id="__span-79-90"><a id="__codelineno-79-90" name="__codelineno-79-90" href="#__codelineno-79-90"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-91"><a id="__codelineno-79-91" name="__codelineno-79-91" href="#__codelineno-79-91"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609599<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:104<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>getting<span class="w"> </span>StaticPodSpecs
</span><span id="__span-79-92"><a id="__codelineno-79-92" name="__codelineno-79-92" href="#__codelineno-79-92"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609807<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;ca-certs&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-93"><a id="__codelineno-79-93" name="__codelineno-79-93" href="#__codelineno-79-93"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609819<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;etc-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-94"><a id="__codelineno-79-94" name="__codelineno-79-94" href="#__codelineno-79-94"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609824<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;flexvolume-dir&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-95"><a id="__codelineno-79-95" name="__codelineno-79-95" href="#__codelineno-79-95"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609835<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;k8s-certs&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-96"><a id="__codelineno-79-96" name="__codelineno-79-96" href="#__codelineno-79-96"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609841<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;kubeconfig&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-97"><a id="__codelineno-79-97" name="__codelineno-79-97" href="#__codelineno-79-97"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609846<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;usr-local-share-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-98"><a id="__codelineno-79-98" name="__codelineno-79-98" href="#__codelineno-79-98"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.609854<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;usr-share-ca-certificates&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span>
</span><span id="__span-79-99"><a id="__codelineno-79-99" name="__codelineno-79-99" href="#__codelineno-79-99"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.610610<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:159<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>wrote<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-controller-manager&quot;</span><span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&quot;</span>
</span><span id="__span-79-100"><a id="__codelineno-79-100" name="__codelineno-79-100" href="#__codelineno-79-100"></a><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>Creating<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">&quot;kube-scheduler&quot;</span>
</span><span id="__span-79-101"><a id="__codelineno-79-101" name="__codelineno-79-101" href="#__codelineno-79-101"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.610640<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:104<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>getting<span class="w"> </span>StaticPodSpecs
</span><span id="__span-79-102"><a id="__codelineno-79-102" name="__codelineno-79-102" href="#__codelineno-79-102"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.610848<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:130<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>adding<span class="w"> </span>volume<span class="w"> </span><span class="s2">&quot;kubeconfig&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-scheduler&quot;</span>
</span><span id="__span-79-103"><a id="__codelineno-79-103" name="__codelineno-79-103" href="#__codelineno-79-103"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.611322<span class="w">    </span><span class="m">4886</span><span class="w"> </span>manifests.go:159<span class="o">]</span><span class="w"> </span><span class="o">[</span>control-plane<span class="o">]</span><span class="w"> </span>wrote<span class="w"> </span>static<span class="w"> </span>Pod<span class="w"> </span>manifest<span class="w"> </span><span class="k">for</span><span class="w"> </span>component<span class="w"> </span><span class="s2">&quot;kube-scheduler&quot;</span><span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests/kube-scheduler.yaml&quot;</span>
</span><span id="__span-79-104"><a id="__codelineno-79-104" name="__codelineno-79-104" href="#__codelineno-79-104"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.611339<span class="w">    </span><span class="m">4886</span><span class="w"> </span>kubelet.go:70<span class="o">]</span><span class="w"> </span>Stopping<span class="w"> </span>the<span class="w"> </span>kubelet
</span><span id="__span-79-105"><a id="__codelineno-79-105" name="__codelineno-79-105" href="#__codelineno-79-105"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span>kubelet<span class="w"> </span>environment<span class="w"> </span>file<span class="w"> </span>with<span class="w"> </span>flags<span class="w"> </span>to<span class="w"> </span>file<span class="w"> </span><span class="s2">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
</span><span id="__span-79-106"><a id="__codelineno-79-106" name="__codelineno-79-106" href="#__codelineno-79-106"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Writing<span class="w"> </span>kubelet<span class="w"> </span>configuration<span class="w"> </span>to<span class="w"> </span>file<span class="w"> </span><span class="s2">&quot;/var/lib/kubelet/config.yaml&quot;</span>
</span><span id="__span-79-107"><a id="__codelineno-79-107" name="__codelineno-79-107" href="#__codelineno-79-107"></a><span class="o">[</span>kubelet-start<span class="o">]</span><span class="w"> </span>Starting<span class="w"> </span>the<span class="w"> </span>kubelet
</span><span id="__span-79-108"><a id="__codelineno-79-108" name="__codelineno-79-108" href="#__codelineno-79-108"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.948568<span class="w">    </span><span class="m">4886</span><span class="w"> </span>loader.go:402<span class="o">]</span><span class="w"> </span>Config<span class="w"> </span>loaded<span class="w"> </span>from<span class="w"> </span>file:<span class="w">  </span>/etc/kubernetes/admin.conf
</span><span id="__span-79-109"><a id="__codelineno-79-109" name="__codelineno-79-109" href="#__codelineno-79-109"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.949088<span class="w">    </span><span class="m">4886</span><span class="w"> </span>envvar.go:172<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Feature gate default state&quot;</span><span class="w"> </span><span class="nv">feature</span><span class="o">=</span><span class="s2">&quot;ClientsAllowCBOR&quot;</span><span class="w"> </span><span class="nv">enabled</span><span class="o">=</span><span class="nb">false</span>
</span><span id="__span-79-110"><a id="__codelineno-79-110" name="__codelineno-79-110" href="#__codelineno-79-110"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.949115<span class="w">    </span><span class="m">4886</span><span class="w"> </span>envvar.go:172<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Feature gate default state&quot;</span><span class="w"> </span><span class="nv">feature</span><span class="o">=</span><span class="s2">&quot;ClientsPreferCBOR&quot;</span><span class="w"> </span><span class="nv">enabled</span><span class="o">=</span><span class="nb">false</span>
</span><span id="__span-79-111"><a id="__codelineno-79-111" name="__codelineno-79-111" href="#__codelineno-79-111"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.949124<span class="w">    </span><span class="m">4886</span><span class="w"> </span>envvar.go:172<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Feature gate default state&quot;</span><span class="w"> </span><span class="nv">feature</span><span class="o">=</span><span class="s2">&quot;InformerResourceVersion&quot;</span><span class="w"> </span><span class="nv">enabled</span><span class="o">=</span><span class="nb">false</span>
</span><span id="__span-79-112"><a id="__codelineno-79-112" name="__codelineno-79-112" href="#__codelineno-79-112"></a>I0322<span class="w"> </span><span class="m">20</span>:09:29.949144<span class="w">    </span><span class="m">4886</span><span class="w"> </span>envvar.go:172<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Feature gate default state&quot;</span><span class="w"> </span><span class="nv">feature</span><span class="o">=</span><span class="s2">&quot;WatchListClient&quot;</span><span class="w"> </span><span class="nv">enabled</span><span class="o">=</span><span class="nb">false</span>
</span><span id="__span-79-113"><a id="__codelineno-79-113" name="__codelineno-79-113" href="#__codelineno-79-113"></a><span class="o">[</span>wait-control-plane<span class="o">]</span><span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>kubelet<span class="w"> </span>to<span class="w"> </span>boot<span class="w"> </span>up<span class="w"> </span>the<span class="w"> </span>control<span class="w"> </span>plane<span class="w"> </span>as<span class="w"> </span>static<span class="w"> </span>Pods<span class="w"> </span>from<span class="w"> </span>directory<span class="w"> </span><span class="s2">&quot;/etc/kubernetes/manifests&quot;</span>
</span><span id="__span-79-114"><a id="__codelineno-79-114" name="__codelineno-79-114" href="#__codelineno-79-114"></a><span class="o">[</span>kubelet-check<span class="o">]</span><span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>healthy<span class="w"> </span>kubelet<span class="w"> </span>at<span class="w"> </span>http://127.0.0.1:10248/healthz.<span class="w"> </span>This<span class="w"> </span>can<span class="w"> </span>take<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>4m0s
</span><span id="__span-79-115"><a id="__codelineno-79-115" name="__codelineno-79-115" href="#__codelineno-79-115"></a><span class="o">[</span>kubelet-check<span class="o">]</span><span class="w"> </span>The<span class="w"> </span>kubelet<span class="w"> </span>is<span class="w"> </span>healthy<span class="w"> </span>after<span class="w"> </span><span class="m">502</span>.456949ms
</span><span id="__span-79-116"><a id="__codelineno-79-116" name="__codelineno-79-116" href="#__codelineno-79-116"></a><span class="o">[</span>api-check<span class="o">]</span><span class="w"> </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>healthy<span class="w"> </span>API<span class="w"> </span>server.<span class="w"> </span>This<span class="w"> </span>can<span class="w"> </span>take<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span>4m0s
</span><span id="__span-79-117"><a id="__codelineno-79-117" name="__codelineno-79-117" href="#__codelineno-79-117"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452200<span class="w">    </span><span class="m">4886</span><span class="w"> </span>wait.go:220<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Request Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-79-118"><a id="__codelineno-79-118" name="__codelineno-79-118" href="#__codelineno-79-118"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452302<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:473<span class="o">]</span><span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>-XGET<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json, */*&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span><span class="w"> </span><span class="s1">&#39;https://192.168.11.161:6443/healthz?timeout=10s&#39;</span>
</span><span id="__span-79-119"><a id="__codelineno-79-119" name="__codelineno-79-119" href="#__codelineno-79-119"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452515<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:515<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Trace:<span class="w"> </span>Dial<span class="w"> </span>to<span class="w"> </span>tcp:192.168.11.161:6443<span class="w"> </span>failed:<span class="w"> </span>dial<span class="w"> </span>tcp<span class="w"> </span><span class="m">192</span>.168.11.161:6443:<span class="w"> </span>connect:<span class="w"> </span>connection<span class="w"> </span>refused
</span><span id="__span-79-120"><a id="__codelineno-79-120" name="__codelineno-79-120" href="#__codelineno-79-120"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452547<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:560<span class="o">]</span><span class="w"> </span>GET<span class="w"> </span>https://192.168.11.161:6443/healthz?timeout<span class="o">=</span>10s<span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>milliseconds
</span><span id="__span-79-121"><a id="__codelineno-79-121" name="__codelineno-79-121" href="#__codelineno-79-121"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452664<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:577<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Statistics:<span class="w"> </span>DNSLookup<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Dial<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>TLSHandshake<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Duration<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms
</span><span id="__span-79-122"><a id="__codelineno-79-122" name="__codelineno-79-122" href="#__codelineno-79-122"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.452746<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:584<span class="o">]</span><span class="w"> </span>Response<span class="w"> </span>Headers:
</span><span id="__span-79-123"><a id="__codelineno-79-123" name="__codelineno-79-123" href="#__codelineno-79-123"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.952488<span class="w">    </span><span class="m">4886</span><span class="w"> </span>wait.go:220<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Request Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-79-124"><a id="__codelineno-79-124" name="__codelineno-79-124" href="#__codelineno-79-124"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.952695<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:473<span class="o">]</span><span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>-XGET<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json, */*&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span><span class="w"> </span><span class="s1">&#39;https://192.168.11.161:6443/healthz?timeout=10s&#39;</span>
</span><span id="__span-79-125"><a id="__codelineno-79-125" name="__codelineno-79-125" href="#__codelineno-79-125"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.953055<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:515<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Trace:<span class="w"> </span>Dial<span class="w"> </span>to<span class="w"> </span>tcp:192.168.11.161:6443<span class="w"> </span>failed:<span class="w"> </span>dial<span class="w"> </span>tcp<span class="w"> </span><span class="m">192</span>.168.11.161:6443:<span class="w"> </span>connect:<span class="w"> </span>connection<span class="w"> </span>refused
</span><span id="__span-79-126"><a id="__codelineno-79-126" name="__codelineno-79-126" href="#__codelineno-79-126"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.953141<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:560<span class="o">]</span><span class="w"> </span>GET<span class="w"> </span>https://192.168.11.161:6443/healthz?timeout<span class="o">=</span>10s<span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>milliseconds
</span><span id="__span-79-127"><a id="__codelineno-79-127" name="__codelineno-79-127" href="#__codelineno-79-127"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.953178<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:577<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Statistics:<span class="w"> </span>DNSLookup<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Dial<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>TLSHandshake<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Duration<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms
</span><span id="__span-79-128"><a id="__codelineno-79-128" name="__codelineno-79-128" href="#__codelineno-79-128"></a>I0322<span class="w"> </span><span class="m">20</span>:09:30.953196<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:584<span class="o">]</span><span class="w"> </span>Response<span class="w"> </span>Headers:
</span><span id="__span-79-129"><a id="__codelineno-79-129" name="__codelineno-79-129" href="#__codelineno-79-129"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453072<span class="w">    </span><span class="m">4886</span><span class="w"> </span>wait.go:220<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Request Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-79-130"><a id="__codelineno-79-130" name="__codelineno-79-130" href="#__codelineno-79-130"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453425<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:473<span class="o">]</span><span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>-XGET<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json, */*&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span><span class="w"> </span><span class="s1">&#39;https://192.168.11.161:6443/healthz?timeout=10s&#39;</span>
</span><span id="__span-79-131"><a id="__codelineno-79-131" name="__codelineno-79-131" href="#__codelineno-79-131"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453892<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:515<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Trace:<span class="w"> </span>Dial<span class="w"> </span>to<span class="w"> </span>tcp:192.168.11.161:6443<span class="w"> </span>failed:<span class="w"> </span>dial<span class="w"> </span>tcp<span class="w"> </span><span class="m">192</span>.168.11.161:6443:<span class="w"> </span>connect:<span class="w"> </span>connection<span class="w"> </span>refused
</span><span id="__span-79-132"><a id="__codelineno-79-132" name="__codelineno-79-132" href="#__codelineno-79-132"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453935<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:560<span class="o">]</span><span class="w"> </span>GET<span class="w"> </span>https://192.168.11.161:6443/healthz?timeout<span class="o">=</span>10s<span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>milliseconds
</span><span id="__span-79-133"><a id="__codelineno-79-133" name="__codelineno-79-133" href="#__codelineno-79-133"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453947<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:577<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Statistics:<span class="w"> </span>DNSLookup<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Dial<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>TLSHandshake<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Duration<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms
</span><span id="__span-79-134"><a id="__codelineno-79-134" name="__codelineno-79-134" href="#__codelineno-79-134"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.453955<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:584<span class="o">]</span><span class="w"> </span>Response<span class="w"> </span>Headers:
</span><span id="__span-79-135"><a id="__codelineno-79-135" name="__codelineno-79-135" href="#__codelineno-79-135"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.952836<span class="w">    </span><span class="m">4886</span><span class="w"> </span>wait.go:220<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Request Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span id="__span-79-136"><a id="__codelineno-79-136" name="__codelineno-79-136" href="#__codelineno-79-136"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.953094<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:473<span class="o">]</span><span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>-XGET<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/json, */*&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span><span class="w"> </span><span class="s1">&#39;https://192.168.11.161:6443/healthz?timeout=10s&#39;</span>
</span><span id="__span-79-137"><a id="__codelineno-79-137" name="__codelineno-79-137" href="#__codelineno-79-137"></a>I0322<span class="w"> </span><span class="m">20</span>:09:31.953553<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:517<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Trace:<span class="w"> </span>Dial<span class="w"> </span>to<span class="w"> </span>tcp:192.168.11.161:6443<span class="w"> </span>succeed
</span><span id="__span-79-138"><a id="__codelineno-79-138" name="__codelineno-79-138" href="#__codelineno-79-138"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315605<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:560<span class="o">]</span><span class="w"> </span>GET<span class="w"> </span>https://192.168.11.161:6443/healthz?timeout<span class="o">=</span>10s<span class="w"> </span><span class="m">403</span><span class="w"> </span>Forbidden<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1362</span><span class="w"> </span>milliseconds
</span><span id="__span-79-139"><a id="__codelineno-79-139" name="__codelineno-79-139" href="#__codelineno-79-139"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315644<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:577<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Statistics:<span class="w"> </span>DNSLookup<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>Dial<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>TLSHandshake<span class="w"> </span><span class="m">1336</span><span class="w"> </span>ms<span class="w"> </span>ServerProcessing<span class="w"> </span><span class="m">25</span><span class="w"> </span>ms<span class="w"> </span>Duration<span class="w"> </span><span class="m">1362</span><span class="w"> </span>ms
</span><span id="__span-79-140"><a id="__codelineno-79-140" name="__codelineno-79-140" href="#__codelineno-79-140"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315657<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:584<span class="o">]</span><span class="w"> </span>Response<span class="w"> </span>Headers:
</span><span id="__span-79-141"><a id="__codelineno-79-141" name="__codelineno-79-141" href="#__codelineno-79-141"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315670<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>X-Content-Type-Options:<span class="w"> </span>nosniff
</span><span id="__span-79-142"><a id="__codelineno-79-142" name="__codelineno-79-142" href="#__codelineno-79-142"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315701<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>X-Kubernetes-Pf-Flowschema-Uid:<span class="w"> </span>
</span><span id="__span-79-143"><a id="__codelineno-79-143" name="__codelineno-79-143" href="#__codelineno-79-143"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315710<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>X-Kubernetes-Pf-Prioritylevel-Uid:<span class="w"> </span>
</span><span id="__span-79-144"><a id="__codelineno-79-144" name="__codelineno-79-144" href="#__codelineno-79-144"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315717<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Content-Length:<span class="w"> </span><span class="m">192</span>
</span><span id="__span-79-145"><a id="__codelineno-79-145" name="__codelineno-79-145" href="#__codelineno-79-145"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315723<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Date:<span class="w"> </span>Sat,<span class="w"> </span><span class="m">22</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">12</span>:09:33<span class="w"> </span>GMT
</span><span id="__span-79-146"><a id="__codelineno-79-146" name="__codelineno-79-146" href="#__codelineno-79-146"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315731<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Audit-Id:<span class="w"> </span>989b38d0-29d4-4450-b564-12e6142c52b7
</span><span id="__span-79-147"><a id="__codelineno-79-147" name="__codelineno-79-147" href="#__codelineno-79-147"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315737<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Cache-Control:<span class="w"> </span>no-cache,<span class="w"> </span>private
</span><span id="__span-79-148"><a id="__codelineno-79-148" name="__codelineno-79-148" href="#__codelineno-79-148"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.315741<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Content-Type:<span class="w"> </span>application/json
</span><span id="__span-79-149"><a id="__codelineno-79-149" name="__codelineno-79-149" href="#__codelineno-79-149"></a>I0322<span class="w"> </span><span class="m">20</span>:09:33.316997<span class="w">    </span><span class="m">4886</span><span class="w"> </span>wait.go:220<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Response Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span>&lt;
</span><span id="__span-79-150"><a id="__codelineno-79-150" name="__codelineno-79-150" href="#__codelineno-79-150"></a><span class="w">    </span><span class="o">{</span><span class="s2">&quot;kind&quot;</span>:<span class="s2">&quot;Status&quot;</span>,<span class="s2">&quot;apiVersion&quot;</span>:<span class="s2">&quot;v1&quot;</span>,<span class="s2">&quot;metadata&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;status&quot;</span>:<span class="s2">&quot;Failure&quot;</span>,<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;forbidden: User \&quot;kubernetes-admin\&quot; cannot get path \&quot;/healthz\&quot;&quot;</span>,<span class="s2">&quot;reason&quot;</span>:<span class="s2">&quot;Forbidden&quot;</span>,<span class="s2">&quot;details&quot;</span>:<span class="o">{}</span>,<span class="s2">&quot;code&quot;</span>:403<span class="o">}</span>
</span><span id="__span-79-151"><a id="__codelineno-79-151" name="__codelineno-79-151" href="#__codelineno-79-151"></a><span class="w"> </span>&gt;
</span><span id="__span-79-152"><a id="__codelineno-79-152" name="__codelineno-79-152" href="#__codelineno-79-152"></a>
</span><span id="__span-79-153"><a id="__codelineno-79-153" name="__codelineno-79-153" href="#__codelineno-79-153"></a>.......<span class="w">   </span>中间冗长的日志省略
</span><span id="__span-79-154"><a id="__codelineno-79-154" name="__codelineno-79-154" href="#__codelineno-79-154"></a>
</span><span id="__span-79-155"><a id="__codelineno-79-155" name="__codelineno-79-155" href="#__codelineno-79-155"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.294961<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:473<span class="o">]</span><span class="w"> </span>curl<span class="w"> </span>-v<span class="w"> </span>-XPOST<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Accept: application/vnd.kubernetes.protobuf,application/json&quot;</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/vnd.kubernetes.protobuf&quot;</span><span class="w"> </span><span class="s1">&#39;https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s&#39;</span>
</span><span id="__span-79-156"><a id="__codelineno-79-156" name="__codelineno-79-156" href="#__codelineno-79-156"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298583<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:560<span class="o">]</span><span class="w"> </span>POST<span class="w"> </span>https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout<span class="o">=</span>10s<span class="w"> </span><span class="m">201</span><span class="w"> </span>Created<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>milliseconds
</span><span id="__span-79-157"><a id="__codelineno-79-157" name="__codelineno-79-157" href="#__codelineno-79-157"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298609<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:577<span class="o">]</span><span class="w"> </span>HTTP<span class="w"> </span>Statistics:<span class="w"> </span>GetConnection<span class="w"> </span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>ServerProcessing<span class="w"> </span><span class="m">3</span><span class="w"> </span>ms<span class="w"> </span>Duration<span class="w"> </span><span class="m">3</span><span class="w"> </span>ms
</span><span id="__span-79-158"><a id="__codelineno-79-158" name="__codelineno-79-158" href="#__codelineno-79-158"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298634<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:584<span class="o">]</span><span class="w"> </span>Response<span class="w"> </span>Headers:
</span><span id="__span-79-159"><a id="__codelineno-79-159" name="__codelineno-79-159" href="#__codelineno-79-159"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298649<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>X-Kubernetes-Pf-Flowschema-Uid:<span class="w"> </span>9a8a526f-0630-4d03-b851-7ace48e8dc05
</span><span id="__span-79-160"><a id="__codelineno-79-160" name="__codelineno-79-160" href="#__codelineno-79-160"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298661<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>X-Kubernetes-Pf-Prioritylevel-Uid:<span class="w"> </span>d044472a-2a80-46df-8bc8-7d94366f6e34
</span><span id="__span-79-161"><a id="__codelineno-79-161" name="__codelineno-79-161" href="#__codelineno-79-161"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298667<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Content-Length:<span class="w"> </span><span class="m">385</span>
</span><span id="__span-79-162"><a id="__codelineno-79-162" name="__codelineno-79-162" href="#__codelineno-79-162"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298675<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Date:<span class="w"> </span>Sat,<span class="w"> </span><span class="m">22</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">2025</span><span class="w"> </span><span class="m">12</span>:09:37<span class="w"> </span>GMT
</span><span id="__span-79-163"><a id="__codelineno-79-163" name="__codelineno-79-163" href="#__codelineno-79-163"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298680<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Audit-Id:<span class="w"> </span>ece06481-523b-4fe4-9d2c-2d369eceecc1
</span><span id="__span-79-164"><a id="__codelineno-79-164" name="__codelineno-79-164" href="#__codelineno-79-164"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298690<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Cache-Control:<span class="w"> </span>no-cache,<span class="w"> </span>private
</span><span id="__span-79-165"><a id="__codelineno-79-165" name="__codelineno-79-165" href="#__codelineno-79-165"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298695<span class="w">    </span><span class="m">4886</span><span class="w"> </span>round_trippers.go:587<span class="o">]</span><span class="w">     </span>Content-Type:<span class="w"> </span>application/vnd.kubernetes.protobuf
</span><span id="__span-79-166"><a id="__codelineno-79-166" name="__codelineno-79-166" href="#__codelineno-79-166"></a>I0322<span class="w"> </span><span class="m">20</span>:09:37.298744<span class="w">    </span><span class="m">4886</span><span class="w"> </span>type.go:252<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Response Body&quot;</span><span class="w"> </span><span class="nv">body</span><span class="o">=</span>&lt;
</span><span id="__span-79-167"><a id="__codelineno-79-167" name="__codelineno-79-167" href="#__codelineno-79-167"></a><span class="w">    </span><span class="m">00000000</span><span class="w">  </span>6b<span class="w"> </span><span class="m">38</span><span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>0a<span class="w"> </span>2b<span class="w"> </span>0a<span class="w"> </span>1c<span class="w">  </span><span class="m">72</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="m">63</span><span class="w"> </span>2e<span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">74</span><span class="w">  </span><span class="p">|</span>k8s..+..rbac.aut<span class="p">|</span>
</span><span id="__span-79-168"><a id="__codelineno-79-168" name="__codelineno-79-168" href="#__codelineno-79-168"></a><span class="w">    </span><span class="m">00000010</span><span class="w">  </span><span class="m">68</span><span class="w"> </span>6f<span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">69</span><span class="w"> </span>7a<span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">69</span><span class="w">  </span>6f<span class="w"> </span>6e<span class="w"> </span>2e<span class="w"> </span>6b<span class="w"> </span><span class="m">38</span><span class="w"> </span><span class="m">73</span><span class="w"> </span>2e<span class="w"> </span><span class="m">69</span><span class="w">  </span><span class="p">|</span>horization.k8s.i<span class="p">|</span>
</span><span id="__span-79-169"><a id="__codelineno-79-169" name="__codelineno-79-169" href="#__codelineno-79-169"></a><span class="w">    </span><span class="m">00000020</span><span class="w">  </span>6f<span class="w"> </span>2f<span class="w"> </span><span class="m">76</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">12</span><span class="w"> </span>0b<span class="w"> </span><span class="m">52</span><span class="w"> </span>6f<span class="w">  </span>6c<span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">69</span><span class="w"> </span>6e<span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="m">69</span><span class="w"> </span>6e<span class="w">  </span><span class="p">|</span>o/v1..RoleBindin<span class="p">|</span>
</span><span id="__span-79-170"><a id="__codelineno-79-170" name="__codelineno-79-170" href="#__codelineno-79-170"></a><span class="w">    </span><span class="m">00000030</span><span class="w">  </span><span class="m">67</span><span class="w"> </span><span class="m">12</span><span class="w"> </span>c9<span class="w"> </span><span class="m">02</span><span class="w"> </span>0a<span class="w"> </span>c0<span class="w"> </span><span class="m">01</span><span class="w"> </span>0a<span class="w">  </span>0a<span class="w"> </span>6b<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>2d<span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">72</span><span class="w">  </span><span class="p">|</span>g........kube-pr<span class="p">|</span>
</span><span id="__span-79-171"><a id="__codelineno-79-171" name="__codelineno-79-171" href="#__codelineno-79-171"></a><span class="w">    </span><span class="m">00000040</span><span class="w">  </span>6f<span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">79</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>1a<span class="w"> </span>0b<span class="w"> </span>6b<span class="w">  </span><span class="m">75</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>2d<span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">79</span><span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">74</span><span class="w">  </span><span class="p">|</span>oxy....kube-syst<span class="p">|</span>
</span><span id="__span-79-172"><a id="__codelineno-79-172" name="__codelineno-79-172" href="#__codelineno-79-172"></a><span class="w">    </span><span class="m">00000050</span><span class="w">  </span><span class="m">65</span><span class="w"> </span>6d<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">00</span><span class="w"> </span>2a<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">63</span><span class="w"> </span><span class="m">38</span><span class="w">  </span><span class="m">62</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">63</span><span class="w"> </span><span class="m">64</span><span class="w"> </span>2d<span class="w"> </span><span class="m">38</span><span class="w">  </span><span class="p">|</span>em<span class="s2">&quot;.*</span><span class="nv">$c8bb6fcd</span><span class="s2">-8|</span>
</span><span id="__span-79-173"><a id="__codelineno-79-173" name="__codelineno-79-173" href="#__codelineno-79-173"></a><span class="s2">    00000060  66 35 38 2d 34 35 35 34  2d 39 66 36 30 2d 38 39  |f58-4554-9f60-89|</span>
</span><span id="__span-79-174"><a id="__codelineno-79-174" name="__codelineno-79-174" href="#__codelineno-79-174"></a><span class="s2">    00000070  39 32 61 39 65 36 64 36  64 39 32 03 33 30 33 38  |92a9e6d6d92.3038|</span>
</span><span id="__span-79-175"><a id="__codelineno-79-175" name="__codelineno-79-175" href="#__codelineno-79-175"></a><span class="s2">    00000080  00 42 08 08 81 d1 fa be  06 10 00 8a 01 69 0a 07  |.B...........i..|</span>
</span><span id="__span-79-176"><a id="__codelineno-79-176" name="__codelineno-79-176" href="#__codelineno-79-176"></a><span class="s2">    00000090  6b 75 62 65 61 64 6d 12  06 55 70 64 61 74 65 1a  |kubeadm..Update.|</span>
</span><span id="__span-79-177"><a id="__codelineno-79-177" name="__codelineno-79-177" href="#__codelineno-79-177"></a><span class="s2">    000000a0  1c 72 62 61 63 2e 61 75  74 68 6f 72 69 7a 61 74  |.rbac.authorizat|</span>
</span><span id="__span-79-178"><a id="__codelineno-79-178" name="__codelineno-79-178" href="#__codelineno-79-178"></a><span class="s2">    000000b0  69 6f 6e 2e 6b 38 73 2e  69 6f 2f 76 31 22 08 08  |ion.k8s.io/v1&quot;</span>..<span class="p">|</span>
</span><span id="__span-79-179"><a id="__codelineno-79-179" name="__codelineno-79-179" href="#__codelineno-79-179"></a><span class="w">    </span>000000c0<span class="w">  </span><span class="m">81</span><span class="w"> </span>d1<span class="w"> </span>fa<span class="w"> </span>be<span class="w"> </span><span class="m">06</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">32</span><span class="w">  </span><span class="m">08</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">69</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>6c<span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="m">73</span><span class="w"> </span><span class="m">56</span><span class="w">  </span><span class="p">|</span>.......2.FieldsV<span class="p">|</span>
</span><span id="__span-79-180"><a id="__codelineno-79-180" name="__codelineno-79-180" href="#__codelineno-79-180"></a><span class="w">    </span>000000d0<span class="w">  </span><span class="m">31</span><span class="w"> </span>3a<span class="w"> </span><span class="m">22</span><span class="w"> </span>0a<span class="w"> </span><span class="m">20</span><span class="w"> </span>7b<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">66</span><span class="w">  </span>3a<span class="w"> </span><span class="m">72</span><span class="w"> </span>6f<span class="w"> </span>6c<span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">66</span><span class="w">  </span><span class="p">|</span><span class="m">1</span>:<span class="s2">&quot;. {&quot;</span>f:roleRef<span class="p">|</span>
</span><span id="__span-79-181"><a id="__codelineno-79-181" name="__codelineno-79-181" href="#__codelineno-79-181"></a><span class="w">    </span>000000e0<span class="w">  </span><span class="m">22</span><span class="w"> </span>3a<span class="w"> </span>7b<span class="w"> </span>7d<span class="w"> </span>2c<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">66</span><span class="w"> </span>3a<span class="w">  </span><span class="m">73</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">62</span><span class="w"> </span>6a<span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">63</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">73</span><span class="w">  </span><span class="p">|</span><span class="s2">&quot;:{},&quot;</span>f:subjects<span class="p">|</span>
</span><span id="__span-79-182"><a id="__codelineno-79-182" name="__codelineno-79-182" href="#__codelineno-79-182"></a><span class="w">    </span>000000f0<span class="w">  </span><span class="m">22</span><span class="w"> </span>3a<span class="w"> </span>7b<span class="w"> </span>7d<span class="w"> </span>7d<span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">12</span><span class="w">  </span><span class="m">55</span><span class="w"> </span>0a<span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">72</span><span class="w"> </span>6f<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">70</span><span class="w">  </span><span class="p">|</span><span class="s2">&quot;:{}}B..U..Group|</span>
</span><span id="__span-79-183"><a id="__codelineno-79-183" name="__codelineno-79-183" href="#__codelineno-79-183"></a><span class="s2">    00000100  12 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|</span>
</span><span id="__span-79-184"><a id="__codelineno-79-184" name="__codelineno-79-184" href="#__codelineno-79-184"></a><span class="s2">    00000110  74 69 6f 6e 2e 6b 38 73  2e 69 6f 1a 2f 73 79 73  |tion.k8s.io./sys|</span>
</span><span id="__span-79-185"><a id="__codelineno-79-185" name="__codelineno-79-185" href="#__codelineno-79-185"></a><span class="s2">    00000120  74 65 6d 3a 62 6f 6f 74  73 74 72 61 70 70 65 72  |tem:bootstrapper|</span>
</span><span id="__span-79-186"><a id="__codelineno-79-186" name="__codelineno-79-186" href="#__codelineno-79-186"></a><span class="s2">    00000130  73 3a 6b 75 62 65 61 64  6d 3a 64 65 66 61 75 6c  |s:kubeadm:defaul|</span>
</span><span id="__span-79-187"><a id="__codelineno-79-187" name="__codelineno-79-187" href="#__codelineno-79-187"></a><span class="s2">    00000140  74 2d 6e 6f 64 65 2d 74  6f 6b 65 6e 22 00 1a 2d  |t-node-token&quot;</span>..-<span class="p">|</span>
</span><span id="__span-79-188"><a id="__codelineno-79-188" name="__codelineno-79-188" href="#__codelineno-79-188"></a><span class="w">    </span><span class="m">00000150</span><span class="w">  </span>0a<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="m">63</span><span class="w"> </span>2e<span class="w"> </span><span class="m">61</span><span class="w">  </span><span class="m">75</span><span class="w"> </span><span class="m">74</span><span class="w"> </span><span class="m">68</span><span class="w"> </span>6f<span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">69</span><span class="w"> </span>7a<span class="w"> </span><span class="m">61</span><span class="w">  </span><span class="p">|</span>..rbac.authoriza<span class="p">|</span>
</span><span id="__span-79-189"><a id="__codelineno-79-189" name="__codelineno-79-189" href="#__codelineno-79-189"></a><span class="w">    </span><span class="m">00000160</span><span class="w">  </span><span class="m">74</span><span class="w"> </span><span class="m">69</span><span class="w"> </span>6f<span class="w"> </span>6e<span class="w"> </span>2e<span class="w"> </span>6b<span class="w"> </span><span class="m">38</span><span class="w"> </span><span class="m">73</span><span class="w">  </span>2e<span class="w"> </span><span class="m">69</span><span class="w"> </span>6f<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">04</span><span class="w"> </span><span class="m">52</span><span class="w"> </span>6f<span class="w"> </span>6c<span class="w">  </span><span class="p">|</span>tion.k8s.io..Rol<span class="p">|</span>
</span><span id="__span-79-190"><a id="__codelineno-79-190" name="__codelineno-79-190" href="#__codelineno-79-190"></a><span class="w">    </span><span class="m">00000170</span><span class="w">  </span><span class="m">65</span><span class="w"> </span>1a<span class="w"> </span>0a<span class="w"> </span>6b<span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="m">65</span><span class="w"> </span>2d<span class="w">  </span><span class="m">70</span><span class="w"> </span><span class="m">72</span><span class="w"> </span>6f<span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">79</span><span class="w"> </span>1a<span class="w"> </span><span class="m">00</span><span class="w"> </span><span class="m">22</span><span class="w">  </span><span class="p">|</span>e..kube-proxy..<span class="s2">&quot;|</span>
</span><span id="__span-79-191"><a id="__codelineno-79-191" name="__codelineno-79-191" href="#__codelineno-79-191"></a><span class="s2">    00000180  00                                                |.|</span>
</span><span id="__span-79-192"><a id="__codelineno-79-192" name="__codelineno-79-192" href="#__codelineno-79-192"></a><span class="s2"> &gt;</span>
</span><span id="__span-79-193"><a id="__codelineno-79-193" name="__codelineno-79-193" href="#__codelineno-79-193"></a><span class="s2">[addons] Applied essential addon: kube-proxy</span>
</span><span id="__span-79-194"><a id="__codelineno-79-194" name="__codelineno-79-194" href="#__codelineno-79-194"></a><span class="s2">I0322 20:09:37.299409    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span>
</span><span id="__span-79-195"><a id="__codelineno-79-195" name="__codelineno-79-195" href="#__codelineno-79-195"></a><span class="s2">I0322 20:09:37.300120    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span>
</span><span id="__span-79-196"><a id="__codelineno-79-196" name="__codelineno-79-196" href="#__codelineno-79-196"></a>
</span><span id="__span-79-197"><a id="__codelineno-79-197" name="__codelineno-79-197" href="#__codelineno-79-197"></a><span class="s2">Your Kubernetes control-plane has initialized successfully!</span>
</span><span id="__span-79-198"><a id="__codelineno-79-198" name="__codelineno-79-198" href="#__codelineno-79-198"></a>
</span><span id="__span-79-199"><a id="__codelineno-79-199" name="__codelineno-79-199" href="#__codelineno-79-199"></a><span class="s2">To start using your cluster, you need to run the following as a regular user:</span>
</span><span id="__span-79-200"><a id="__codelineno-79-200" name="__codelineno-79-200" href="#__codelineno-79-200"></a>
</span><span id="__span-79-201"><a id="__codelineno-79-201" name="__codelineno-79-201" href="#__codelineno-79-201"></a><span class="s2">  mkdir -p </span><span class="nv">$HOME</span><span class="s2">/.kube</span>
</span><span id="__span-79-202"><a id="__codelineno-79-202" name="__codelineno-79-202" href="#__codelineno-79-202"></a><span class="s2">  sudo cp -i /etc/kubernetes/admin.conf </span><span class="nv">$HOME</span><span class="s2">/.kube/config</span>
</span><span id="__span-79-203"><a id="__codelineno-79-203" name="__codelineno-79-203" href="#__codelineno-79-203"></a><span class="s2">  sudo chown </span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="s2">:</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="s2"> </span><span class="nv">$HOME</span><span class="s2">/.kube/config</span>
</span><span id="__span-79-204"><a id="__codelineno-79-204" name="__codelineno-79-204" href="#__codelineno-79-204"></a>
</span><span id="__span-79-205"><a id="__codelineno-79-205" name="__codelineno-79-205" href="#__codelineno-79-205"></a><span class="s2">Alternatively, if you are the root user, you can run:</span>
</span><span id="__span-79-206"><a id="__codelineno-79-206" name="__codelineno-79-206" href="#__codelineno-79-206"></a>
</span><span id="__span-79-207"><a id="__codelineno-79-207" name="__codelineno-79-207" href="#__codelineno-79-207"></a><span class="s2">  export KUBECONFIG=/etc/kubernetes/admin.conf</span>
</span><span id="__span-79-208"><a id="__codelineno-79-208" name="__codelineno-79-208" href="#__codelineno-79-208"></a>
</span><span id="__span-79-209"><a id="__codelineno-79-209" name="__codelineno-79-209" href="#__codelineno-79-209"></a><span class="s2">You should now deploy a pod network to the cluster.</span>
</span><span id="__span-79-210"><a id="__codelineno-79-210" name="__codelineno-79-210" href="#__codelineno-79-210"></a><span class="s2">Run &quot;</span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span><span class="o">[</span>podnetwork<span class="o">]</span>.yaml<span class="s2">&quot; with one of the options listed at:</span>
</span><span id="__span-79-211"><a id="__codelineno-79-211" name="__codelineno-79-211" href="#__codelineno-79-211"></a><span class="s2">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span>
</span><span id="__span-79-212"><a id="__codelineno-79-212" name="__codelineno-79-212" href="#__codelineno-79-212"></a>
</span><span id="__span-79-213"><a id="__codelineno-79-213" name="__codelineno-79-213" href="#__codelineno-79-213"></a><span class="s2">Then you can join any number of worker nodes by running the following on each as root:</span>
</span><span id="__span-79-214"><a id="__codelineno-79-214" name="__codelineno-79-214" href="#__codelineno-79-214"></a>
</span><span id="__span-79-215"><a id="__codelineno-79-215" name="__codelineno-79-215" href="#__codelineno-79-215"></a><span class="s2">kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef \</span>
</span><span id="__span-79-216"><a id="__codelineno-79-216" name="__codelineno-79-216" href="#__codelineno-79-216"></a><span class="s2">    --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f </span>
</span></code></pre></div>
<h2 id="34-kubectl">3.4 准备kubectl配置文件<a class="headerlink" href="#34-kubectl" title="Permanent link">&para;</a></h2>
<p>以下操作仅在Master节点上进行。</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$HOME</span>/.kube
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>sudo<span class="w"> </span>cp<span class="w"> </span>-i<span class="w"> </span>/etc/kubernetes/admin.conf<span class="w"> </span><span class="nv">$HOME</span>/.kube/config
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a>sudo<span class="w"> </span>chown<span class="w"> </span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>:<span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="nv">$HOME</span>/.kube/config
</span></code></pre></div>
<h2 id="35">3.5 工作节点加入集群<a class="headerlink" href="#35" title="Permanent link">&para;</a></h2>
<h3 id="k8s-worker01">k8s-worker01节点加入集群<a class="headerlink" href="#k8s-worker01" title="Permanent link">&para;</a></h3>
<p>以下操作仅在Worker节点操作</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a>root@k8s-worker01:~#<span class="w"> </span>kubeadm<span class="w"> </span>join<span class="w"> </span><span class="m">192</span>.168.11.161:6443<span class="w"> </span>--token<span class="w"> </span>abcdef.0123456789abcdef<span class="w"> </span>--discovery-token-ca-cert-hash<span class="w"> </span>sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f<span class="w"> </span>
</span></code></pre></div>
<h3 id="k8s-worker02">k8s-worker02节点加入集群<a class="headerlink" href="#k8s-worker02" title="Permanent link">&para;</a></h3>
<p>以下操作仅在Worker节点操作</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>root@k8s-worker02:~#<span class="w"> </span>kubeadm<span class="w"> </span>join<span class="w"> </span><span class="m">192</span>.168.11.161:6443<span class="w"> </span>--token<span class="w"> </span>abcdef.0123456789abcdef<span class="w"> </span>--discovery-token-ca-cert-hash<span class="w"> </span>sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f
</span></code></pre></div>
<h2 id="36-k8s">3.6 验证K8S集群节点是否可用<a class="headerlink" href="#36-k8s" title="Permanent link">&para;</a></h2>
<p>在Master节点检查集群节点是否可用 </p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>NAME<span class="w">           </span>STATUS<span class="w">     </span>ROLES<span class="w">           </span>AGE<span class="w">     </span>VERSION
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>k8s-master01<span class="w">   </span>NotReady<span class="w">   </span>control-plane<span class="w">   </span>103m<span class="w">    </span>v1.32.3
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>k8s-worker01<span class="w">   </span>NotReady<span class="w">   </span>&lt;none&gt;<span class="w">          </span>4m12s<span class="w">   </span>v1.32.3
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>k8s-worker02<span class="w">   </span>NotReady<span class="w">   </span>&lt;none&gt;<span class="w">          </span>4m12s<span class="w">   </span>v1.32.3
</span></code></pre></div>
<p>在Master节点检查集群Pod状态（按命名空间筛选） </p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a>NAME<span class="w">                                   </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-84-4"><a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a>coredns-6766b7b6bb-6dtl7<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>Pending<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m
</span><span id="__span-84-5"><a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>coredns-6766b7b6bb-lrpw7<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>Pending<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m
</span><span id="__span-84-6"><a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a>etcd-k8s-master01<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m<span class="w">      </span>//<span class="w"> </span>静态pod
</span><span id="__span-84-7"><a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a>kube-apiserver-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m<span class="w">      </span>//<span class="w"> </span>静态pod
</span><span id="__span-84-8"><a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a>kube-controller-manager-k8s-master01<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m<span class="w">      </span>//<span class="w"> </span>静态pod<span class="w">    </span>
</span><span id="__span-84-9"><a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a>kube-proxy-6g8dn<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m<span class="w">      </span>
</span><span id="__span-84-10"><a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a>kube-proxy-kmzv6<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>5m1s
</span><span id="__span-84-11"><a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a>kube-proxy-pj2t5<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>5m1s
</span><span id="__span-84-12"><a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a>kube-scheduler-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>104m<span class="w">      </span>//<span class="w"> </span>静态pod<span class="w"> </span>
</span></code></pre></div>
<p>查看命名空间</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>cs
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>Warning:<span class="w"> </span>v1<span class="w"> </span>ComponentStatus<span class="w"> </span>is<span class="w"> </span>deprecated<span class="w"> </span><span class="k">in</span><span class="w"> </span>v1.19+
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>NAME<span class="w">                 </span>STATUS<span class="w">    </span>MESSAGE<span class="w">   </span>ERROR
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>etcd-0<span class="w">               </span>Healthy<span class="w">   </span>ok<span class="w">        </span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>scheduler<span class="w">            </span>Healthy<span class="w">   </span>ok<span class="w">        </span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>controller-manager<span class="w">   </span>Healthy<span class="w">   </span>ok<span class="w">  </span>
</span></code></pre></div>
<h1 id="k8scalico">四、K8S集群网络插件calico部署<a class="headerlink" href="#k8scalico" title="Permanent link">&para;</a></h1>
<p><a href="https://projectcalico.docs.tigera.io/about/about-calico">calico网络插件</a></p>
<h2 id="41-tigera-operator">4.1 第一步：安装tigera-operator<a class="headerlink" href="#41-tigera-operator" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml
</span></code></pre></div>
<h3 id="411">4.1.1 输出内容：<a class="headerlink" href="#411" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>namespace/tigera-operator<span class="w"> </span>created
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>customresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-7"><a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a>customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-8"><a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a>customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-9"><a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-10"><a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a>customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-11"><a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a>customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-12"><a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a>customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-13"><a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a>customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-14"><a id="__codelineno-87-14" name="__codelineno-87-14" href="#__codelineno-87-14"></a>customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-15"><a id="__codelineno-87-15" name="__codelineno-87-15" href="#__codelineno-87-15"></a>customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-16"><a id="__codelineno-87-16" name="__codelineno-87-16" href="#__codelineno-87-16"></a>customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-17"><a id="__codelineno-87-17" name="__codelineno-87-17" href="#__codelineno-87-17"></a>customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-18"><a id="__codelineno-87-18" name="__codelineno-87-18" href="#__codelineno-87-18"></a>customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-19"><a id="__codelineno-87-19" name="__codelineno-87-19" href="#__codelineno-87-19"></a>customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-20"><a id="__codelineno-87-20" name="__codelineno-87-20" href="#__codelineno-87-20"></a>customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-21"><a id="__codelineno-87-21" name="__codelineno-87-21" href="#__codelineno-87-21"></a>customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-22"><a id="__codelineno-87-22" name="__codelineno-87-22" href="#__codelineno-87-22"></a>customresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org<span class="w"> </span>created
</span><span id="__span-87-23"><a id="__codelineno-87-23" name="__codelineno-87-23" href="#__codelineno-87-23"></a>customresourcedefinition.apiextensions.k8s.io/adminnetworkpolicies.policy.networking.k8s.io<span class="w"> </span>created
</span><span id="__span-87-24"><a id="__codelineno-87-24" name="__codelineno-87-24" href="#__codelineno-87-24"></a>customresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io<span class="w"> </span>created
</span><span id="__span-87-25"><a id="__codelineno-87-25" name="__codelineno-87-25" href="#__codelineno-87-25"></a>customresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io<span class="w"> </span>created
</span><span id="__span-87-26"><a id="__codelineno-87-26" name="__codelineno-87-26" href="#__codelineno-87-26"></a>customresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io<span class="w"> </span>created
</span><span id="__span-87-27"><a id="__codelineno-87-27" name="__codelineno-87-27" href="#__codelineno-87-27"></a>customresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io<span class="w"> </span>created
</span><span id="__span-87-28"><a id="__codelineno-87-28" name="__codelineno-87-28" href="#__codelineno-87-28"></a>serviceaccount/tigera-operator<span class="w"> </span>created
</span><span id="__span-87-29"><a id="__codelineno-87-29" name="__codelineno-87-29" href="#__codelineno-87-29"></a>clusterrole.rbac.authorization.k8s.io/tigera-operator<span class="w"> </span>created
</span><span id="__span-87-30"><a id="__codelineno-87-30" name="__codelineno-87-30" href="#__codelineno-87-30"></a>clusterrolebinding.rbac.authorization.k8s.io/tigera-operator<span class="w"> </span>created
</span><span id="__span-87-31"><a id="__codelineno-87-31" name="__codelineno-87-31" href="#__codelineno-87-31"></a>deployment.apps/tigera-operator<span class="w"> </span>created
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>ns
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>NAME<span class="w">              </span>STATUS<span class="w">   </span>AGE
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>default<span class="w">           </span>Active<span class="w">   </span>116m
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>kube-node-lease<span class="w">   </span>Active<span class="w">   </span>116m
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>kube-public<span class="w">       </span>Active<span class="w">   </span>116m
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>kube-system<span class="w">       </span>Active<span class="w">   </span>116m
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>tigera-operator<span class="w">   </span>Active<span class="w">   </span>106s<span class="w">      </span>//<span class="w"> </span>新增的pod
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>tigera-operator
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a>NAME<span class="w">                              </span>READY<span class="w">   </span>STATUS<span class="w">             </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a>tigera-operator-ccfc44587-vswlt<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>ImagePullBackOff<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m44s
</span></code></pre></div>
<h2 id="42-calico-system">4.2 第二步：安装calico-system<a class="headerlink" href="#42-calico-system" title="Permanent link">&para;</a></h2>
<h3 id="421-custom-resourcesyaml">4.2.1 下载custom-resources.yaml<a class="headerlink" href="#421-custom-resourcesyaml" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>~#<span class="w"> </span>wget<span class="w"> </span>https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/custom-resources.yaml
</span></code></pre></div>
<h3 id="422-custom-resourcesyamlcidr">4.2.2 修改custom-resources.yaml中的网段cidr配置<a class="headerlink" href="#422-custom-resourcesyamlcidr" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>~#<span class="w"> </span>nano<span class="w"> </span>custom-resources.yaml
</span></code></pre></div>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="c1"># This section includes base Calico installation configuration.</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="c1"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="w"> </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operator.tigera.io/v1</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Installation</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="w"> </span><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="w"> </span><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a><span class="w">  </span><span class="c1"># Configures Calico networking.</span>
</span><span id="__span-92-9"><a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="w">  </span><span class="nt">calicoNetwork</span><span class="p">:</span>
</span><span id="__span-92-10"><a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a><span class="w">    </span><span class="c1"># Note: The ipPools section cannot be modified post-install.</span>
</span><span id="__span-92-11"><a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a><span class="w">    </span><span class="nt">ipPools</span><span class="p">:</span>
</span><span id="__span-92-12"><a id="__codelineno-92-12" name="__codelineno-92-12" href="#__codelineno-92-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">blockSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">26</span>
</span><span id="__span-92-13"><a id="__codelineno-92-13" name="__codelineno-92-13" href="#__codelineno-92-13"></a><span class="w">      </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.244.0.0/16</span><span class="w">                </span><span class="c1"># 修改此行内容为初始化时定义的pod network cidr</span>
</span><span id="__span-92-14"><a id="__codelineno-92-14" name="__codelineno-92-14" href="#__codelineno-92-14"></a><span class="w">      </span><span class="nt">encapsulation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VXLANCrossSubnet</span>
</span><span id="__span-92-15"><a id="__codelineno-92-15" name="__codelineno-92-15" href="#__codelineno-92-15"></a><span class="w">      </span><span class="nt">natOutgoing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span>
</span><span id="__span-92-16"><a id="__codelineno-92-16" name="__codelineno-92-16" href="#__codelineno-92-16"></a><span class="w">      </span><span class="nt">nodeSelector</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all()</span>
</span><span id="__span-92-17"><a id="__codelineno-92-17" name="__codelineno-92-17" href="#__codelineno-92-17"></a>
</span><span id="__span-92-18"><a id="__codelineno-92-18" name="__codelineno-92-18" href="#__codelineno-92-18"></a><span class="nn">---</span>
</span><span id="__span-92-19"><a id="__codelineno-92-19" name="__codelineno-92-19" href="#__codelineno-92-19"></a><span class="c1"># This section configures the Calico API server.</span>
</span><span id="__span-92-20"><a id="__codelineno-92-20" name="__codelineno-92-20" href="#__codelineno-92-20"></a><span class="c1"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer</span>
</span><span id="__span-92-21"><a id="__codelineno-92-21" name="__codelineno-92-21" href="#__codelineno-92-21"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operator.tigera.io/v1</span>
</span><span id="__span-92-22"><a id="__codelineno-92-22" name="__codelineno-92-22" href="#__codelineno-92-22"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">APIServer</span>
</span><span id="__span-92-23"><a id="__codelineno-92-23" name="__codelineno-92-23" href="#__codelineno-92-23"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-92-24"><a id="__codelineno-92-24" name="__codelineno-92-24" href="#__codelineno-92-24"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id="__span-92-25"><a id="__codelineno-92-25" name="__codelineno-92-25" href="#__codelineno-92-25"></a><span class="w w-Error"> </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</span></code></pre></div>
<ul>
<li>再次检查修改后的配置文件</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>~#<span class="w"> </span>cat<span class="w"> </span>custom-resources.yaml
</span></code></pre></div>
<h3 id="423">4.2.3 应用部署配置文件，进行部署<a class="headerlink" href="#423" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>custom-resources.yaml
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>installation.operator.tigera.io/default<span class="w"> </span>created
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>apiserver.operator.tigera.io/default<span class="w"> </span>created
</span></code></pre></div>
<h3 id="424-calico">4.2.4 检查calico安装结果<a class="headerlink" href="#424-calico" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>root@k8s-master01:~#<span class="w"> </span>watch<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>calico-system
</span></code></pre></div>
<p>经过一段时间的下载安装，全部署完成后大致如下输出所示：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>calico-system
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>NAME<span class="w">                                      </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>calico-kube-controllers-cf49d8944-6zv2z<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>calico-node-2nfvf<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>calico-node-nxhvj<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>calico-node-v9lp9<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>calico-typha-7b6f98bc78-49bf5<span class="w">             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-9"><a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>calico-typha-7b6f98bc78-7vhd6<span class="w">             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-10"><a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a>csi-node-driver-6nbvr<span class="w">                     </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-11"><a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>csi-node-driver-9cqq5<span class="w">                     </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m
</span><span id="__span-96-12"><a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>csi-node-driver-9pm4t<span class="w">                     </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>53m<span class="w">   </span>
</span></code></pre></div>
<p>查看节点状态变化：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>NAME<span class="w">           </span>STATUS<span class="w">   </span>ROLES<span class="w">           </span>AGE<span class="w">     </span>VERSION
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>k8s-master01<span class="w">   </span>Ready<span class="w">    </span>control-plane<span class="w">   </span>3h40m<span class="w">   </span>v1.32.3
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>k8s-worker01<span class="w">   </span>Ready<span class="w">    </span>&lt;none&gt;<span class="w">          </span>121m<span class="w">    </span>v1.32.3
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>k8s-worker02<span class="w">   </span>Ready<span class="w">    </span>&lt;none&gt;<span class="w">          </span>121m<span class="w">    </span>v1.32.3
</span></code></pre></div>
<p>查看pod状态</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>NAME<span class="w">                                   </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a>coredns-6766b7b6bb-6dtl7<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>coredns-6766b7b6bb-lrpw7<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>etcd-k8s-master01<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a>kube-apiserver-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>kube-controller-manager-k8s-master01<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a>kube-proxy-6g8dn<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>kube-proxy-kmzv6<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>122m
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>kube-proxy-pj2t5<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>122m
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a>kube-scheduler-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h42m
</span></code></pre></div>
<p>查看pod的IP及网段</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kube-system<span class="w"> </span>-o<span class="w"> </span>wide
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>NAME<span class="w">                                   </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE<span class="w">     </span>IP<span class="w">               </span>NODE<span class="w">           </span>NOMINATED<span class="w"> </span>NODE<span class="w">   </span>READINESS<span class="w"> </span>GATES
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a>coredns-6766b7b6bb-6dtl7<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h43m<span class="w">   </span><span class="m">10</span>.244.69.198<span class="w">    </span>k8s-worker02<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>coredns-6766b7b6bb-lrpw7<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h43m<span class="w">   </span><span class="m">10</span>.244.69.197<span class="w">    </span>k8s-worker02<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>etcd-k8s-master01<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h44m<span class="w">   </span><span class="m">192</span>.168.11.161<span class="w">   </span>k8s-master01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>kube-apiserver-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h44m<span class="w">   </span><span class="m">192</span>.168.11.161<span class="w">   </span>k8s-master01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>kube-controller-manager-k8s-master01<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h44m<span class="w">   </span><span class="m">192</span>.168.11.161<span class="w">   </span>k8s-master01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a>kube-proxy-6g8dn<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h43m<span class="w">   </span><span class="m">192</span>.168.11.161<span class="w">   </span>k8s-master01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a>kube-proxy-kmzv6<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>124m<span class="w">    </span><span class="m">192</span>.168.11.165<span class="w">   </span>k8s-worker01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-11"><a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a>kube-proxy-pj2t5<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>124m<span class="w">    </span><span class="m">192</span>.168.11.166<span class="w">   </span>k8s-worker02<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span><span id="__span-99-12"><a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a>kube-scheduler-k8s-master01<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>3h44m<span class="w">   </span><span class="m">192</span>.168.11.161<span class="w">   </span>k8s-master01<span class="w">   </span>&lt;none&gt;<span class="w">           </span>&lt;none&gt;
</span></code></pre></div>
<h1 id="nginxk8s">五、部署Nginx应用验证K8S集群可用性<a class="headerlink" href="#nginxk8s" title="Permanent link">&para;</a></h1>
<p>本章以Nginx为例，先添加nginx应用配置文件nginx.yaml，再添加相关应用配置</p>
<h2 id="51-nginxwebnginx-websiteyaml">5.1 配置NginxWeb部署配置文件nginx-website.yaml<a class="headerlink" href="#51-nginxwebnginx-websiteyaml" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a>root@k8s-master01:~#<span class="w"> </span>nano<span class="w"> </span>/home/acanx/nginx-website.yaml
</span></code></pre></div>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="nn">---</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxweb</span>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxwebsite</span>
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span>
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxwebsite</span>
</span><span id="__span-101-15"><a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-101-16"><a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
</span><span id="__span-101-17"><a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxwebsite</span>
</span><span id="__span-101-18"><a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a><span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:latest</span>
</span><span id="__span-101-19"><a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a><span class="w">        </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
</span><span id="__span-101-20"><a id="__codelineno-101-20" name="__codelineno-101-20" href="#__codelineno-101-20"></a><span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-101-21"><a id="__codelineno-101-21" name="__codelineno-101-21" href="#__codelineno-101-21"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-101-22"><a id="__codelineno-101-22" name="__codelineno-101-22" href="#__codelineno-101-22"></a><span class="nn">---</span>
</span><span id="__span-101-23"><a id="__codelineno-101-23" name="__codelineno-101-23" href="#__codelineno-101-23"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-101-24"><a id="__codelineno-101-24" name="__codelineno-101-24" href="#__codelineno-101-24"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
</span><span id="__span-101-25"><a id="__codelineno-101-25" name="__codelineno-101-25" href="#__codelineno-101-25"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-101-26"><a id="__codelineno-101-26" name="__codelineno-101-26" href="#__codelineno-101-26"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxweb-service</span>
</span><span id="__span-101-27"><a id="__codelineno-101-27" name="__codelineno-101-27" href="#__codelineno-101-27"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-101-28"><a id="__codelineno-101-28" name="__codelineno-101-28" href="#__codelineno-101-28"></a><span class="w">  </span><span class="nt">externalTrafficPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
</span><span id="__span-101-29"><a id="__codelineno-101-29" name="__codelineno-101-29" href="#__codelineno-101-29"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
</span><span id="__span-101-30"><a id="__codelineno-101-30" name="__codelineno-101-30" href="#__codelineno-101-30"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginxwebsite</span>
</span><span id="__span-101-31"><a id="__codelineno-101-31" name="__codelineno-101-31" href="#__codelineno-101-31"></a><span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-101-32"><a id="__codelineno-101-32" name="__codelineno-101-32" href="#__codelineno-101-32"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id="__span-101-33"><a id="__codelineno-101-33" name="__codelineno-101-33" href="#__codelineno-101-33"></a><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-101-34"><a id="__codelineno-101-34" name="__codelineno-101-34" href="#__codelineno-101-34"></a><span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-101-35"><a id="__codelineno-101-35" name="__codelineno-101-35" href="#__codelineno-101-35"></a><span class="w">    </span><span class="nt">nodePort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30080</span>
</span><span id="__span-101-36"><a id="__codelineno-101-36" name="__codelineno-101-36" href="#__codelineno-101-36"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodePort</span>
</span></code></pre></div>
<h2 id="52-nginx">5.2 执行命令部署nginx服务<a class="headerlink" href="#52-nginx" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>/home/acanx/nginx-website.yaml
</span></code></pre></div>
<div class="language-text highlight"><span class="filename">Text Only</span><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>deployment.apps/nginxweb created
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>service/nginxweb-service created
</span></code></pre></div>
<h2 id="53">5.3 检查部署结果<a class="headerlink" href="#53" title="Permanent link">&para;</a></h2>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>deployment
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>NAME<span class="w">       </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a>nginxweb<span class="w">   </span><span class="m">0</span>/3<span class="w">     </span><span class="m">3</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>2m35s
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>NAME<span class="w">                       </span>READY<span class="w">   </span>STATUS<span class="w">              </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>nginxweb-7c88f6c77-pck4f<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m43s
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>nginxweb-7c88f6c77-rv76n<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m43s
</span><span id="__span-105-6"><a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>nginxweb-7c88f6c77-vb8xj<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m43s
</span></code></pre></div>
<h3 id="531-k8s">5.3.1 测试K8S集群内访问<a class="headerlink" href="#531-k8s" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>service
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>NAME<span class="w">               </span>TYPE<span class="w">        </span>CLUSTER-IP<span class="w">      </span>EXTERNAL-IP<span class="w">   </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">        </span>AGE
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>kubernetes<span class="w">         </span>ClusterIP<span class="w">   </span><span class="m">10</span>.96.0.1<span class="w">       </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">        </span>4h11m
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>nginxweb-service<span class="w">   </span>NodePort<span class="w">    </span><span class="m">10</span>.106.65.218<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">80</span>:30080/TCP<span class="w">   </span>10m
</span><span id="__span-106-6"><a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>root@k8s-master01:~#<span class="w"> </span>curl<span class="w"> </span>http://10.106.65.218<span class="w">               </span>//<span class="w"> </span>验证在K8S集群内布访问
</span><span id="__span-106-7"><a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>
</span><span id="__span-106-8"><a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>&lt;!DOCTYPE<span class="w"> </span>html&gt;
</span><span id="__span-106-9"><a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>&lt;html&gt;
</span><span id="__span-106-10"><a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>&lt;head&gt;
</span><span id="__span-106-11"><a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>&lt;title&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/title&gt;
</span><span id="__span-106-12"><a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>&lt;style&gt;
</span><span id="__span-106-13"><a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>html<span class="w"> </span><span class="o">{</span><span class="w"> </span>color-scheme:<span class="w"> </span>light<span class="w"> </span>dark<span class="p">;</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-106-14"><a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a>body<span class="w"> </span><span class="o">{</span><span class="w"> </span>width:<span class="w"> </span>35em<span class="p">;</span><span class="w"> </span>margin:<span class="w"> </span><span class="m">0</span><span class="w"> </span>auto<span class="p">;</span>
</span><span id="__span-106-15"><a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a>font-family:<span class="w"> </span>Tahoma,<span class="w"> </span>Verdana,<span class="w"> </span>Arial,<span class="w"> </span>sans-serif<span class="p">;</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-106-16"><a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a>&lt;/style&gt;
</span><span id="__span-106-17"><a id="__codelineno-106-17" name="__codelineno-106-17" href="#__codelineno-106-17"></a>&lt;/head&gt;
</span><span id="__span-106-18"><a id="__codelineno-106-18" name="__codelineno-106-18" href="#__codelineno-106-18"></a>&lt;body&gt;
</span><span id="__span-106-19"><a id="__codelineno-106-19" name="__codelineno-106-19" href="#__codelineno-106-19"></a>&lt;h1&gt;Welcome<span class="w"> </span>to<span class="w"> </span>nginx!&lt;/h1&gt;
</span><span id="__span-106-20"><a id="__codelineno-106-20" name="__codelineno-106-20" href="#__codelineno-106-20"></a>&lt;p&gt;If<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>this<span class="w"> </span>page,<span class="w"> </span>the<span class="w"> </span>nginx<span class="w"> </span>web<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>successfully<span class="w"> </span>installed<span class="w"> </span>and
</span><span id="__span-106-21"><a id="__codelineno-106-21" name="__codelineno-106-21" href="#__codelineno-106-21"></a>working.<span class="w"> </span>Further<span class="w"> </span>configuration<span class="w"> </span>is<span class="w"> </span>required.&lt;/p&gt;
</span><span id="__span-106-22"><a id="__codelineno-106-22" name="__codelineno-106-22" href="#__codelineno-106-22"></a>
</span><span id="__span-106-23"><a id="__codelineno-106-23" name="__codelineno-106-23" href="#__codelineno-106-23"></a>&lt;p&gt;For<span class="w"> </span>online<span class="w"> </span>documentation<span class="w"> </span>and<span class="w"> </span>support<span class="w"> </span>please<span class="w"> </span>refer<span class="w"> </span>to
</span><span id="__span-106-24"><a id="__codelineno-106-24" name="__codelineno-106-24" href="#__codelineno-106-24"></a>&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span><span id="__span-106-25"><a id="__codelineno-106-25" name="__codelineno-106-25" href="#__codelineno-106-25"></a>Commercial<span class="w"> </span>support<span class="w"> </span>is<span class="w"> </span>available<span class="w"> </span>at
</span><span id="__span-106-26"><a id="__codelineno-106-26" name="__codelineno-106-26" href="#__codelineno-106-26"></a>&lt;a<span class="w"> </span><span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span><span id="__span-106-27"><a id="__codelineno-106-27" name="__codelineno-106-27" href="#__codelineno-106-27"></a>
</span><span id="__span-106-28"><a id="__codelineno-106-28" name="__codelineno-106-28" href="#__codelineno-106-28"></a>&lt;p&gt;&lt;em&gt;Thank<span class="w"> </span>you<span class="w"> </span><span class="k">for</span><span class="w"> </span>using<span class="w"> </span>nginx.&lt;/em&gt;&lt;/p&gt;
</span><span id="__span-106-29"><a id="__codelineno-106-29" name="__codelineno-106-29" href="#__codelineno-106-29"></a>&lt;/body&gt;
</span><span id="__span-106-30"><a id="__codelineno-106-30" name="__codelineno-106-30" href="#__codelineno-106-30"></a>&lt;/html&gt;
</span></code></pre></div>
<h3 id="532">5.3.2 测试集群外访问<a class="headerlink" href="#532" title="Permanent link">&para;</a></h3>
<p>打开集群外的局域网内内主机，正常情况下集群内任意一个节点IP加对应端口号都可以访问，实际分别测试访问 http://192.168.11.161:30080/ http://192.168.11.165:30080/  http://192.168.11.166:30080/ 页面，以上三个url链接均可以正常打开。</p>
<p>效果如下图所示：</p>
<p><a class="glightbox" href="/Node/imgs/03_02/Nginx-K8SMaster01.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Master01" src="/Node/imgs/03_02/Nginx-K8SMaster01.png" /></a>
<a class="glightbox" href="/Node/imgs/03_02/Nginx-K8SWorker01.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Worker01" src="/Node/imgs/03_02/Nginx-K8SWorker01.png" /></a>
<a class="glightbox" href="/Node/imgs/03_02/Nginx-K8SWorker02.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Worker02" src="/Node/imgs/03_02/Nginx-K8SWorker02.png" /></a></p>
<p>上述页面可以正常显示则说明nginx演示应用部署成功！</p>
<h1 id="kubernetes-dashboard">六、 部署Kubernetes Dashboard应用<a class="headerlink" href="#kubernetes-dashboard" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/">部署和访问 Kubernetes 仪表板（Dashboard）</a></li>
</ul>
<h2 id="61-helm">6.1 安装Helm<a class="headerlink" href="#61-helm" title="Permanent link">&para;</a></h2>
<h3 id="611-helm">6.1.1 Helm介绍及下载<a class="headerlink" href="#611-helm" title="Permanent link">&para;</a></h3>
<p>Helm 是查找、分享和使用软件构建 Kubernetes 的最优方式。</p>
<ul>
<li>官网 https://helm.sh/</li>
<li>项目地址 https://github.com/helm/helm</li>
<li>Helm安装文档 https://helm.sh/zh/docs/intro/install/</li>
</ul>
<h3 id="612-helm">6.1.2 Helm安装<a class="headerlink" href="#612-helm" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>root@k8s-master01:~#<span class="w"> </span>wget<span class="w"> </span>https://get.helm.sh/helm-v3.17.2-linux-amd64.tar.gz<span class="w">   </span><span class="c1"># 下载文件</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>root@k8s-master01:~#<span class="w"> </span>tar<span class="w"> </span>-zxvf<span class="w"> </span>/home/acanx/helm-v3.0.0-linux-amd64.tar.gz<span class="w">         </span><span class="c1"># 解压文件</span>
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>root@k8s-master01:~#<span class="w"> </span>sudo<span class="w"> </span>mv<span class="w"> </span>linux-amd64/helm<span class="w"> </span>/usr/local/bin/helm<span class="w">                    </span><span class="c1"># 移动到指定目录</span>
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>root@k8s-master01:~#<span class="w"> </span>sudo<span class="w"> </span>mv<span class="w"> </span>/home/acanx/helm<span class="w"> </span>/usr/local/bin/helm<span class="w">                    </span><span class="c1"># 移动到指定目录</span>
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a>
</span><span id="__span-107-8"><a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>root@k8s-master01:~#<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span>/usr/local/bin/helm
</span><span id="__span-107-9"><a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a>
</span><span id="__span-107-10"><a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>root@k8s-master01:~#<span class="w"> </span>chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>/usr/local/bin/helm
</span><span id="__span-107-11"><a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a>
</span><span id="__span-107-12"><a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a>root@k8s-master01:~#<span class="w"> </span>helm<span class="w"> </span>
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>root@k8s-master01:~#<span class="w"> </span>helm
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>The<span class="w"> </span>Kubernetes<span class="w"> </span>package<span class="w"> </span>manager
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>Common<span class="w"> </span>actions<span class="w"> </span><span class="k">for</span><span class="w"> </span>Helm:
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>-<span class="w"> </span>helm<span class="w"> </span>search:<span class="w">    </span>search<span class="w"> </span><span class="k">for</span><span class="w"> </span>charts
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>-<span class="w"> </span>helm<span class="w"> </span>pull:<span class="w">      </span>download<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>to<span class="w"> </span>your<span class="w"> </span><span class="nb">local</span><span class="w"> </span>directory<span class="w"> </span>to<span class="w"> </span>view
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>-<span class="w"> </span>helm<span class="w"> </span>install:<span class="w">   </span>upload<span class="w"> </span>the<span class="w"> </span>chart<span class="w"> </span>to<span class="w"> </span>Kubernetes
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>-<span class="w"> </span>helm<span class="w"> </span>list:<span class="w">      </span>list<span class="w"> </span>releases<span class="w"> </span>of<span class="w"> </span>charts
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a>Environment<span class="w"> </span>variables:
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a>
</span><span id="__span-108-14"><a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a><span class="p">|</span><span class="w"> </span>Name<span class="w">                               </span><span class="p">|</span><span class="w"> </span>Description<span class="w">                                                                                                </span><span class="p">|</span>
</span><span id="__span-108-15"><a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a><span class="p">|</span>------------------------------------<span class="p">|</span>------------------------------------------------------------------------------------------------------------<span class="p">|</span>
</span><span id="__span-108-16"><a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_CACHE_HOME</span><span class="w">                   </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>an<span class="w"> </span>alternative<span class="w"> </span>location<span class="w"> </span><span class="k">for</span><span class="w"> </span>storing<span class="w"> </span>cached<span class="w"> </span>files.<span class="w">                                                      </span><span class="p">|</span>
</span><span id="__span-108-17"><a id="__codelineno-108-17" name="__codelineno-108-17" href="#__codelineno-108-17"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_CONFIG_HOME</span><span class="w">                  </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>an<span class="w"> </span>alternative<span class="w"> </span>location<span class="w"> </span><span class="k">for</span><span class="w"> </span>storing<span class="w"> </span>Helm<span class="w"> </span>configuration.<span class="w">                                                </span><span class="p">|</span>
</span><span id="__span-108-18"><a id="__codelineno-108-18" name="__codelineno-108-18" href="#__codelineno-108-18"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_DATA_HOME</span><span class="w">                    </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>an<span class="w"> </span>alternative<span class="w"> </span>location<span class="w"> </span><span class="k">for</span><span class="w"> </span>storing<span class="w"> </span>Helm<span class="w"> </span>data.<span class="w">                                                         </span><span class="p">|</span>
</span><span id="__span-108-19"><a id="__codelineno-108-19" name="__codelineno-108-19" href="#__codelineno-108-19"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_DEBUG</span><span class="w">                        </span><span class="p">|</span><span class="w"> </span>indicate<span class="w"> </span>whether<span class="w"> </span>or<span class="w"> </span>not<span class="w"> </span>Helm<span class="w"> </span>is<span class="w"> </span>running<span class="w"> </span><span class="k">in</span><span class="w"> </span>Debug<span class="w"> </span>mode<span class="w">                                                      </span><span class="p">|</span>
</span><span id="__span-108-20"><a id="__codelineno-108-20" name="__codelineno-108-20" href="#__codelineno-108-20"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_DRIVER</span><span class="w">                       </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>backend<span class="w"> </span>storage<span class="w"> </span>driver.<span class="w"> </span>Values<span class="w"> </span>are:<span class="w"> </span>configmap,<span class="w"> </span>secret,<span class="w"> </span>memory,<span class="w"> </span>sql.<span class="w">                                </span><span class="p">|</span>
</span><span id="__span-108-21"><a id="__codelineno-108-21" name="__codelineno-108-21" href="#__codelineno-108-21"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_DRIVER_SQL_CONNECTION_STRING</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>connection<span class="w"> </span>string<span class="w"> </span>the<span class="w"> </span>SQL<span class="w"> </span>storage<span class="w"> </span>driver<span class="w"> </span>should<span class="w"> </span>use.<span class="w">                                               </span><span class="p">|</span>
</span><span id="__span-108-22"><a id="__codelineno-108-22" name="__codelineno-108-22" href="#__codelineno-108-22"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_MAX_HISTORY</span><span class="w">                  </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>maximum<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>helm<span class="w"> </span>release<span class="w"> </span>history.<span class="w">                                                            </span><span class="p">|</span>
</span><span id="__span-108-23"><a id="__codelineno-108-23" name="__codelineno-108-23" href="#__codelineno-108-23"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_NAMESPACE</span><span class="w">                    </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>namespace<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>helm<span class="w"> </span>operations.<span class="w">                                                            </span><span class="p">|</span>
</span><span id="__span-108-24"><a id="__codelineno-108-24" name="__codelineno-108-24" href="#__codelineno-108-24"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_NO_PLUGINS</span><span class="w">                   </span><span class="p">|</span><span class="w"> </span>disable<span class="w"> </span>plugins.<span class="w"> </span>Set<span class="w"> </span><span class="nv">HELM_NO_PLUGINS</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>to<span class="w"> </span>disable<span class="w"> </span>plugins.<span class="w">                                                 </span><span class="p">|</span>
</span><span id="__span-108-25"><a id="__codelineno-108-25" name="__codelineno-108-25" href="#__codelineno-108-25"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_PLUGINS</span><span class="w">                      </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>plugins<span class="w"> </span>directory<span class="w">                                                                      </span><span class="p">|</span>
</span><span id="__span-108-26"><a id="__codelineno-108-26" name="__codelineno-108-26" href="#__codelineno-108-26"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_REGISTRY_CONFIG</span><span class="w">              </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>registry<span class="w"> </span>config<span class="w"> </span>file.<span class="w">                                                                  </span><span class="p">|</span>
</span><span id="__span-108-27"><a id="__codelineno-108-27" name="__codelineno-108-27" href="#__codelineno-108-27"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_REPOSITORY_CACHE</span><span class="w">             </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>repository<span class="w"> </span>cache<span class="w"> </span>directory<span class="w">                                                             </span><span class="p">|</span>
</span><span id="__span-108-28"><a id="__codelineno-108-28" name="__codelineno-108-28" href="#__codelineno-108-28"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_REPOSITORY_CONFIG</span><span class="w">            </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>repositories<span class="w"> </span>file.<span class="w">                                                                     </span><span class="p">|</span>
</span><span id="__span-108-29"><a id="__codelineno-108-29" name="__codelineno-108-29" href="#__codelineno-108-29"></a><span class="p">|</span><span class="w"> </span><span class="nv">$KUBECONFIG</span><span class="w">                        </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>an<span class="w"> </span>alternative<span class="w"> </span>Kubernetes<span class="w"> </span>configuration<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>default<span class="w"> </span><span class="s2">&quot;~/.kube/config&quot;</span><span class="o">)</span><span class="w">                                </span><span class="p">|</span>
</span><span id="__span-108-30"><a id="__codelineno-108-30" name="__codelineno-108-30" href="#__codelineno-108-30"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBEAPISERVER</span><span class="w">                </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>Server<span class="w"> </span>Endpoint<span class="w"> </span><span class="k">for</span><span class="w"> </span>authentication<span class="w">                                                  </span><span class="p">|</span>
</span><span id="__span-108-31"><a id="__codelineno-108-31" name="__codelineno-108-31" href="#__codelineno-108-31"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBECAFILE</span><span class="w">                   </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>certificate<span class="w"> </span>authority<span class="w"> </span>file.<span class="w">                                                             </span><span class="p">|</span>
</span><span id="__span-108-32"><a id="__codelineno-108-32" name="__codelineno-108-32" href="#__codelineno-108-32"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBEASGROUPS</span><span class="w">                 </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>Groups<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span><span class="k">for</span><span class="w"> </span>impersonation<span class="w"> </span>using<span class="w"> </span>a<span class="w"> </span>comma-separated<span class="w"> </span>list.<span class="w">                                      </span><span class="p">|</span>
</span><span id="__span-108-33"><a id="__codelineno-108-33" name="__codelineno-108-33" href="#__codelineno-108-33"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBEASUSER</span><span class="w">                   </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>Username<span class="w"> </span>to<span class="w"> </span>impersonate<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>operation.<span class="w">                                                         </span><span class="p">|</span>
</span><span id="__span-108-34"><a id="__codelineno-108-34" name="__codelineno-108-34" href="#__codelineno-108-34"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBECONTEXT</span><span class="w">                  </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>kubeconfig<span class="w"> </span>context.<span class="w">                                                                    </span><span class="p">|</span>
</span><span id="__span-108-35"><a id="__codelineno-108-35" name="__codelineno-108-35" href="#__codelineno-108-35"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBETOKEN</span><span class="w">                    </span><span class="p">|</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>Bearer<span class="w"> </span>KubeToken<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>authentication.<span class="w">                                                          </span><span class="p">|</span>
</span><span id="__span-108-36"><a id="__codelineno-108-36" name="__codelineno-108-36" href="#__codelineno-108-36"></a><span class="p">|</span><span class="w"> </span><span class="nv">$HELM_KUBEINSECURE_SKIP_TLS_VERIFY</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>indicate<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>server<span class="s1">&#39;s certificate validation should be skipped (insecure)                |</span>
</span><span id="__span-108-37"><a id="__codelineno-108-37" name="__codelineno-108-37" href="#__codelineno-108-37"></a><span class="s1">| $HELM_KUBETLS_SERVER_NAME          | set the server name used to validate the Kubernetes API server certificate                                 |</span>
</span><span id="__span-108-38"><a id="__codelineno-108-38" name="__codelineno-108-38" href="#__codelineno-108-38"></a><span class="s1">| $HELM_BURST_LIMIT                  | set the default burst limit in the case the server contains many CRDs (default 100, -1 to disable)         |</span>
</span><span id="__span-108-39"><a id="__codelineno-108-39" name="__codelineno-108-39" href="#__codelineno-108-39"></a><span class="s1">| $HELM_QPS                          | set the Queries Per Second in cases where a high number of calls exceed the option for higher burst values |</span>
</span><span id="__span-108-40"><a id="__codelineno-108-40" name="__codelineno-108-40" href="#__codelineno-108-40"></a>
</span><span id="__span-108-41"><a id="__codelineno-108-41" name="__codelineno-108-41" href="#__codelineno-108-41"></a><span class="s1">Helm stores cache, configuration, and data based on the following configuration order:</span>
</span><span id="__span-108-42"><a id="__codelineno-108-42" name="__codelineno-108-42" href="#__codelineno-108-42"></a>
</span><span id="__span-108-43"><a id="__codelineno-108-43" name="__codelineno-108-43" href="#__codelineno-108-43"></a><span class="s1">- If a HELM_*_HOME environment variable is set, it will be used</span>
</span><span id="__span-108-44"><a id="__codelineno-108-44" name="__codelineno-108-44" href="#__codelineno-108-44"></a><span class="s1">- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used</span>
</span><span id="__span-108-45"><a id="__codelineno-108-45" name="__codelineno-108-45" href="#__codelineno-108-45"></a><span class="s1">- When no other location is set a default location will be used based on the operating system</span>
</span><span id="__span-108-46"><a id="__codelineno-108-46" name="__codelineno-108-46" href="#__codelineno-108-46"></a>
</span><span id="__span-108-47"><a id="__codelineno-108-47" name="__codelineno-108-47" href="#__codelineno-108-47"></a><span class="s1">By default, the default directories depend on the Operating System. The defaults are listed below:</span>
</span><span id="__span-108-48"><a id="__codelineno-108-48" name="__codelineno-108-48" href="#__codelineno-108-48"></a>
</span><span id="__span-108-49"><a id="__codelineno-108-49" name="__codelineno-108-49" href="#__codelineno-108-49"></a><span class="s1">| Operating System | Cache Path                | Configuration Path             | Data Path               |</span>
</span><span id="__span-108-50"><a id="__codelineno-108-50" name="__codelineno-108-50" href="#__codelineno-108-50"></a><span class="s1">|------------------|---------------------------|--------------------------------|-------------------------|</span>
</span><span id="__span-108-51"><a id="__codelineno-108-51" name="__codelineno-108-51" href="#__codelineno-108-51"></a><span class="s1">| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |</span>
</span><span id="__span-108-52"><a id="__codelineno-108-52" name="__codelineno-108-52" href="#__codelineno-108-52"></a><span class="s1">| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |</span>
</span><span id="__span-108-53"><a id="__codelineno-108-53" name="__codelineno-108-53" href="#__codelineno-108-53"></a><span class="s1">| Windows          | %TEMP%\helm               | %APPDATA%\helm                 | %APPDATA%\helm          |</span>
</span><span id="__span-108-54"><a id="__codelineno-108-54" name="__codelineno-108-54" href="#__codelineno-108-54"></a>
</span><span id="__span-108-55"><a id="__codelineno-108-55" name="__codelineno-108-55" href="#__codelineno-108-55"></a><span class="s1">Usage:</span>
</span><span id="__span-108-56"><a id="__codelineno-108-56" name="__codelineno-108-56" href="#__codelineno-108-56"></a><span class="s1">  helm [command]</span>
</span><span id="__span-108-57"><a id="__codelineno-108-57" name="__codelineno-108-57" href="#__codelineno-108-57"></a>
</span><span id="__span-108-58"><a id="__codelineno-108-58" name="__codelineno-108-58" href="#__codelineno-108-58"></a><span class="s1">Available Commands:</span>
</span><span id="__span-108-59"><a id="__codelineno-108-59" name="__codelineno-108-59" href="#__codelineno-108-59"></a><span class="s1">  completion  generate autocompletion scripts for the specified shell</span>
</span><span id="__span-108-60"><a id="__codelineno-108-60" name="__codelineno-108-60" href="#__codelineno-108-60"></a><span class="s1">  create      create a new chart with the given name</span>
</span><span id="__span-108-61"><a id="__codelineno-108-61" name="__codelineno-108-61" href="#__codelineno-108-61"></a><span class="s1">  dependency  manage a chart&#39;</span>s<span class="w"> </span>dependencies
</span><span id="__span-108-62"><a id="__codelineno-108-62" name="__codelineno-108-62" href="#__codelineno-108-62"></a><span class="w">  </span>env<span class="w">         </span>helm<span class="w"> </span>client<span class="w"> </span>environment<span class="w"> </span>information
</span><span id="__span-108-63"><a id="__codelineno-108-63" name="__codelineno-108-63" href="#__codelineno-108-63"></a><span class="w">  </span>get<span class="w">         </span>download<span class="w"> </span>extended<span class="w"> </span>information<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>named<span class="w"> </span>release
</span><span id="__span-108-64"><a id="__codelineno-108-64" name="__codelineno-108-64" href="#__codelineno-108-64"></a><span class="w">  </span><span class="nb">help</span><span class="w">        </span>Help<span class="w"> </span>about<span class="w"> </span>any<span class="w"> </span><span class="nb">command</span>
</span><span id="__span-108-65"><a id="__codelineno-108-65" name="__codelineno-108-65" href="#__codelineno-108-65"></a><span class="w">  </span><span class="nb">history</span><span class="w">     </span>fetch<span class="w"> </span>release<span class="w"> </span><span class="nb">history</span>
</span><span id="__span-108-66"><a id="__codelineno-108-66" name="__codelineno-108-66" href="#__codelineno-108-66"></a><span class="w">  </span>install<span class="w">     </span>install<span class="w"> </span>a<span class="w"> </span>chart
</span><span id="__span-108-67"><a id="__codelineno-108-67" name="__codelineno-108-67" href="#__codelineno-108-67"></a><span class="w">  </span>lint<span class="w">        </span>examine<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>possible<span class="w"> </span>issues
</span><span id="__span-108-68"><a id="__codelineno-108-68" name="__codelineno-108-68" href="#__codelineno-108-68"></a><span class="w">  </span>list<span class="w">        </span>list<span class="w"> </span>releases
</span><span id="__span-108-69"><a id="__codelineno-108-69" name="__codelineno-108-69" href="#__codelineno-108-69"></a><span class="w">  </span>package<span class="w">     </span>package<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>directory<span class="w"> </span>into<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>archive
</span><span id="__span-108-70"><a id="__codelineno-108-70" name="__codelineno-108-70" href="#__codelineno-108-70"></a><span class="w">  </span>plugin<span class="w">      </span>install,<span class="w"> </span>list,<span class="w"> </span>or<span class="w"> </span>uninstall<span class="w"> </span>Helm<span class="w"> </span>plugins
</span><span id="__span-108-71"><a id="__codelineno-108-71" name="__codelineno-108-71" href="#__codelineno-108-71"></a><span class="w">  </span>pull<span class="w">        </span>download<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>repository<span class="w"> </span>and<span class="w"> </span><span class="o">(</span>optionally<span class="o">)</span><span class="w"> </span>unpack<span class="w"> </span>it<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>directory
</span><span id="__span-108-72"><a id="__codelineno-108-72" name="__codelineno-108-72" href="#__codelineno-108-72"></a><span class="w">  </span>push<span class="w">        </span>push<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>to<span class="w"> </span>remote
</span><span id="__span-108-73"><a id="__codelineno-108-73" name="__codelineno-108-73" href="#__codelineno-108-73"></a><span class="w">  </span>registry<span class="w">    </span>login<span class="w"> </span>to<span class="w"> </span>or<span class="w"> </span><span class="nb">logout</span><span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>registry
</span><span id="__span-108-74"><a id="__codelineno-108-74" name="__codelineno-108-74" href="#__codelineno-108-74"></a><span class="w">  </span>repo<span class="w">        </span>add,<span class="w"> </span>list,<span class="w"> </span>remove,<span class="w"> </span>update,<span class="w"> </span>and<span class="w"> </span>index<span class="w"> </span>chart<span class="w"> </span>repositories
</span><span id="__span-108-75"><a id="__codelineno-108-75" name="__codelineno-108-75" href="#__codelineno-108-75"></a><span class="w">  </span>rollback<span class="w">    </span>roll<span class="w"> </span>back<span class="w"> </span>a<span class="w"> </span>release<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>previous<span class="w"> </span>revision
</span><span id="__span-108-76"><a id="__codelineno-108-76" name="__codelineno-108-76" href="#__codelineno-108-76"></a><span class="w">  </span>search<span class="w">      </span>search<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>keyword<span class="w"> </span><span class="k">in</span><span class="w"> </span>charts
</span><span id="__span-108-77"><a id="__codelineno-108-77" name="__codelineno-108-77" href="#__codelineno-108-77"></a><span class="w">  </span>show<span class="w">        </span>show<span class="w"> </span>information<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>chart
</span><span id="__span-108-78"><a id="__codelineno-108-78" name="__codelineno-108-78" href="#__codelineno-108-78"></a><span class="w">  </span>status<span class="w">      </span>display<span class="w"> </span>the<span class="w"> </span>status<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>named<span class="w"> </span>release
</span><span id="__span-108-79"><a id="__codelineno-108-79" name="__codelineno-108-79" href="#__codelineno-108-79"></a><span class="w">  </span>template<span class="w">    </span>locally<span class="w"> </span>render<span class="w"> </span>templates
</span><span id="__span-108-80"><a id="__codelineno-108-80" name="__codelineno-108-80" href="#__codelineno-108-80"></a><span class="w">  </span><span class="nb">test</span><span class="w">        </span>run<span class="w"> </span>tests<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>release
</span><span id="__span-108-81"><a id="__codelineno-108-81" name="__codelineno-108-81" href="#__codelineno-108-81"></a><span class="w">  </span>uninstall<span class="w">   </span>uninstall<span class="w"> </span>a<span class="w"> </span>release
</span><span id="__span-108-82"><a id="__codelineno-108-82" name="__codelineno-108-82" href="#__codelineno-108-82"></a><span class="w">  </span>upgrade<span class="w">     </span>upgrade<span class="w"> </span>a<span class="w"> </span>release
</span><span id="__span-108-83"><a id="__codelineno-108-83" name="__codelineno-108-83" href="#__codelineno-108-83"></a><span class="w">  </span>verify<span class="w">      </span>verify<span class="w"> </span>that<span class="w"> </span>a<span class="w"> </span>chart<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>given<span class="w"> </span>path<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>signed<span class="w"> </span>and<span class="w"> </span>is<span class="w"> </span>valid
</span><span id="__span-108-84"><a id="__codelineno-108-84" name="__codelineno-108-84" href="#__codelineno-108-84"></a><span class="w">  </span>version<span class="w">     </span>print<span class="w"> </span>the<span class="w"> </span>client<span class="w"> </span>version<span class="w"> </span>information
</span><span id="__span-108-85"><a id="__codelineno-108-85" name="__codelineno-108-85" href="#__codelineno-108-85"></a>
</span><span id="__span-108-86"><a id="__codelineno-108-86" name="__codelineno-108-86" href="#__codelineno-108-86"></a>Flags:
</span><span id="__span-108-87"><a id="__codelineno-108-87" name="__codelineno-108-87" href="#__codelineno-108-87"></a><span class="w">      </span>--burst-limit<span class="w"> </span>int<span class="w">                 </span>client-side<span class="w"> </span>default<span class="w"> </span>throttling<span class="w"> </span>limit<span class="w"> </span><span class="o">(</span>default<span class="w"> </span><span class="m">100</span><span class="o">)</span>
</span><span id="__span-108-88"><a id="__codelineno-108-88" name="__codelineno-108-88" href="#__codelineno-108-88"></a><span class="w">      </span>--debug<span class="w">                           </span><span class="nb">enable</span><span class="w"> </span>verbose<span class="w"> </span>output
</span><span id="__span-108-89"><a id="__codelineno-108-89" name="__codelineno-108-89" href="#__codelineno-108-89"></a><span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">                            </span><span class="nb">help</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>helm
</span><span id="__span-108-90"><a id="__codelineno-108-90" name="__codelineno-108-90" href="#__codelineno-108-90"></a><span class="w">      </span>--kube-apiserver<span class="w"> </span>string<span class="w">           </span>the<span class="w"> </span>address<span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>port<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>server
</span><span id="__span-108-91"><a id="__codelineno-108-91" name="__codelineno-108-91" href="#__codelineno-108-91"></a><span class="w">      </span>--kube-as-group<span class="w"> </span>stringArray<span class="w">       </span>group<span class="w"> </span>to<span class="w"> </span>impersonate<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>operation,<span class="w"> </span>this<span class="w"> </span>flag<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>repeated<span class="w"> </span>to<span class="w"> </span>specify<span class="w"> </span>multiple<span class="w"> </span>groups.
</span><span id="__span-108-92"><a id="__codelineno-108-92" name="__codelineno-108-92" href="#__codelineno-108-92"></a><span class="w">      </span>--kube-as-user<span class="w"> </span>string<span class="w">             </span>username<span class="w"> </span>to<span class="w"> </span>impersonate<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>operation
</span><span id="__span-108-93"><a id="__codelineno-108-93" name="__codelineno-108-93" href="#__codelineno-108-93"></a><span class="w">      </span>--kube-ca-file<span class="w"> </span>string<span class="w">             </span>the<span class="w"> </span>certificate<span class="w"> </span>authority<span class="w"> </span>file<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>server<span class="w"> </span>connection
</span><span id="__span-108-94"><a id="__codelineno-108-94" name="__codelineno-108-94" href="#__codelineno-108-94"></a><span class="w">      </span>--kube-context<span class="w"> </span>string<span class="w">             </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>kubeconfig<span class="w"> </span>context<span class="w"> </span>to<span class="w"> </span>use
</span><span id="__span-108-95"><a id="__codelineno-108-95" name="__codelineno-108-95" href="#__codelineno-108-95"></a><span class="w">      </span>--kube-insecure-skip-tls-verify<span class="w">   </span><span class="k">if</span><span class="w"> </span>true,<span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>server<span class="err">&#39;</span>s<span class="w"> </span>certificate<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>checked<span class="w"> </span><span class="k">for</span><span class="w"> </span>validity.<span class="w"> </span>This<span class="w"> </span>will<span class="w"> </span>make<span class="w"> </span>your<span class="w"> </span>HTTPS<span class="w"> </span>connections<span class="w"> </span>insecure
</span><span id="__span-108-96"><a id="__codelineno-108-96" name="__codelineno-108-96" href="#__codelineno-108-96"></a><span class="w">      </span>--kube-tls-server-name<span class="w"> </span>string<span class="w">     </span>server<span class="w"> </span>name<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span><span class="k">for</span><span class="w"> </span>Kubernetes<span class="w"> </span>API<span class="w"> </span>server<span class="w"> </span>certificate<span class="w"> </span>validation.<span class="w"> </span>If<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>provided,<span class="w"> </span>the<span class="w"> </span>hostname<span class="w"> </span>used<span class="w"> </span>to<span class="w"> </span>contact<span class="w"> </span>the<span class="w"> </span>server<span class="w"> </span>is<span class="w"> </span>used
</span><span id="__span-108-97"><a id="__codelineno-108-97" name="__codelineno-108-97" href="#__codelineno-108-97"></a><span class="w">      </span>--kube-token<span class="w"> </span>string<span class="w">               </span>bearer<span class="w"> </span>token<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>authentication
</span><span id="__span-108-98"><a id="__codelineno-108-98" name="__codelineno-108-98" href="#__codelineno-108-98"></a><span class="w">      </span>--kubeconfig<span class="w"> </span>string<span class="w">               </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>kubeconfig<span class="w"> </span>file
</span><span id="__span-108-99"><a id="__codelineno-108-99" name="__codelineno-108-99" href="#__codelineno-108-99"></a><span class="w">  </span>-n,<span class="w"> </span>--namespace<span class="w"> </span>string<span class="w">                </span>namespace<span class="w"> </span>scope<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>request
</span><span id="__span-108-100"><a id="__codelineno-108-100" name="__codelineno-108-100" href="#__codelineno-108-100"></a><span class="w">      </span>--qps<span class="w"> </span>float32<span class="w">                     </span>queries<span class="w"> </span>per<span class="w"> </span>second<span class="w"> </span>used<span class="w"> </span>when<span class="w"> </span>communicating<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>Kubernetes<span class="w"> </span>API,<span class="w"> </span>not<span class="w"> </span>including<span class="w"> </span>bursting
</span><span id="__span-108-101"><a id="__codelineno-108-101" name="__codelineno-108-101" href="#__codelineno-108-101"></a><span class="w">      </span>--registry-config<span class="w"> </span>string<span class="w">          </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>registry<span class="w"> </span>config<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>default<span class="w"> </span><span class="s2">&quot;/root/.config/helm/registry/config.json&quot;</span><span class="o">)</span>
</span><span id="__span-108-102"><a id="__codelineno-108-102" name="__codelineno-108-102" href="#__codelineno-108-102"></a><span class="w">      </span>--repository-cache<span class="w"> </span>string<span class="w">         </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>directory<span class="w"> </span>containing<span class="w"> </span>cached<span class="w"> </span>repository<span class="w"> </span>indexes<span class="w"> </span><span class="o">(</span>default<span class="w"> </span><span class="s2">&quot;/root/.cache/helm/repository&quot;</span><span class="o">)</span>
</span><span id="__span-108-103"><a id="__codelineno-108-103" name="__codelineno-108-103" href="#__codelineno-108-103"></a><span class="w">      </span>--repository-config<span class="w"> </span>string<span class="w">        </span>path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>containing<span class="w"> </span>repository<span class="w"> </span>names<span class="w"> </span>and<span class="w"> </span>URLs<span class="w"> </span><span class="o">(</span>default<span class="w"> </span><span class="s2">&quot;/root/.config/helm/repositories.yaml&quot;</span><span class="o">)</span>
</span><span id="__span-108-104"><a id="__codelineno-108-104" name="__codelineno-108-104" href="#__codelineno-108-104"></a>
</span><span id="__span-108-105"><a id="__codelineno-108-105" name="__codelineno-108-105" href="#__codelineno-108-105"></a>Use<span class="w"> </span><span class="s2">&quot;helm [command] --help&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>a<span class="w"> </span>command.
</span><span id="__span-108-106"><a id="__codelineno-108-106" name="__codelineno-108-106" href="#__codelineno-108-106"></a>root@k8s-master01:~#<span class="w"> </span>
</span></code></pre></div>
<p>若输出上述内容，则说明安装成功</p>
<h2 id="62-kubernetes-dashboard">6.2 安装kubernetes-dashboard<a class="headerlink" href="#62-kubernetes-dashboard" title="Permanent link">&para;</a></h2>
<h3 id="621-kubernetes-dashboard">6.2.1 添加 kubernetes-dashboard 仓库<a class="headerlink" href="#621-kubernetes-dashboard" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>https://kubernetes.github.io/dashboard/
</span></code></pre></div>
<ul>
<li>/root/.cache/helm/repository/kubernetes-dashboard-charts.txt</li>
<li>/root/.cache/helm/repository/kubernetes-dashboard-index.yaml</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>root@k8s-master01:~/.cache/helm/repository#<span class="w"> </span>helm<span class="w"> </span>repo<span class="w"> </span>list
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a>NAME<span class="w">                    </span>URL<span class="w">                                    </span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>kubernetes-dashboard<span class="w">    </span>https://kubernetes.github.io/dashboard/
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>root@k8s-master01:~/.cache/helm/repository#<span class="w"> </span>
</span></code></pre></div>
<h3 id="622-kubernetes-dashboard-chart-kubernetes-dashboard-helm-release">6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release<a class="headerlink" href="#622-kubernetes-dashboard-chart-kubernetes-dashboard-helm-release" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>kubernetes-dashboard/kubernetes-dashboard<span class="w"> </span>--create-namespace<span class="w"> </span>--namespace<span class="w"> </span>kubernetes-dashboard
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>root@k8s-master01:~#<span class="w"> </span>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>kubernetes-dashboard/kubernetes-dashboard<span class="w"> </span>--create-namespace<span class="w"> </span>--namespace<span class="w"> </span>kubernetes-dashboard
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a>
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a>Release<span class="w"> </span><span class="s2">&quot;kubernetes-dashboard&quot;</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.<span class="w"> </span>Installing<span class="w"> </span>it<span class="w"> </span>now.
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a>NAME:<span class="w"> </span>kubernetes-dashboard
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a>LAST<span class="w"> </span>DEPLOYED:<span class="w"> </span>Sun<span class="w"> </span>Mar<span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">17</span>:44:31<span class="w"> </span><span class="m">2025</span>
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a>NAMESPACE:<span class="w"> </span>kubernetes-dashboard
</span><span id="__span-112-7"><a id="__codelineno-112-7" name="__codelineno-112-7" href="#__codelineno-112-7"></a>STATUS:<span class="w"> </span>deployed
</span><span id="__span-112-8"><a id="__codelineno-112-8" name="__codelineno-112-8" href="#__codelineno-112-8"></a>REVISION:<span class="w"> </span><span class="m">1</span>
</span><span id="__span-112-9"><a id="__codelineno-112-9" name="__codelineno-112-9" href="#__codelineno-112-9"></a>TEST<span class="w"> </span>SUITE:<span class="w"> </span>None
</span><span id="__span-112-10"><a id="__codelineno-112-10" name="__codelineno-112-10" href="#__codelineno-112-10"></a>NOTES:
</span><span id="__span-112-11"><a id="__codelineno-112-11" name="__codelineno-112-11" href="#__codelineno-112-11"></a>*************************************************************************************************
</span><span id="__span-112-12"><a id="__codelineno-112-12" name="__codelineno-112-12" href="#__codelineno-112-12"></a>***<span class="w"> </span>PLEASE<span class="w"> </span>BE<span class="w"> </span>PATIENT:<span class="w"> </span>Kubernetes<span class="w"> </span>Dashboard<span class="w"> </span>may<span class="w"> </span>need<span class="w"> </span>a<span class="w"> </span>few<span class="w"> </span>minutes<span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>up<span class="w"> </span>and<span class="w"> </span>become<span class="w"> </span>ready<span class="w"> </span>***
</span><span id="__span-112-13"><a id="__codelineno-112-13" name="__codelineno-112-13" href="#__codelineno-112-13"></a>*************************************************************************************************
</span><span id="__span-112-14"><a id="__codelineno-112-14" name="__codelineno-112-14" href="#__codelineno-112-14"></a>
</span><span id="__span-112-15"><a id="__codelineno-112-15" name="__codelineno-112-15" href="#__codelineno-112-15"></a>Congratulations!<span class="w"> </span>You<span class="w"> </span>have<span class="w"> </span>just<span class="w"> </span>installed<span class="w"> </span>Kubernetes<span class="w"> </span>Dashboard<span class="w"> </span><span class="k">in</span><span class="w"> </span>your<span class="w"> </span>cluster.
</span><span id="__span-112-16"><a id="__codelineno-112-16" name="__codelineno-112-16" href="#__codelineno-112-16"></a>
</span><span id="__span-112-17"><a id="__codelineno-112-17" name="__codelineno-112-17" href="#__codelineno-112-17"></a>To<span class="w"> </span>access<span class="w"> </span>Dashboard<span class="w"> </span>run:
</span><span id="__span-112-18"><a id="__codelineno-112-18" name="__codelineno-112-18" href="#__codelineno-112-18"></a><span class="w">  </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>port-forward<span class="w"> </span>svc/kubernetes-dashboard-kong-proxy<span class="w"> </span><span class="m">8443</span>:443
</span><span id="__span-112-19"><a id="__codelineno-112-19" name="__codelineno-112-19" href="#__codelineno-112-19"></a>
</span><span id="__span-112-20"><a id="__codelineno-112-20" name="__codelineno-112-20" href="#__codelineno-112-20"></a>NOTE:<span class="w"> </span>In<span class="w"> </span><span class="k">case</span><span class="w"> </span>port-forward<span class="w"> </span><span class="nb">command</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>work,<span class="w"> </span>make<span class="w"> </span>sure<span class="w"> </span>that<span class="w"> </span>kong<span class="w"> </span>service<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span>correct.
</span><span id="__span-112-21"><a id="__codelineno-112-21" name="__codelineno-112-21" href="#__codelineno-112-21"></a><span class="w">      </span>Check<span class="w"> </span>the<span class="w"> </span>services<span class="w"> </span><span class="k">in</span><span class="w"> </span>Kubernetes<span class="w"> </span>Dashboard<span class="w"> </span>namespace<span class="w"> </span>using:
</span><span id="__span-112-22"><a id="__codelineno-112-22" name="__codelineno-112-22" href="#__codelineno-112-22"></a><span class="w">        </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>get<span class="w"> </span>svc
</span><span id="__span-112-23"><a id="__codelineno-112-23" name="__codelineno-112-23" href="#__codelineno-112-23"></a>
</span><span id="__span-112-24"><a id="__codelineno-112-24" name="__codelineno-112-24" href="#__codelineno-112-24"></a>Dashboard<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>available<span class="w"> </span>at:
</span><span id="__span-112-25"><a id="__codelineno-112-25" name="__codelineno-112-25" href="#__codelineno-112-25"></a><span class="w">  </span>https://localhost:8443
</span><span id="__span-112-26"><a id="__codelineno-112-26" name="__codelineno-112-26" href="#__codelineno-112-26"></a>root@k8s-master01:~#<span class="w"> </span>
</span><span id="__span-112-27"><a id="__codelineno-112-27" name="__codelineno-112-27" href="#__codelineno-112-27"></a>
</span><span id="__span-112-28"><a id="__codelineno-112-28" name="__codelineno-112-28" href="#__codelineno-112-28"></a>
</span><span id="__span-112-29"><a id="__codelineno-112-29" name="__codelineno-112-29" href="#__codelineno-112-29"></a>
</span><span id="__span-112-30"><a id="__codelineno-112-30" name="__codelineno-112-30" href="#__codelineno-112-30"></a><span class="c1"># 注意：以下命令未做验证，后续可以测试确认</span>
</span><span id="__span-112-31"><a id="__codelineno-112-31" name="__codelineno-112-31" href="#__codelineno-112-31"></a><span class="c1"># 我的集群使用默认参数安装 kubernetes-dashboard-kong 出现异常 8444 端口占用</span>
</span><span id="__span-112-32"><a id="__codelineno-112-32" name="__codelineno-112-32" href="#__codelineno-112-32"></a><span class="c1"># 使用下面的命令进行安装，在安装时关闭kong.tls功能</span>
</span><span id="__span-112-33"><a id="__codelineno-112-33" name="__codelineno-112-33" href="#__codelineno-112-33"></a>root@k8s-master01:~#<span class="w"> </span>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>kubernetes-dashboard/kubernetes-dashboard<span class="w"> </span>--namespace<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>--set<span class="w"> </span>kong.admin.tls.enabled<span class="o">=</span><span class="nb">false</span><span class="w">   </span><span class="c1"># 原文链接：https://blog.csdn.net/qq_33921750/article/details/136668014</span>
</span></code></pre></div>
<h4 id="kubernetes-dashboardpod">查看kubernetes-dashboard相关的pod的安装情况<a class="headerlink" href="#kubernetes-dashboardpod" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>root@k8s-master01:~#<span class="w"> </span>watch<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>-A
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a>NAMESPACE<span class="w">              </span>NAME<span class="w">                                                    </span>READY<span class="w">   </span>STATUS<span class="w">              </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>calico-apiserver<span class="w">       </span>calico-apiserver-7b7bbf4d75-b77ph<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>calico-apiserver<span class="w">       </span>calico-apiserver-7b7bbf4d75-gqq5w<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>calico-system<span class="w">          </span>calico-kube-controllers-cf49d8944-6zv2z<span class="w">                 </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-7"><a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a>calico-system<span class="w">          </span>calico-node-2nfvf<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-8"><a id="__codelineno-113-8" name="__codelineno-113-8" href="#__codelineno-113-8"></a>calico-system<span class="w">          </span>calico-node-nxhvj<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-9"><a id="__codelineno-113-9" name="__codelineno-113-9" href="#__codelineno-113-9"></a>calico-system<span class="w">          </span>calico-node-v9lp9<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-10"><a id="__codelineno-113-10" name="__codelineno-113-10" href="#__codelineno-113-10"></a>calico-system<span class="w">          </span>calico-typha-7b6f98bc78-49bf5<span class="w">                           </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-11"><a id="__codelineno-113-11" name="__codelineno-113-11" href="#__codelineno-113-11"></a>calico-system<span class="w">          </span>calico-typha-7b6f98bc78-7vhd6<span class="w">                           </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-12"><a id="__codelineno-113-12" name="__codelineno-113-12" href="#__codelineno-113-12"></a>calico-system<span class="w">          </span>csi-node-driver-6nbvr<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-13"><a id="__codelineno-113-13" name="__codelineno-113-13" href="#__codelineno-113-13"></a>calico-system<span class="w">          </span>csi-node-driver-9cqq5<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-14"><a id="__codelineno-113-14" name="__codelineno-113-14" href="#__codelineno-113-14"></a>calico-system<span class="w">          </span>csi-node-driver-9pm4t<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-15"><a id="__codelineno-113-15" name="__codelineno-113-15" href="#__codelineno-113-15"></a>default<span class="w">                </span>nginxweb-7c88f6c77-pck4f<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>17h
</span><span id="__span-113-16"><a id="__codelineno-113-16" name="__codelineno-113-16" href="#__codelineno-113-16"></a>default<span class="w">                </span>nginxweb-7c88f6c77-rv76n<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>17h
</span><span id="__span-113-17"><a id="__codelineno-113-17" name="__codelineno-113-17" href="#__codelineno-113-17"></a>default<span class="w">                </span>nginxweb-7c88f6c77-vb8xj<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>17h
</span><span id="__span-113-18"><a id="__codelineno-113-18" name="__codelineno-113-18" href="#__codelineno-113-18"></a>kube-system<span class="w">            </span>coredns-6766b7b6bb-6dtl7<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-19"><a id="__codelineno-113-19" name="__codelineno-113-19" href="#__codelineno-113-19"></a>kube-system<span class="w">            </span>coredns-6766b7b6bb-lrpw7<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-20"><a id="__codelineno-113-20" name="__codelineno-113-20" href="#__codelineno-113-20"></a>kube-system<span class="w">            </span>etcd-k8s-master01<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-21"><a id="__codelineno-113-21" name="__codelineno-113-21" href="#__codelineno-113-21"></a>kube-system<span class="w">            </span>kube-apiserver-k8s-master01<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-22"><a id="__codelineno-113-22" name="__codelineno-113-22" href="#__codelineno-113-22"></a>kube-system<span class="w">            </span>kube-controller-manager-k8s-master01<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-23"><a id="__codelineno-113-23" name="__codelineno-113-23" href="#__codelineno-113-23"></a>kube-system<span class="w">            </span>kube-proxy-6g8dn<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-24"><a id="__codelineno-113-24" name="__codelineno-113-24" href="#__codelineno-113-24"></a>kube-system<span class="w">            </span>kube-proxy-kmzv6<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-25"><a id="__codelineno-113-25" name="__codelineno-113-25" href="#__codelineno-113-25"></a>kube-system<span class="w">            </span>kube-proxy-pj2t5<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-26"><a id="__codelineno-113-26" name="__codelineno-113-26" href="#__codelineno-113-26"></a>kube-system<span class="w">            </span>kube-scheduler-k8s-master01<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>21h
</span><span id="__span-113-27"><a id="__codelineno-113-27" name="__codelineno-113-27" href="#__codelineno-113-27"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-api-c787c9d97-5rqvp<span class="w">                </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m35s
</span><span id="__span-113-28"><a id="__codelineno-113-28" name="__codelineno-113-28" href="#__codelineno-113-28"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-auth-7ff7855689-vmltw<span class="w">              </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m35s
</span><span id="__span-113-29"><a id="__codelineno-113-29" name="__codelineno-113-29" href="#__codelineno-113-29"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-kong-79867c9c48-txfql<span class="w">              </span><span class="m">0</span>/1<span class="w">     </span>Init:0/1<span class="w">            </span><span class="m">0</span><span class="w">          </span>2m35s
</span><span id="__span-113-30"><a id="__codelineno-113-30" name="__codelineno-113-30" href="#__codelineno-113-30"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7<span class="w">   </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m35s
</span><span id="__span-113-31"><a id="__codelineno-113-31" name="__codelineno-113-31" href="#__codelineno-113-31"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-web-658946f7f9-crj69<span class="w">               </span><span class="m">0</span>/1<span class="w">     </span>ContainerCreating<span class="w">   </span><span class="m">0</span><span class="w">          </span>2m35s
</span><span id="__span-113-32"><a id="__codelineno-113-32" name="__codelineno-113-32" href="#__codelineno-113-32"></a>tigera-operator<span class="w">        </span>tigera-operator-ccfc44587-vswlt<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">             </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-33"><a id="__codelineno-113-33" name="__codelineno-113-33" href="#__codelineno-113-33"></a>
</span><span id="__span-113-34"><a id="__codelineno-113-34" name="__codelineno-113-34" href="#__codelineno-113-34"></a>
</span><span id="__span-113-35"><a id="__codelineno-113-35" name="__codelineno-113-35" href="#__codelineno-113-35"></a>
</span><span id="__span-113-36"><a id="__codelineno-113-36" name="__codelineno-113-36" href="#__codelineno-113-36"></a>root@k8s-master01:~/.cache/helm/repository#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pod<span class="w"> </span>-A
</span><span id="__span-113-37"><a id="__codelineno-113-37" name="__codelineno-113-37" href="#__codelineno-113-37"></a>
</span><span id="__span-113-38"><a id="__codelineno-113-38" name="__codelineno-113-38" href="#__codelineno-113-38"></a>NAMESPACE<span class="w">              </span>NAME<span class="w">                                                    </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">   </span>AGE
</span><span id="__span-113-39"><a id="__codelineno-113-39" name="__codelineno-113-39" href="#__codelineno-113-39"></a>calico-apiserver<span class="w">       </span>calico-apiserver-7b7bbf4d75-b77ph<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-40"><a id="__codelineno-113-40" name="__codelineno-113-40" href="#__codelineno-113-40"></a>calico-apiserver<span class="w">       </span>calico-apiserver-7b7bbf4d75-gqq5w<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-41"><a id="__codelineno-113-41" name="__codelineno-113-41" href="#__codelineno-113-41"></a>calico-system<span class="w">          </span>calico-kube-controllers-cf49d8944-6zv2z<span class="w">                 </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-42"><a id="__codelineno-113-42" name="__codelineno-113-42" href="#__codelineno-113-42"></a>calico-system<span class="w">          </span>calico-node-2nfvf<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-43"><a id="__codelineno-113-43" name="__codelineno-113-43" href="#__codelineno-113-43"></a>calico-system<span class="w">          </span>calico-node-nxhvj<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-44"><a id="__codelineno-113-44" name="__codelineno-113-44" href="#__codelineno-113-44"></a>calico-system<span class="w">          </span>calico-node-v9lp9<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-45"><a id="__codelineno-113-45" name="__codelineno-113-45" href="#__codelineno-113-45"></a>calico-system<span class="w">          </span>calico-typha-7b6f98bc78-49bf5<span class="w">                           </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-46"><a id="__codelineno-113-46" name="__codelineno-113-46" href="#__codelineno-113-46"></a>calico-system<span class="w">          </span>calico-typha-7b6f98bc78-7vhd6<span class="w">                           </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-47"><a id="__codelineno-113-47" name="__codelineno-113-47" href="#__codelineno-113-47"></a>calico-system<span class="w">          </span>csi-node-driver-6nbvr<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-48"><a id="__codelineno-113-48" name="__codelineno-113-48" href="#__codelineno-113-48"></a>calico-system<span class="w">          </span>csi-node-driver-9cqq5<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-49"><a id="__codelineno-113-49" name="__codelineno-113-49" href="#__codelineno-113-49"></a>calico-system<span class="w">          </span>csi-node-driver-9pm4t<span class="w">                                   </span><span class="m">2</span>/2<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>19h
</span><span id="__span-113-50"><a id="__codelineno-113-50" name="__codelineno-113-50" href="#__codelineno-113-50"></a>default<span class="w">                </span>nginxweb-7c88f6c77-pck4f<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-51"><a id="__codelineno-113-51" name="__codelineno-113-51" href="#__codelineno-113-51"></a>default<span class="w">                </span>nginxweb-7c88f6c77-rv76n<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-52"><a id="__codelineno-113-52" name="__codelineno-113-52" href="#__codelineno-113-52"></a>default<span class="w">                </span>nginxweb-7c88f6c77-vb8xj<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>18h
</span><span id="__span-113-53"><a id="__codelineno-113-53" name="__codelineno-113-53" href="#__codelineno-113-53"></a>kube-system<span class="w">            </span>coredns-6766b7b6bb-6dtl7<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-54"><a id="__codelineno-113-54" name="__codelineno-113-54" href="#__codelineno-113-54"></a>kube-system<span class="w">            </span>coredns-6766b7b6bb-lrpw7<span class="w">                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-55"><a id="__codelineno-113-55" name="__codelineno-113-55" href="#__codelineno-113-55"></a>kube-system<span class="w">            </span>etcd-k8s-master01<span class="w">                                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-56"><a id="__codelineno-113-56" name="__codelineno-113-56" href="#__codelineno-113-56"></a>kube-system<span class="w">            </span>kube-apiserver-k8s-master01<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-57"><a id="__codelineno-113-57" name="__codelineno-113-57" href="#__codelineno-113-57"></a>kube-system<span class="w">            </span>kube-controller-manager-k8s-master01<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-58"><a id="__codelineno-113-58" name="__codelineno-113-58" href="#__codelineno-113-58"></a>kube-system<span class="w">            </span>kube-proxy-6g8dn<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-59"><a id="__codelineno-113-59" name="__codelineno-113-59" href="#__codelineno-113-59"></a>kube-system<span class="w">            </span>kube-proxy-kmzv6<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>20h
</span><span id="__span-113-60"><a id="__codelineno-113-60" name="__codelineno-113-60" href="#__codelineno-113-60"></a>kube-system<span class="w">            </span>kube-proxy-pj2t5<span class="w">                                        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>20h
</span><span id="__span-113-61"><a id="__codelineno-113-61" name="__codelineno-113-61" href="#__codelineno-113-61"></a>kube-system<span class="w">            </span>kube-scheduler-k8s-master01<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>22h
</span><span id="__span-113-62"><a id="__codelineno-113-62" name="__codelineno-113-62" href="#__codelineno-113-62"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-api-c787c9d97-5rqvp<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>41m
</span><span id="__span-113-63"><a id="__codelineno-113-63" name="__codelineno-113-63" href="#__codelineno-113-63"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-auth-7ff7855689-vmltw<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>41m
</span><span id="__span-113-64"><a id="__codelineno-113-64" name="__codelineno-113-64" href="#__codelineno-113-64"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-kong-79867c9c48-txfql<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>41m
</span><span id="__span-113-65"><a id="__codelineno-113-65" name="__codelineno-113-65" href="#__codelineno-113-65"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>41m
</span><span id="__span-113-66"><a id="__codelineno-113-66" name="__codelineno-113-66" href="#__codelineno-113-66"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-web-658946f7f9-crj69<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>41m
</span><span id="__span-113-67"><a id="__codelineno-113-67" name="__codelineno-113-67" href="#__codelineno-113-67"></a>tigera-operator<span class="w">        </span>tigera-operator-ccfc44587-vswlt<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">0</span><span class="w">          </span>20h
</span></code></pre></div>
<h2 id="63-dashboard">6.3 访问Dashboard前的准备<a class="headerlink" href="#63-dashboard" title="Permanent link">&para;</a></h2>
<p>本节参考自官方文档 </p>
<ul>
<li><a href="https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md">创建示例用户</a></li>
</ul>
<h3 id="631-service-account">6.3.1 创建示例用户 service-account<a class="headerlink" href="#631-service-account" title="Permanent link">&para;</a></h3>
<p>创建dashboard-service-account.yaml文件</p>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-114-4"><a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-114-5"><a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes-dashboard</span>
</span></code></pre></div>
<p>创建示例用户service-account命令</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>dashboard-service-account.yaml
</span></code></pre></div>
<h3 id="632-clusterrolebinding">6.3.2 创建 ClusterRoleBinding<a class="headerlink" href="#632-clusterrolebinding" title="Permanent link">&para;</a></h3>
<p>创建dashboard-cluster-role-binding.yaml文件</p>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-116-4"><a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-116-5"><a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a><span class="nt">roleRef</span><span class="p">:</span>
</span><span id="__span-116-6"><a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a><span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</span><span id="__span-116-7"><a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a><span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
</span><span id="__span-116-8"><a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-admin</span>
</span><span id="__span-116-9"><a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a><span class="nt">subjects</span><span class="p">:</span>
</span><span id="__span-116-10"><a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id="__span-116-11"><a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-116-12"><a id="__codelineno-116-12" name="__codelineno-116-12" href="#__codelineno-116-12"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes-dashboard</span>
</span></code></pre></div>
<p>创建 ClusterRoleBinding</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="c1"># 创建 ClusterRoleBinding</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>dashboard-cluster-role-binding.yaml
</span></code></pre></div>
<p>创建dashboard-admin-user.yaml 文件</p>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id="__span-118-3"><a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-118-4"><a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-118-5"><a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes-dashboard</span>
</span><span id="__span-118-6"><a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a><span class="nn">---</span>
</span><span id="__span-118-7"><a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id="__span-118-8"><a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
</span><span id="__span-118-9"><a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-118-10"><a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-118-11"><a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a><span class="nt">roleRef</span><span class="p">:</span>
</span><span id="__span-118-12"><a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a><span class="w">  </span><span class="nt">apiGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</span><span id="__span-118-13"><a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a><span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
</span><span id="__span-118-14"><a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-admin</span>
</span><span id="__span-118-15"><a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a><span class="nt">subjects</span><span class="p">:</span>
</span><span id="__span-118-16"><a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id="__span-118-17"><a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-118-18"><a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes-dashboard</span>
</span></code></pre></div>
<p>创建 ServiceAccount、ClusterRoleBinding</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>root@k8s-master01:~/.cache/helm/repository#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>/home/acanx/Dashboard/dashboard-admin-user.yaml
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>serviceaccount/admin-user<span class="w"> </span>created
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a>clusterrolebinding.rbac.authorization.k8s.io/admin-user<span class="w"> </span>created
</span></code></pre></div>
<h4 id="633-serviceaccount-bearer-tokentoken">6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌）<a class="headerlink" href="#633-serviceaccount-bearer-tokentoken" title="Permanent link">&para;</a></h4>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="c1"># 生成toke命令</span>
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>root@k8s-master01:~/.cache/helm/repository#<span class="w"> </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>create<span class="w"> </span>token<span class="w"> </span>admin-user
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQyNzMxMjUwLCJpYXQiOjE3NDI3Mjc2NTAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiYWM2NWZiNTItNjViMi00ZmQ5LWI4OTctMzQ4NjI4N2UzYTlmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNTBhNzgwZTYtODgzOC00ODI1LTk5ODktMzdhYTE0ZjM5ZjlkIn19LCJuYmYiOjE3NDI3Mjc2NTAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.9j0DPg2sKuVfODjWBxxXN3-r1GmXCGV58LULx81fiCwE5IdCp0LK4to0T35c55yiZjkW2fc7l01k6V7uKFTCGiJ3TDJn_1JJe5lZpWBWXSWoO_q-1nkMgniGPowieHEny3ZU1wm-Kk-nrr2CYZKhXShGDbRxpnjAPf1X0aB6lAzPt59GKVYpPaMYhcEBMMT_ASZrGLYrNR31UpbEXf2UP9Cgyh9m5vpA48FOJKZNt8FRq20egHWlWCw4a4PPb261w81vcWWB1bwTHIw-8CyNZjptrPVX06ch4DT-eX5No5jr8kh2gCiq--bARESxjgDjCebBS8O96NpKRWtQMQbFAQ
</span></code></pre></div>
<p>获取到的toke是类似上述的字符串</p>
<h4 id="634-serviceaccount-bearer-token-token">6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token）<a class="headerlink" href="#634-serviceaccount-bearer-token-token" title="Permanent link">&para;</a></h4>
<ul>
<li>创建dashboard-secret.yaml文件</li>
</ul>
<div class="language-yaml highlight"><span class="filename">YAML</span><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id="__span-121-5"><a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes-dashboard</span>
</span><span id="__span-121-6"><a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
</span><span id="__span-121-7"><a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a><span class="w">    </span><span class="nt">kubernetes.io/service-account.name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin-user&quot;</span><span class="w">   </span>
</span><span id="__span-121-8"><a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/service-account-token</span><span class="w">  </span>
</span></code></pre></div>
<ul>
<li>获取 ServiceAccount 的长期 Bearer Token </li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="c1"># 创建</span>
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>/home/acanx/Dashboard/dashboard-secret.yaml
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a><span class="c1"># 获取对应的token令牌</span>
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>admin-user<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.data.token}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>
</span><span id="__span-122-7"><a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1MGE3ODBlNi04ODM4LTQ4MjUtOTk4OS0zN2FhMTRmMzlmOWQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.UG-iAoiCRrMeUePUi5ryn4tUOhFC94eTv_THHkrT_XZhUwC-IHqy9zkmi20tfQ-jnSnzy9_H9Z_auNw6Y4VtGB6pUs7srk6X9AIr4JDrScEVSMLbLXyCsdwGKbAaQJ8n2KA0J_pXibAiaQ77vCIDs9A4HXjn-T7GhoWEeswAcZF1N1SYbDyMxC-paMKb2I5CxL6pxtgWXuPCFkHxVnzeAT9Pswj-q0_Htr46U0Ieyo3dEBVGoOE4FA56UCYEnIfIv-OHXHytcxdaETrKl22EWleAYYENQy82qrdn8eCMK9ahOQyvCFORUbltJWP0hRkIRoMSGx1gD1DMHWMd6T9IRw
</span></code></pre></div>
<h3 id="64-dashboard">6.4 正式访问Dashboard<a class="headerlink" href="#64-dashboard" title="Permanent link">&para;</a></h3>
<p>参考资料 <a href="https://blog.csdn.net/qq719779232/article/details/145212142">Kubernetes 集群中安装和配置 Kubernetes Dashboard</a></p>
<h3 id="641-port-forwarding">6.4.1 方式一：使用 Port Forwarding进行命令行代理<a class="headerlink" href="#641-port-forwarding" title="Permanent link">&para;</a></h3>
<p>Port Forwarding 是一种临时性的解决方案，它允许你通过本地机器上的端口直接访问集群内部的服务。这对于开发人员来说非常方便，因为他们不需要对外暴露服务即可进行调试或测试。</p>
<h4 id="6411">6.4.1.1 开启访问<a class="headerlink" href="#6411" title="Permanent link">&para;</a></h4>
<p>通过 Port Forwarding 访问 Dashboard，需要先执行如下命令：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>port-forward<span class="w"> </span>svc/kubernetes-dashboard<span class="w"> </span><span class="m">8443</span>:443
</span></code></pre></div>
<p>这将Dashboard在 <a href="https://localhost:8443">https://localhost:8443</a> 上可用。</p>
<h4 id="6412">6.4.1.2 优点与缺点<a class="headerlink" href="#6412" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>这种方式的优点在于方法简单易用，无需更改任何集群配置，适合小规模测试或个人使用。但仅限于执行命令的本地机器，它是临时的，关闭终端后连接即断开，无法在其他机器上访问，并且每次使用时都需要手动开启端口转发。</p>
</li>
<li>
<p>也就是说，无法直接在集群外部访问，此方案不适合本次（集群外访问）实际访问场景，因此需要调整采用其他方案</p>
</li>
</ul>
<h3 id="642-nodeport">6.4.2 方式二：修改服务类型为 NodePort<a class="headerlink" href="#642-nodeport" title="Permanent link">&para;</a></h3>
<h4 id="6421">6.4.2.1 方法概述<a class="headerlink" href="#6421" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>NodePort 允许 Kubernetes 服务在各个集群节点的特定端口上对外暴露。这使得用户能够通过任意节点的 IP 地址和指定 NodePort 进行访问 Dashboard。（范围通常是 30000-32767），从而允许外部流量通过该端口进入集群并访问指定的服务。</p>
</li>
<li>
<p>也就是支持集群外部访问</p>
</li>
</ul>
<h4 id="6422">6.4.2.2 开启访问<a class="headerlink" href="#6422" title="Permanent link">&para;</a></h4>
<p>编辑 Dashboard 的服务配置，将其类型更改为 NodePort：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>patch<span class="w"> </span>svc<span class="w"> </span>kubernetes-dashboard-kong-proxy<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>--type<span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="w"> </span>-p<span class="w"> </span><span class="s1">&#39;[{&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;}]&#39;</span>
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a><span class="c1"># TODO 若需要指定端口，可以指定一个固定的 nodePort：</span>
</span><span id="__span-124-3"><a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>patch<span class="w"> </span>svc<span class="w"> </span>kubernetes-dashboard-kong-proxy<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>--type<span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="w"> </span>-p<span class="w"> </span><span class="s1">&#39;[{&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/spec/ports/0/nodePort&quot;,&quot;value&quot;:30000}]&#39;</span>
</span></code></pre></div>
<p>以下是实际操作及结果：</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>patch<span class="w"> </span>svc<span class="w"> </span>kubernetes-dashboard-kong-proxy<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>--type<span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="w"> </span>-p<span class="w"> </span><span class="s1">&#39;[{&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;}]&#39;</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
</span><span id="__span-125-3"><a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>service/kubernetes-dashboard-kong-proxy<span class="w"> </span>patched
</span><span id="__span-125-4"><a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>-A
</span><span id="__span-125-5"><a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>
</span><span id="__span-125-6"><a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>NAMESPACE<span class="w">              </span>NAME<span class="w">                                   </span>TYPE<span class="w">        </span>CLUSTER-IP<span class="w">       </span>EXTERNAL-IP<span class="w">   </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">                  </span>AGE
</span><span id="__span-125-7"><a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>calico-apiserver<span class="w">       </span>calico-api<span class="w">                             </span>ClusterIP<span class="w">   </span><span class="m">10</span>.109.219.68<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">                  </span>21h
</span><span id="__span-125-8"><a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a>calico-system<span class="w">          </span>calico-kube-controllers-metrics<span class="w">        </span>ClusterIP<span class="w">   </span>None<span class="w">             </span>&lt;none&gt;<span class="w">        </span><span class="m">9094</span>/TCP<span class="w">                 </span>20h
</span><span id="__span-125-9"><a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>calico-system<span class="w">          </span>calico-typha<span class="w">                           </span>ClusterIP<span class="w">   </span><span class="m">10</span>.104.149.150<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">5473</span>/TCP<span class="w">                 </span>21h
</span><span id="__span-125-10"><a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>default<span class="w">                </span>kubernetes<span class="w">                             </span>ClusterIP<span class="w">   </span><span class="m">10</span>.96.0.1<span class="w">        </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">                  </span>23h
</span><span id="__span-125-11"><a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>default<span class="w">                </span>nginxweb-service<span class="w">                       </span>NodePort<span class="w">    </span><span class="m">10</span>.106.65.218<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">80</span>:30080/TCP<span class="w">             </span>19h
</span><span id="__span-125-12"><a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>kube-system<span class="w">            </span>kube-dns<span class="w">                               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.96.0.10<span class="w">       </span>&lt;none&gt;<span class="w">        </span><span class="m">53</span>/UDP,53/TCP,9153/TCP<span class="w">   </span>23h
</span><span id="__span-125-13"><a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-api<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.104.42.174<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>128m
</span><span id="__span-125-14"><a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-auth<span class="w">              </span>ClusterIP<span class="w">   </span><span class="m">10</span>.98.125.185<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>128m
</span><span id="__span-125-15"><a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-external<span class="w">          </span>NodePort<span class="w">    </span><span class="m">10</span>.101.246.117<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:30011/TCP<span class="w">            </span>7m8s
</span><span id="__span-125-16"><a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-kong-proxy<span class="w">        </span>NodePort<span class="w">    </span><span class="m">10</span>.110.23.250<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:31094/TCP<span class="w">            </span>128m
</span><span id="__span-125-17"><a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-metrics-scraper<span class="w">   </span>ClusterIP<span class="w">   </span><span class="m">10</span>.102.211.164<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>128m
</span><span id="__span-125-18"><a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-web<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.107.236.126<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>128m
</span><span id="__span-125-19"><a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a>
</span><span id="__span-125-20"><a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a><span class="c1"># 相关的命令1</span>
</span><span id="__span-125-21"><a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>dash
</span><span id="__span-125-22"><a id="__codelineno-125-22" name="__codelineno-125-22" href="#__codelineno-125-22"></a>
</span><span id="__span-125-23"><a id="__codelineno-125-23" name="__codelineno-125-23" href="#__codelineno-125-23"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-api<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.104.42.174<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>166m
</span><span id="__span-125-24"><a id="__codelineno-125-24" name="__codelineno-125-24" href="#__codelineno-125-24"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-auth<span class="w">              </span>ClusterIP<span class="w">   </span><span class="m">10</span>.98.125.185<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>166m
</span><span id="__span-125-25"><a id="__codelineno-125-25" name="__codelineno-125-25" href="#__codelineno-125-25"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-external<span class="w">          </span>NodePort<span class="w">    </span><span class="m">10</span>.101.246.117<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:30011/TCP<span class="w">            </span>44m
</span><span id="__span-125-26"><a id="__codelineno-125-26" name="__codelineno-125-26" href="#__codelineno-125-26"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-kong-proxy<span class="w">        </span>NodePort<span class="w">    </span><span class="m">10</span>.110.23.250<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:31094/TCP<span class="w">            </span>166m
</span><span id="__span-125-27"><a id="__codelineno-125-27" name="__codelineno-125-27" href="#__codelineno-125-27"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-metrics-scraper<span class="w">   </span>ClusterIP<span class="w">   </span><span class="m">10</span>.102.211.164<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>166m
</span><span id="__span-125-28"><a id="__codelineno-125-28" name="__codelineno-125-28" href="#__codelineno-125-28"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-web<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.107.236.126<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>166m
</span><span id="__span-125-29"><a id="__codelineno-125-29" name="__codelineno-125-29" href="#__codelineno-125-29"></a>
</span><span id="__span-125-30"><a id="__codelineno-125-30" name="__codelineno-125-30" href="#__codelineno-125-30"></a><span class="c1"># 相关的命令2</span>
</span><span id="__span-125-31"><a id="__codelineno-125-31" name="__codelineno-125-31" href="#__codelineno-125-31"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>svc<span class="w"> </span>-A<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard
</span><span id="__span-125-32"><a id="__codelineno-125-32" name="__codelineno-125-32" href="#__codelineno-125-32"></a>
</span><span id="__span-125-33"><a id="__codelineno-125-33" name="__codelineno-125-33" href="#__codelineno-125-33"></a>NAMESPACE<span class="w">              </span>NAME<span class="w">                                   </span>TYPE<span class="w">        </span>CLUSTER-IP<span class="w">       </span>EXTERNAL-IP<span class="w">   </span>PORT<span class="o">(</span>S<span class="o">)</span><span class="w">                  </span>AGE
</span><span id="__span-125-34"><a id="__codelineno-125-34" name="__codelineno-125-34" href="#__codelineno-125-34"></a>calico-apiserver<span class="w">       </span>calico-api<span class="w">                             </span>ClusterIP<span class="w">   </span><span class="m">10</span>.109.219.68<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">                  </span>21h
</span><span id="__span-125-35"><a id="__codelineno-125-35" name="__codelineno-125-35" href="#__codelineno-125-35"></a>calico-system<span class="w">          </span>calico-kube-controllers-metrics<span class="w">        </span>ClusterIP<span class="w">   </span>None<span class="w">             </span>&lt;none&gt;<span class="w">        </span><span class="m">9094</span>/TCP<span class="w">                 </span>21h
</span><span id="__span-125-36"><a id="__codelineno-125-36" name="__codelineno-125-36" href="#__codelineno-125-36"></a>calico-system<span class="w">          </span>calico-typha<span class="w">                           </span>ClusterIP<span class="w">   </span><span class="m">10</span>.104.149.150<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">5473</span>/TCP<span class="w">                 </span>21h
</span><span id="__span-125-37"><a id="__codelineno-125-37" name="__codelineno-125-37" href="#__codelineno-125-37"></a>default<span class="w">                </span>kubernetes<span class="w">                             </span>ClusterIP<span class="w">   </span><span class="m">10</span>.96.0.1<span class="w">        </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>/TCP<span class="w">                  </span>24h
</span><span id="__span-125-38"><a id="__codelineno-125-38" name="__codelineno-125-38" href="#__codelineno-125-38"></a>default<span class="w">                </span>nginxweb-service<span class="w">                       </span>NodePort<span class="w">    </span><span class="m">10</span>.106.65.218<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">80</span>:30080/TCP<span class="w">             </span>20h
</span><span id="__span-125-39"><a id="__codelineno-125-39" name="__codelineno-125-39" href="#__codelineno-125-39"></a>kube-system<span class="w">            </span>kube-dns<span class="w">                               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.96.0.10<span class="w">       </span>&lt;none&gt;<span class="w">        </span><span class="m">53</span>/UDP,53/TCP,9153/TCP<span class="w">   </span>24h
</span><span id="__span-125-40"><a id="__codelineno-125-40" name="__codelineno-125-40" href="#__codelineno-125-40"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-api<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.104.42.174<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>165m
</span><span id="__span-125-41"><a id="__codelineno-125-41" name="__codelineno-125-41" href="#__codelineno-125-41"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-auth<span class="w">              </span>ClusterIP<span class="w">   </span><span class="m">10</span>.98.125.185<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>165m
</span><span id="__span-125-42"><a id="__codelineno-125-42" name="__codelineno-125-42" href="#__codelineno-125-42"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-external<span class="w">          </span>NodePort<span class="w">    </span><span class="m">10</span>.101.246.117<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:30011/TCP<span class="w">            </span>44m
</span><span id="__span-125-43"><a id="__codelineno-125-43" name="__codelineno-125-43" href="#__codelineno-125-43"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-kong-proxy<span class="w">        </span>NodePort<span class="w">    </span><span class="m">10</span>.110.23.250<span class="w">    </span>&lt;none&gt;<span class="w">        </span><span class="m">443</span>:31094/TCP<span class="w">            </span>165m
</span><span id="__span-125-44"><a id="__codelineno-125-44" name="__codelineno-125-44" href="#__codelineno-125-44"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-metrics-scraper<span class="w">   </span>ClusterIP<span class="w">   </span><span class="m">10</span>.102.211.164<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>165m
</span><span id="__span-125-45"><a id="__codelineno-125-45" name="__codelineno-125-45" href="#__codelineno-125-45"></a>kubernetes-dashboard<span class="w">   </span>kubernetes-dashboard-web<span class="w">               </span>ClusterIP<span class="w">   </span><span class="m">10</span>.107.236.126<span class="w">   </span>&lt;none&gt;<span class="w">        </span><span class="m">8000</span>/TCP<span class="w">                 </span>165m
</span></code></pre></div>
<p>如果显示您的连接不是私密连接，在当前页面用键盘输入thisisunsafe,不是在地址栏输入，就直接输入，页面即会自动刷新进入网页。不行就多输入几次，但是要确保输入是正确的。具体请查看这篇<a href="https://blog.csdn.net/qq719779232/article/details/144852360">博客</a></p>
<h4 id="6424-kubernetes-dashboard-web">6.4.2.4 访问Kubernetes Dashboard Web页面<a class="headerlink" href="#6424-kubernetes-dashboard-web" title="Permanent link">&para;</a></h4>
<p>可以看到随机开放了31094端口访问，浏览器中打开 https://192.168.11.161:31094 测试（忽略不是私密连接的提示后）可以正常打开，输入token后能够正常登录。</p>
<p><a class="glightbox" href="/Node/imgs/03_02/Dashboard-Load.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Kubernetes-Dashboard-HomePage" src="/Node/imgs/03_02/Dashboard-Load.png" /></a></p>
<p><a class="glightbox" href="/Node/imgs/03_02/Dashboard.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Kubernetes-Dashboard-HomePage" src="/Node/imgs/03_02/Dashboard.png" /></a></p>
<h4 id="6425">6.4.2.5 优点与缺点<a class="headerlink" href="#6425" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>这种方法一旦配置完成，只要集群存在就可以持续访问，提供了长期稳定的访问途径；同时可以直接通过任意节点 IP 加上指定端口号来访问服务，易于访问。</p>
</li>
<li>
<p>但是，它也带来了较高的安全风险，如果未正确配置防火墙规则，可能会导致服务被未经授权的人访问；</p>
</li>
<li>
<p>此外，还需要选择一个未被占用的端口，因此有一定的端口限制。</p>
</li>
</ul>
<h4 id="6426">6.4.2.6 参考资料<a class="headerlink" href="#6426" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://github.com/kubernetes/dashboard/blob/kubernetes-dashboard-7.11.1/README.md">kubernetes-dashboard-7.11.1/README.md</a></li>
<li><a href="https://github.com/kubernetes/dashboard/tree/master/docs/user/accessing-dashboard">访问仪表板</a></li>
<li><a href="https://www.bilibili.com/video/BV15UsSeDEZA/">69.Kubernetes(k8s)手把手教程—部署Dashboard以图形化方式管理Kubernetes</a></li>
<li><a href="https://www.cnblogs.com/renshengdezheli/p/17513879.html">Kubernetes(k8s) Web-UI界面(一)：部署和访问仪表板(Dashboard)</a></li>
<li><a href="https://www.oiox.cn/index.php/archives/428/">二进制安装Kubernetes（k8s）v1.32.0</a></li>
</ul>
<h3 id="65">6.5 清理和后续步骤<a class="headerlink" href="#65" title="Permanent link">&para;</a></h3>
<p>删除管理员ServiceAccount和ClusterRoleBinding。</p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>delete<span class="w"> </span>serviceaccount<span class="w"> </span>admin-user
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>root@k8s-master01:~#<span class="w"> </span>kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>delete<span class="w"> </span>clusterrolebinding<span class="w"> </span>admin-user
</span></code></pre></div>
<p>了解有关如何在 Kubernetes 中授予/拒绝权限的更多信息，阅读官方<a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">身份验证</a>和<a href="https://kubernetes.io/docs/reference/access-authn-authz/authorization/">授权</a>文档。</p>
<h1 id="_6">七、 实际部署过程中遇到的问题<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h1>
<h3 id="711">7.1.1操作系统重启后无法使用原账户登录<a class="headerlink" href="#711" title="Permanent link">&para;</a></h3>
<h3 id="712-kubeadm">7.1.2 kubeadm初始化失败，抛出错误<a class="headerlink" href="#712-kubeadm" title="Permanent link">&para;</a></h3>
<h3 id="713-kubelet">7.1.3 安装如遇到错误，需要修改配置，关闭kubelet<a class="headerlink" href="#713-kubelet" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-apiserver.yaml
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>~#<span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-controller-manager.yaml
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>~#<span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-scheduler.yaml
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>~#<span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/etcd.yaml
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a>~#<span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-apiserver.yaml<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-controller-manager.yaml<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/kube-scheduler.yaml<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes/manifests/etcd.yaml
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a>sudo<span class="w"> </span>netstat<span class="w"> </span>-tulnp<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>:10250
</span><span id="__span-127-9"><a id="__codelineno-127-9" name="__codelineno-127-9" href="#__codelineno-127-9"></a>sudo<span class="w"> </span>lsof<span class="w"> </span>-i<span class="w"> </span>:10250
</span><span id="__span-127-10"><a id="__codelineno-127-10" name="__codelineno-127-10" href="#__codelineno-127-10"></a>
</span><span id="__span-127-11"><a id="__codelineno-127-11" name="__codelineno-127-11" href="#__codelineno-127-11"></a>sudo<span class="w"> </span><span class="nb">kill</span><span class="w"> </span><span class="m">2832</span>
</span><span id="__span-127-12"><a id="__codelineno-127-12" name="__codelineno-127-12" href="#__codelineno-127-12"></a>sudo<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>-9<span class="w"> </span><span class="m">1234</span>
</span><span id="__span-127-13"><a id="__codelineno-127-13" name="__codelineno-127-13" href="#__codelineno-127-13"></a>
</span><span id="__span-127-14"><a id="__codelineno-127-14" name="__codelineno-127-14" href="#__codelineno-127-14"></a>~#<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>kubelet
</span><span id="__span-127-15"><a id="__codelineno-127-15" name="__codelineno-127-15" href="#__codelineno-127-15"></a>~#<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>kubelet
</span></code></pre></div>
<h4 id="7132-kubernetes">7.1.3.2 重新初始化 Kubernetes 集群<a class="headerlink" href="#7132-kubernetes" title="Permanent link">&para;</a></h4>
<ul>
<li>步骤 1：重置 kubeadm\2：清理残留文件</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>kubeadm<span class="w"> </span>reset<span class="w"> </span>-f<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/etc/kubernetes<span class="w"> </span>/var/lib/etcd<span class="w"> </span>/var/lib/kubelet
</span></code></pre></div>
<ul>
<li>https://blog.csdn.net/m0_51510236/article/details/136329885</li>
</ul>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>root@k8s-master01:~#<span class="w"> </span>sudo<span class="w"> </span>kubeadm<span class="w"> </span>init<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>--apiserver-advertise-address<span class="o">=</span><span class="m">192</span>.168.11.161<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>--apiserver-cert-extra-sans<span class="o">=</span>k8s-master01<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a>--image-repository<span class="o">=</span>registry.aliyuncs.com/google_containers<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a>--kubernetes-version<span class="o">=</span>v1.32.3<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>--service-cidr<span class="o">=</span><span class="m">10</span>.96.0.0/12<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-7"><a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>--pod-network-cidr<span class="o">=</span><span class="m">10</span>.244.0.0/16<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-8"><a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>--cri-socket<span class="o">=</span>unix:///run/containerd/containerd.sock<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-9"><a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a>--cgroup-driver<span class="o">=</span>systemd<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-10"><a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>--upload-certs<span class="w"> </span><span class="se">\</span>
</span><span id="__span-129-11"><a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>--v<span class="o">=</span><span class="m">9</span>
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:21<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:21.545465<span class="w">    </span><span class="m">9760</span><span class="w"> </span>pod_workers.go:1301<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Error syncing pod, skipping&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;failed to \&quot;CreatePodSandbox\&quot; for \&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\&quot; with CreatePodSandboxError: \&quot;Failed to create sandbox for pod \\\&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\&quot;623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2/log.json: no such file or directory): exec: \\\&quot;runc\\\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">\&quot;&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-controller-manager-k8s-master01&quot;</span><span class="w"> </span><span class="nv">podUID</span><span class="o">=</span><span class="s2">&quot;19dfb154dd163834eef61b7252703fed&quot;</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:23<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:23.120378<span class="w">    </span><span class="m">9760</span><span class="w"> </span>controller.go:145<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Failed to ensure lease exists, will retry&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Get \&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">interval</span><span class="o">=</span><span class="s2">&quot;7s&quot;</span>
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:23<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>I0322<span class="w"> </span><span class="m">13</span>:26:23.327532<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet_node_status.go:75<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Attempting to register node&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:23<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:23.328029<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet_node_status.go:107<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Unable to register node with API server&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Post \&quot;https://192.168.11.161:6443/api/v1/nodes\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-5"><a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:25<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>W0322<span class="w"> </span><span class="m">13</span>:26:25.039914<span class="w">    </span><span class="m">9760</span><span class="w"> </span>reflector.go:569<span class="o">]</span><span class="w"> </span>k8s.io/client-go/informers/factory.go:160:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>list<span class="w"> </span>*v1.CSIDriver:<span class="w"> </span>Get<span class="w"> </span><span class="s2">&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0&quot;</span>:<span class="w"> </span>dial<span class="w"> </span>tcp<span class="w"> </span><span class="m">192</span>.168.11.161:6443:<span class="w"> </span>connect:<span class="w"> </span>connection<span class="w"> </span>refused
</span><span id="__span-130-6"><a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:25<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:25.040030<span class="w">    </span><span class="m">9760</span><span class="w"> </span>reflector.go:166<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Unhandled Error&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.CSIDriver: failed to list *v1.CSIDriver: Get \&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">logger</span><span class="o">=</span><span class="s2">&quot;UnhandledError&quot;</span>
</span><span id="__span-130-7"><a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>W0322<span class="w"> </span><span class="m">13</span>:26:26.039053<span class="w">    </span><span class="m">9760</span><span class="w"> </span>reflector.go:569<span class="o">]</span><span class="w"> </span>k8s.io/client-go/informers/factory.go:160:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>list<span class="w"> </span>*v1.Service:<span class="w"> </span>Get<span class="w"> </span><span class="s2">&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0&quot;</span>:<span class="w"> </span>dial<span class="w"> </span>tcp<span class="w"> </span><span class="m">192</span>.168.11.161:6443:<span class="w"> </span>connect:<span class="w"> </span>connection<span class="w"> </span>refused
</span><span id="__span-130-8"><a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.039171<span class="w">    </span><span class="m">9760</span><span class="w"> </span>reflector.go:166<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Unhandled Error&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.Service: failed to list *v1.Service: Get \&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">logger</span><span class="o">=</span><span class="s2">&quot;UnhandledError&quot;</span>
</span><span id="__span-130-9"><a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.450839<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet.go:3190<span class="o">]</span><span class="w"> </span><span class="s2">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;node \&quot;k8s-master01\&quot; not found&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-10"><a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.451717<span class="w">    </span><span class="m">9760</span><span class="w"> </span>dns.go:153<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Nameserver limits exceeded&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span>
</span><span id="__span-130-11"><a id="__codelineno-130-11" name="__codelineno-130-11" href="#__codelineno-130-11"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.547499<span class="w">    </span><span class="m">9760</span><span class="w"> </span>log.go:32<span class="o">]</span><span class="w"> </span><span class="s2">&quot;RunPodSandbox from runtime service failed&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</span><span id="__span-130-12"><a id="__codelineno-130-12" name="__codelineno-130-12" href="#__codelineno-130-12"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.547575<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kuberuntime_sandbox.go:72<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Failed to create sandbox for pod&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span>
</span><span id="__span-130-13"><a id="__codelineno-130-13" name="__codelineno-130-13" href="#__codelineno-130-13"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.547611<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kuberuntime_manager.go:1237<span class="o">]</span><span class="w"> </span><span class="s2">&quot;CreatePodSandbox for pod failed&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span>
</span><span id="__span-130-14"><a id="__codelineno-130-14" name="__codelineno-130-14" href="#__codelineno-130-14"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:26<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:26.547680<span class="w">    </span><span class="m">9760</span><span class="w"> </span>pod_workers.go:1301<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Error syncing pod, skipping&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;failed to \&quot;CreatePodSandbox\&quot; for \&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\&quot; with CreatePodSandboxError: \&quot;Failed to create sandbox for pod \\\&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\&quot;runc\\\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">\&quot;&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span><span class="w"> </span><span class="nv">podUID</span><span class="o">=</span><span class="s2">&quot;843638c9eef6e3d63d22d53c9d990887&quot;</span>
</span><span id="__span-130-15"><a id="__codelineno-130-15" name="__codelineno-130-15" href="#__codelineno-130-15"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:29<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:29.498553<span class="w">    </span><span class="m">9760</span><span class="w"> </span>eviction_manager.go:292<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Eviction manager: failed to get summary stats&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;failed to get node info: node \&quot;k8s-master01\&quot; not found&quot;</span>
</span><span id="__span-130-16"><a id="__codelineno-130-16" name="__codelineno-130-16" href="#__codelineno-130-16"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.122192<span class="w">    </span><span class="m">9760</span><span class="w"> </span>controller.go:145<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Failed to ensure lease exists, will retry&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Get \&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">interval</span><span class="o">=</span><span class="s2">&quot;7s&quot;</span>
</span><span id="__span-130-17"><a id="__codelineno-130-17" name="__codelineno-130-17" href="#__codelineno-130-17"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>I0322<span class="w"> </span><span class="m">13</span>:26:30.329597<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet_node_status.go:75<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Attempting to register node&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-18"><a id="__codelineno-130-18" name="__codelineno-130-18" href="#__codelineno-130-18"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.330070<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet_node_status.go:107<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Unable to register node with API server&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Post \&quot;https://192.168.11.161:6443/api/v1/nodes\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-19"><a id="__codelineno-130-19" name="__codelineno-130-19" href="#__codelineno-130-19"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.450085<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kubelet.go:3190<span class="o">]</span><span class="w"> </span><span class="s2">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;node \&quot;k8s-master01\&quot; not found&quot;</span><span class="w"> </span><span class="nv">node</span><span class="o">=</span><span class="s2">&quot;k8s-master01&quot;</span>
</span><span id="__span-130-20"><a id="__codelineno-130-20" name="__codelineno-130-20" href="#__codelineno-130-20"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.450964<span class="w">    </span><span class="m">9760</span><span class="w"> </span>dns.go:153<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Nameserver limits exceeded&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span>
</span><span id="__span-130-21"><a id="__codelineno-130-21" name="__codelineno-130-21" href="#__codelineno-130-21"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.548988<span class="w">    </span><span class="m">9760</span><span class="w"> </span>log.go:32<span class="o">]</span><span class="w"> </span><span class="s2">&quot;RunPodSandbox from runtime service failed&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</span><span id="__span-130-22"><a id="__codelineno-130-22" name="__codelineno-130-22" href="#__codelineno-130-22"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.549096<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kuberuntime_sandbox.go:72<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Failed to create sandbox for pod&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span>
</span><span id="__span-130-23"><a id="__codelineno-130-23" name="__codelineno-130-23" href="#__codelineno-130-23"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.549145<span class="w">    </span><span class="m">9760</span><span class="w"> </span>kuberuntime_manager.go:1237<span class="o">]</span><span class="w"> </span><span class="s2">&quot;CreatePodSandbox for pod failed&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;rpc error: code = Unknown desc = failed to start sandbox \&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \&quot;runc\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span>
</span><span id="__span-130-24"><a id="__codelineno-130-24" name="__codelineno-130-24" href="#__codelineno-130-24"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:30<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:30.549256<span class="w">    </span><span class="m">9760</span><span class="w"> </span>pod_workers.go:1301<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Error syncing pod, skipping&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;failed to \&quot;CreatePodSandbox\&quot; for \&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\&quot; with CreatePodSandboxError: \&quot;Failed to create sandbox for pod \\\&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\&quot;runc\\\&quot;: executable file not found in </span><span class="nv">$PATH</span><span class="s2">\&quot;&quot;</span><span class="w"> </span><span class="nv">pod</span><span class="o">=</span><span class="s2">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span><span class="w"> </span><span class="nv">podUID</span><span class="o">=</span><span class="s2">&quot;c7ec3024ac27f675ae60ec998a90ce85&quot;</span>
</span><span id="__span-130-25"><a id="__codelineno-130-25" name="__codelineno-130-25" href="#__codelineno-130-25"></a>Mar<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">13</span>:26:31<span class="w"> </span>k8s-master01<span class="w"> </span>kubelet<span class="o">[</span><span class="m">9760</span><span class="o">]</span>:<span class="w"> </span>E0322<span class="w"> </span><span class="m">13</span>:26:31.073491<span class="w">    </span><span class="m">9760</span><span class="w"> </span>event.go:368<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Unable to write event (may retry after sleeping)&quot;</span><span class="w"> </span><span class="nv">err</span><span class="o">=</span><span class="s2">&quot;Post \&quot;https://192.168.11.161:6443/api/v1/namespaces/default/events\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span><span class="w"> </span><span class="nv">event</span><span class="o">=</span><span class="s2">&quot;&amp;Event{ObjectMeta:{k8s-master01.182f0852158da106  default    0 0001-01-01 00:00:00 +0000 UTC &lt;nil&gt; &lt;nil&gt; map[] map[] [] [] []},InvolvedObject:ObjectReference{Kind:Node,Namespace:,Name:k8s-master01,UID:k8s-master01,APIVersion:,ResourceVersion:,FieldPath:,},Reason:NodeHasSufficientPID,Message:Node k8s-master01 status is now: NodeHasSufficientPID,Source:EventSource{Component:kubelet,Host:k8s-master01,},FirstTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,LastTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,Count:1,Type:Normal,EventTime:0001-01-01 00:00:00 +0000 UTC,Series:nil,Action:,Related:nil,ReportingController:kubelet,ReportingInstance:k8s-master01,}&quot;</span>
</span></code></pre></div>
<h3 id="714-kubernetscalicokubectl-get-pods-n-tigera-operatorpodimagepullbackoff">7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态<a class="headerlink" href="#714-kubernetscalicokubectl-get-pods-n-tigera-operatorpodimagepullbackoff" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>~#<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pod<span class="w"> </span>tigera-operator-ccfc44587-vswlt<span class="w"> </span>-n<span class="w"> </span>tigera-operator
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>~#<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>tigera-operator<span class="w"> </span>-o<span class="w"> </span>wide
</span></code></pre></div>
<p>查到“Failed to pull image "quay.io/tigera/operator:v1.36.5": failed to pull and unpack image "quay.io/tigera/operator:v1.36.5": failed to copy: read tcp 192.168.11.166:53828-&gt;23.60.96.137:443: read: connection reset by peer
”
需要手动拉取镜像或者增加镜像源（参考https://blog.csdn.net/nxg810251/article/details/145170594中的config.toml文件的Line206~Line219中的配置） </p>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>~#<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>containerd<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>kubelet
</span></code></pre></div>
<div class="language-bash highlight"><span class="filename">Bash</span><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>~#<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>containerd
</span></code></pre></div>
<h4 id="7143">7.1.4.3 参考：<a class="headerlink" href="#7143" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://blog.csdn.net/weixin_40444270/article/details/132543441">K8s的Pod出现Init:ImagePullBackOff问题的解决(以calico为例)</a></li>
<li><a href="https://blog.csdn.net/nxg810251/article/details/145170594">Kubernetes1.32版本搭建【超详细】</a></li>
<li><a href="https://blog.csdn.net/weixin_42434261/article/details/144539712">Kubernetes1.32版本搭建【极简版】</a></li>
</ul>
<h1 id="_7">八、 总结<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h1>
<h2 id="81">8.1 可以继续优化的流程<a class="headerlink" href="#81" title="Permanent link">&para;</a></h2>
<h3 id="811">8.1.1 虚拟机镜像准备<a class="headerlink" href="#811" title="Permanent link">&para;</a></h3>
<h3 id="812-containerd">8.1.2 containerd版本选择<a class="headerlink" href="#812-containerd" title="Permanent link">&para;</a></h3>
<h3 id="813">8.1.3 镜像源加速<a class="headerlink" href="#813" title="Permanent link">&para;</a></h3>
<h3 id="814">8.1.4 网络配置<a class="headerlink" href="#814" title="Permanent link">&para;</a></h3>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      2025-03-23
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../1/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Kubernetes容器编排系统概念模型" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Kubernetes容器编排系统概念模型
            </div>
          </div>
        </a>
      
      
        
        <a href="../../4/1/" class="md-footer__link md-footer__link--next" aria-label="下一页: 添加硬盘" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              添加硬盘
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy;  ACANX
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://www.acanx.com" target="_blank" rel="noopener" title="ACANX" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M341.52 285.56c33.65 0 82.34-6.94 82.34-47 .22-6.74.86-1.82-20.88-96.24-4.62-19.15-8.68-27.84-42.31-44.65-26.09-13.34-82.92-35.37-99.73-35.37-15.66 0-20.2 20.17-38.87 20.17-18 0-31.31-15.06-48.12-15.06-16.14 0-26.66 11-34.78 33.62-27.5 77.55-26.28 74.27-26.12 78.27 0 24.8 97.64 106.11 228.47 106.11M429 254.84c4.65 22 4.65 24.35 4.65 27.25 0 37.66-42.33 58.56-98 58.56-125.74.08-235.91-73.65-235.91-122.33a49.55 49.55 0 0 1 4.06-19.72C58.56 200.86 0 208.93 0 260.63c0 84.67 200.63 189 359.49 189 121.79 0 152.51-55.08 152.51-98.58 0-34.21-29.59-73.05-82.93-96.24"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "search.suggest", "search.highlight", "search.share", "content.code.annotate", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d691e9de.min.js"></script>
      <script id="click-show-text" src="https://html.sqlsec.com/click-show-text.min.js" data-mobile="false" data-text="OpenCore,Hackintosh,DSDT,SSDT,Kernel,Kexts,UEFI,NVRAM,BIOS,ACPI,Clover,AWAC,XOSI,Lilu.kext,VirtualSMC.kext,WhateverGreen.kext" data-fontsize="15px" data-random="false" async="async"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>